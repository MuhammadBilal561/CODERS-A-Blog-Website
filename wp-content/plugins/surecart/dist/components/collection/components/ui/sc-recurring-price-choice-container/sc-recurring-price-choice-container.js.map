{"version":3,"file":"sc-recurring-price-choice-container.js","sourceRoot":"","sources":["../../../../src/components/ui/sc-recurring-price-choice-container/sc-recurring-price-choice-container.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, Fragment, h, Prop, Host, State } from '@stencil/core';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Price, Product } from 'src/types';\nimport { intervalString } from '../../../functions/price';\n\n@Component({\n  tag: 'sc-recurring-price-choice-container',\n  styleUrl: 'sc-recurring-price-choice-container.scss',\n  shadow: false,\n})\nexport class ScRecurringPriceChoiceContainer {\n  /** The prices to choose from. */\n  @Prop() prices: Price[];\n\n  /** The currently selected price */\n  @Prop() selectedPrice: Price;\n\n  /** The internal currently selected option state */\n  @State() selectedOption: Price;\n\n  /** The product. */\n  @Prop() product: Product;\n\n  /** Label for the choice. */\n  @Prop() label: string;\n\n  /** Show the radio/checkbox control */\n  @Prop() showControl: boolean = false;\n\n  /** Should we show the price? */\n  @Prop() showAmount: boolean = true;\n\n  /** Should we show the price details? */\n  @Prop() showDetails: boolean = true;\n\n  /** Change event. */\n  @Event() scChange: EventEmitter<string>;\n\n  renderPrice(price) {\n    return <sc-format-number type=\"currency\" value={price?.amount} currency={price?.currency}></sc-format-number>;\n  }\n\n  value() {\n    return this.prices.find(price => price.id === this.selectedPriceState()?.id) || this.prices[0];\n  }\n\n  selectedPriceState() {\n    return this.prices.find(price => price.id === this.selectedPrice?.id) || this.selectedOption || this.prices[0];\n  }\n\n  render() {\n    if (!this.prices?.length) {\n      return <Host style={{ display: 'none' }}></Host>;\n    }\n\n    return (\n      <sc-choice-container\n        value={this.selectedPrice?.id}\n        type={'radio'}\n        showControl={this.showControl}\n        checked={this.prices.some(price => price.id === this.selectedPrice?.id)}\n        onScChange={e => {\n          e.stopPropagation();\n          this.scChange.emit(this.value()?.id);\n        }}\n        role=\"button\"\n      >\n        <div class=\"recurring-price-choice\">\n          <div class=\"recurring-price-choice__control\">\n            <div class=\"recurring-price-choice__name\">\n              <slot>{this.label}</slot>\n            </div>\n\n            {this.prices?.length > 1 && (\n              <div class=\"recurring-price-choice__description\">\n                <sc-dropdown style={{ '--panel-width': 'max(100%, 11rem)', '--sc-menu-item-white-space': 'wrap' }}>\n                  <button class=\"recurring-price-choice__button\" slot=\"trigger\" aria-label={__('Press Up/Down Arrow & select the recurring interval you want.', 'surecart')}>\n                    {this.value()?.name ||\n                      (this.value()?.recurring_interval\n                        ? intervalString(this.value(), {\n                            showOnce: true,\n                            abbreviate: false,\n                            labels: {\n                              interval: __('Every', 'surecart'),\n                              period:\n                                /** translators: used as in time period: \"for 3 months\" */\n                                __('for', 'surecart'),\n                            },\n                          })\n                        : this.product.name)}\n                    <sc-icon style={{ minWidth: 'var(--width)' }} name=\"chevron-down\"></sc-icon>\n                  </button>\n                  <sc-menu aria-label={__('Recurring Interval selection Dropdown opened, Press Up/Down Arrow & select the recurring interval you want.', 'surecart')}>\n                    {(this.prices || []).map(price => {\n                      const checked = price?.id === this.selectedPriceState()?.id;\n                      const label =\n                        price?.name ||\n                        (price?.recurring_interval\n                          ? intervalString(price, {\n                              showOnce: true,\n                              abbreviate: false,\n                              labels: {\n                                interval: __('Every', 'surecart'),\n                                period:\n                                  /** translators: used as in time period: \"for 3 months\" */\n                                  __('for', 'surecart'),\n                              },\n                            })\n                          : this.product.name);\n                      return (\n                        <sc-menu-item\n                          onClick={() => {\n                            this.selectedOption = price;\n                            this.scChange.emit(price?.id);\n                          }}\n                          checked={checked}\n                          aria-label={label}\n                        >\n                          {label}\n                          {this.showAmount && <span slot=\"suffix\">{this.renderPrice(price)}</span>}\n                        </sc-menu-item>\n                      );\n                    })}\n                  </sc-menu>\n                </sc-dropdown>\n              </div>\n            )}\n          </div>\n\n          {this.showDetails && (\n            <div class=\"recurring-price-choice__details\">\n              <div class=\"recurring-price-choice__price\">\n                {this.selectedPriceState()?.ad_hoc ? (\n                  __('Custom Amount', 'surecart')\n                ) : (\n                  <Fragment>\n                    <sc-format-number type=\"currency\" value={this.selectedPriceState()?.amount} currency={this.selectedPriceState()?.currency}></sc-format-number>\n                    {intervalString(this.selectedPriceState(), {\n                      showOnce: true,\n                      abbreviate: true,\n                      labels: {\n                        interval: '/',\n                        period:\n                          /** translators: used as in time period: \"for 3 months\" */\n                          __('for', 'surecart'),\n                      },\n                    })}\n                  </Fragment>\n                )}\n              </div>\n\n              {!!this.selectedPriceState()?.trial_duration_days && (\n                <div class=\"recurring-price-choice__trial\">\n                  {sprintf(\n                    _n('Starting in %s day', 'Starting in %s days', this.selectedPriceState().trial_duration_days, 'surecart'),\n                    this.selectedPriceState().trial_duration_days,\n                  )}\n                </div>\n              )}\n\n              {!!this.selectedPriceState()?.setup_fee_enabled && this.selectedPriceState()?.setup_fee_amount && (\n                <div class=\"recurring-price-choice__setup-fee\">\n                  <sc-format-number type=\"currency\" value={Math.abs(this.selectedPriceState().setup_fee_amount)} currency={this.selectedPriceState()?.currency}></sc-format-number>{' '}\n                  {this.selectedPriceState()?.setup_fee_name || (this.selectedPriceState()?.setup_fee_amount < 0 ? __('Discount', 'surecart') : __('Setup Fee', 'surecart'))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </sc-choice-container>\n    );\n  }\n}\n"]}