{"version":3,"file":"sc-tab-group.js","sourceRoot":"","sources":["../../../../src/components/ui/tab-group/sc-tab-group.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Element, State, Event, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'sc-tab-group',\n  styleUrl: 'sc-tab-group.scss',\n  shadow: true,\n})\nexport class ScTabGroup {\n  @Element() el: HTMLScTabGroupElement;\n  @State() activeTab: HTMLScTabElement;\n\n  private tabs: HTMLScTabElement[] = [];\n  private panels: HTMLScTabPanelElement[] = [];\n\n  @Event() scTabHide: EventEmitter<string>;\n  @Event() scTabShow: EventEmitter<string>;\n\n  private mutationObserver: MutationObserver;\n\n  componentDidLoad() {\n    this.syncTabsAndPanels();\n    this.setAriaLabels();\n    this.setActiveTab(this.getActiveTab() || this.tabs[0], { emitEvents: false });\n\n    this.mutationObserver = new MutationObserver(() => {\n      this.syncTabsAndPanels();\n    });\n    this.mutationObserver.observe(this.el, { attributes: true, childList: true, subtree: true });\n  }\n\n  disconnectedCallback() {\n    this.mutationObserver.disconnect();\n  }\n\n  syncTabsAndPanels() {\n    this.tabs = this.getAllTabs();\n    this.panels = this.getAllPanels();\n  }\n\n  setAriaLabels() {\n    // Link each tab with its corresponding panel\n    this.tabs.map(tab => {\n      const panel = this.panels.find(el => el.name === tab.panel) as HTMLScTabPanelElement;\n      if (panel) {\n        tab.setAttribute('aria-controls', panel.getAttribute('id') as string);\n        panel.setAttribute('aria-labelledby', tab.getAttribute('id') as string);\n      }\n    });\n  }\n\n  handleClick(event: MouseEvent) {\n    const target = event.target as HTMLElement;\n    const tab = target.closest('sc-tab') as HTMLScTabElement;\n    const tabGroup = tab?.closest('sc-tab-group') as HTMLScTabGroupElement;\n\n    // Ensure the target tab is in this tab group\n    if (tabGroup !== this.el) {\n      return;\n    }\n\n    if (tab) {\n      this.setActiveTab(tab, { scrollBehavior: 'smooth' });\n    }\n  }\n\n  handleKeyDown(event: KeyboardEvent) {\n    const target = event.target as HTMLElement;\n    const tab = target.closest('sc-tab') as HTMLScTabElement;\n    const tabGroup = tab?.closest('sc-tab-group');\n\n    // Ensure the target tab is in this tab group\n    if (tabGroup !== this.el) {\n      return true;\n    }\n\n    // Activate a tab\n    if (['Enter', ' '].includes(event.key)) {\n      if (tab) {\n        this.setActiveTab(tab, { scrollBehavior: 'smooth' });\n      }\n    }\n\n    // Move focus left or right\n    if (['ArrowUp', 'ArrowDown', 'Home', 'End'].includes(event.key)) {\n      const activeEl = document.activeElement as HTMLScTabElement;\n\n      if (activeEl && activeEl.tagName.toLowerCase() === 'sc-tab') {\n        let index = this.tabs.indexOf(activeEl);\n\n        if (event.key === 'Home') {\n          index = 0;\n        } else if (event.key === 'End') {\n          index = this.tabs.length - 1;\n        } else if (event.key === 'ArrowUp') {\n          index = Math.max(0, index - 1);\n        } else if (event.key === 'ArrowDown') {\n          index = Math.min(this.tabs.length - 1, index + 1);\n        }\n\n        this.tabs[index].triggerFocus({ preventScroll: true });\n\n        event.preventDefault();\n      }\n    }\n  }\n\n  /** Handle the active tabl selection */\n  setActiveTab(tab: HTMLScTabElement, options?: { emitEvents?: boolean; scrollBehavior?: 'auto' | 'smooth' }) {\n    options = Object.assign(\n      {\n        emitEvents: true,\n        scrollBehavior: 'auto',\n      },\n      options,\n    );\n\n    if (tab && tab !== this.activeTab && !tab.disabled) {\n      const previousTab = this.activeTab;\n      this.activeTab = tab;\n\n      this.tabs.map(el => (el.active = el === this.activeTab));\n      this.panels.map(el => (el.active = el.name === this.activeTab.panel));\n\n      // Emit events\n      if (options.emitEvents) {\n        if (previousTab) {\n          this.scTabHide.emit(previousTab.panel);\n        }\n        this.scTabShow.emit(this.activeTab.panel);\n      }\n    }\n  }\n\n  getActiveTab() {\n    const tabs = this.getAllTabs();\n    return tabs.find(el => el.active);\n  }\n\n  getAllChildren() {\n    const slots = this.el.shadowRoot.querySelectorAll('slot') as NodeListOf<HTMLSlotElement>;\n    const tags = ['sc-tab', 'sc-tab-panel'];\n    const allSlots = Array.from(slots)\n      .map(slot => slot?.assignedElements?.({ flatten: true }))\n      .flat();\n    return allSlots\n      .reduce((all: HTMLElement[], el: HTMLElement) => all.concat(el, [...(el?.querySelectorAll?.('*') || [])] as HTMLElement[]), [])\n      .filter((el: HTMLElement) => tags.includes(el?.tagName?.toLowerCase?.())) as HTMLElement[];\n  }\n\n  /** Get all child tabs */\n  getAllTabs(includeDisabled = false) {\n    return this.getAllChildren().filter((el: any) => {\n      return includeDisabled ? el.tagName.toLowerCase() === 'sc-tab' : el.tagName.toLowerCase() === 'sc-tab' && !el.disabled;\n    }) as HTMLScTabElement[];\n  }\n\n  /** Get all child panels */\n  getAllPanels() {\n    return this.getAllChildren().filter((el: any) => el.tagName.toLowerCase() === 'sc-tab-panel') as [HTMLScTabPanelElement];\n  }\n\n  render() {\n    return (\n      <div\n        part=\"base\"\n        class={{\n          'tab-group': true,\n        }}\n        onClick={e => this.handleClick(e)}\n        onKeyDown={e => this.handleKeyDown(e)}\n      >\n        <div class=\"tab-group__nav-container\" part=\"nav\">\n          <div class=\"tab-group__nav\">\n            <div part=\"tabs\" class=\"tab-group__tabs\" role=\"tablist\">\n              <slot onSlotchange={() => this.syncTabsAndPanels()} name=\"nav\"></slot>\n            </div>\n          </div>\n        </div>\n        <div part=\"body\" class=\"tab-group__body\">\n          <slot onSlotchange={() => this.syncTabsAndPanels()} />\n        </div>\n      </div>\n    );\n  }\n}\n"]}