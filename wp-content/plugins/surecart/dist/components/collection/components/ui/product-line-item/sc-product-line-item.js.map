{"version":3,"file":"sc-product-line-item.js","sourceRoot":"","sources":["../../../../src/components/ui/product-line-item/sc-product-line-item.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop, Event, EventEmitter, Element, Fragment } from '@stencil/core';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { isRtl } from '../../../functions/page-align';\nimport { Fee } from '../../../types';\nimport { sizeImage } from '../../../functions/media';\n\n/**\n * @part base - The component base\n * @part product-line-item - The product line item\n * @part image - The product image\n * @part text - The product text\n * @part title - The product title\n * @part suffix - The product suffix\n * @part price - The product price\n * @part price__amount - The product price amount\n * @part price__description - The product price description\n * @part price__scratch - The product price scratch\n * @part static-quantity - The product static quantity\n * @part remove-icon__base - The product remove icon\n * @part quantity - The product quantity\n * @part quantity__minus - The product quantity minus\n * @part quantity__minus-icon - The product quantity minus icon\n * @part quantity__plus - The product quantity plus\n * @part quantity__plus-icon - The product quantity plus icon\n * @part quantity__input - The product quantity input\n * @part line-item__price-description - The line item price description\n */\n@Component({\n  tag: 'sc-product-line-item',\n  styleUrl: 'sc-product-line-item.scss',\n  shadow: true,\n})\nexport class ScProductLineItem {\n  @Element() el: HTMLScProductLineItemElement;\n\n  /** Url for the product image */\n  @Prop() imageUrl: string;\n\n  /** Title for the product image */\n  @Prop() imageTitle: string;\n\n  /** Alternative description for the product image */\n  @Prop() imageAlt: string;\n\n  /** Product name */\n  @Prop() name: string;\n\n  /** Price name */\n  @Prop() priceName?: string;\n\n  /** Product variant label */\n  @Prop() variantLabel: string = '';\n\n  /** Quantity */\n  @Prop() quantity: number;\n\n  /** Product monetary amount */\n  @Prop() amount: number;\n\n  /** Product line item fees. */\n  @Prop() fees: Fee[];\n\n  /** Is the setup fee not included in the free trial? */\n  @Prop() setupFeeTrialEnabled: boolean = true;\n\n  /** The line item scratch amount */\n  @Prop() scratchAmount: number;\n\n  /** Currency for the product */\n  @Prop() currency: string;\n\n  /** Recurring interval (i.e. monthly, once, etc.) */\n  @Prop() interval: string;\n\n  /** Trial duration days */\n  @Prop() trialDurationDays: number;\n\n  /** Is the line item removable */\n  @Prop() removable: boolean;\n\n  /** Can we select the quantity */\n  @Prop() editable: boolean = true;\n\n  /** The max allowed. */\n  @Prop() max: number = 100;\n\n  /** The SKU. */\n  @Prop() sku: string = '';\n\n  /** The purchasable status display */\n  @Prop() purchasableStatusDisplay: string;\n\n  /** Emitted when the quantity changes. */\n  @Event({ bubbles: false }) scUpdateQuantity: EventEmitter<number>;\n\n  /** Emitted when the quantity changes. */\n  @Event({ bubbles: false }) scRemove: EventEmitter<void>;\n\n  renderPriceAndInterval() {\n    const setupFee = (this.fees || []).find(fee => fee.fee_type === 'setup');\n    if (this.trialDurationDays) {\n      return (\n        <div class=\"item__price\" part=\"price\">\n          <div class=\"price\" part=\"price__amount\">\n            {!!setupFee && !this.setupFeeTrialEnabled ? (\n              <Fragment>\n                {setupFee?.description} <sc-format-number part=\"price__amount\" type=\"currency\" currency={this.currency} value={setupFee.amount}></sc-format-number>\n              </Fragment>\n            ) : (\n              sprintf(_n('%d day free', '%d days free', this.trialDurationDays, 'surecart'), this.trialDurationDays)\n            )}\n          </div>\n          <div class=\"price__description\" part=\"price__description\">\n            {\n              /** translators: 30 days free, Then $99 per month. */\n              __('Then', 'surecart')\n            }{' '}\n            {!!this.scratchAmount && this.scratchAmount > this.amount && (\n              <Fragment>\n                <sc-format-number class=\"item__scratch-price\" part=\"price__scratch\" type=\"currency\" currency={this.currency} value={this.scratchAmount}></sc-format-number>{' '}\n              </Fragment>\n            )}\n            <sc-format-number part=\"price__amount\" type=\"currency\" currency={this.currency} value={this.amount}></sc-format-number> {!!this.interval && this.interval}\n            {!!setupFee && !this.setupFeeTrialEnabled && sprintf(_n('starting in %d day', 'starting in %d days', this.trialDurationDays, 'surecart'), this.trialDurationDays)}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div class=\"item__price\" part=\"price\">\n        <div class=\"price\" part=\"price__amount\">\n          {!!this.scratchAmount && this.scratchAmount !== this.amount && (\n            <Fragment>\n              <sc-format-number class=\"item__scratch-price\" type=\"currency\" currency={this.currency} value={this.scratchAmount}></sc-format-number>{' '}\n            </Fragment>\n          )}\n          <sc-format-number type=\"currency\" currency={this.currency} value={this.amount}></sc-format-number>\n        </div>\n        {!!this.interval && (\n          <div class=\"price__description\" part=\"price__description\">\n            {this.interval}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  renderPurchasableStatus() {\n    if (!this.purchasableStatusDisplay) return null;\n\n    return (\n      <div class=\"item__price\" part=\"price\">\n        <div class=\"product-line-item__purchasable-status\" part=\"price__amount\">\n          {this.purchasableStatusDisplay}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div class=\"base\" part=\"base\">\n        <div\n          part=\"product-line-item\"\n          class={{\n            'item': true,\n            'item--has-image': !!this.imageUrl,\n            'item--is-rtl': isRtl(),\n            'product-line-item__editable': this.editable,\n            'product-line-item__removable': this.removable,\n          }}\n        >\n          {!!this.imageUrl && (\n            <img part=\"image\" src={sizeImage(this.imageUrl, 130)} class=\"item__image\" alt={this.imageAlt} {...(this.imageTitle ? { title: this.imageTitle } : {})} />\n          )}\n          <div class=\"item__text\" part=\"text\">\n            <div class=\"item__text-details\">\n              <div class=\"item__title\" part=\"title\">\n                <slot name=\"title\">{this.name}</slot>\n              </div>\n              <div class=\"item__description item__price-variant\" part=\"description\">\n                <div>{this.variantLabel}</div>\n                <div>{this.priceName}</div>\n                {!!this.sku && (\n                  <div>\n                    {__('SKU:', 'surecart')} {this.sku}\n                  </div>\n                )}\n              </div>\n              {!this.editable && this.quantity > 1 && (\n                <span class=\"item__description\" part=\"static-quantity\">\n                  {__('Qty:', 'surecart')} {this.quantity}\n                </span>\n              )}\n            </div>\n\n            {this.editable && (\n              <sc-quantity-select\n                max={this.max || Infinity}\n                exportparts=\"base:quantity, minus:quantity__minus, minus-icon:quantity__minus-icon, plus:quantity__plus, plus-icon:quantity__plus-icon, input:quantity__input\"\n                clickEl={this.el}\n                quantity={this.quantity}\n                size=\"small\"\n                onScChange={e => e.detail && this.scUpdateQuantity.emit(e.detail)}\n                aria-label={sprintf(__('Change Quantity - %s %s', 'surecart'), this.name, this.priceName)}\n              ></sc-quantity-select>\n            )}\n          </div>\n          <div class=\"item__suffix\" part=\"suffix\">\n            {this.removable ? (\n              <sc-icon\n                exportparts=\"base:remove-icon__base\"\n                class=\"item__remove\"\n                name=\"x\"\n                onClick={() => this.scRemove.emit()}\n                onKeyDown={e => {\n                  if (e.key === 'Enter') {\n                    this.scRemove.emit();\n                  }\n                }}\n                tabindex=\"0\"\n                aria-label={sprintf(__('Remove Item - %s %s', 'surecart'), this.name, this.priceName)}\n              ></sc-icon>\n            ) : (\n              <div></div>\n            )}\n            {this.renderPriceAndInterval()}\n            {this.renderPurchasableStatus()}\n          </div>\n        </div>\n        {(this.fees || []).map(fee => {\n          if (this.trialDurationDays && !this.setupFeeTrialEnabled && fee.fee_type === 'setup') return null;\n          return (\n            <sc-line-item exportparts=\"price-description:line-item__price-description\">\n              <sc-format-number slot=\"price-description\" type=\"currency\" value={fee?.amount} currency={this.currency || 'usd'} />\n              <span slot=\"price-description\" class=\"fee__description\">\n                {fee?.description}\n              </span>\n            </sc-line-item>\n          );\n        })}\n      </div>\n    );\n  }\n}\n"]}