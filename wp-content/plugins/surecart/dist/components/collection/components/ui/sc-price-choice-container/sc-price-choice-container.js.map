{"version":3,"file":"sc-price-choice-container.js","sourceRoot":"","sources":["../../../../src/components/ui/sc-price-choice-container/sc-price-choice-container.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, Fragment, h, Prop, State, Watch } from '@stencil/core';\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { Price } from 'src/types';\n\nimport { intervalString } from '../../../functions/price';\n\n@Component({\n  tag: 'sc-price-choice-container',\n  styleUrl: 'sc-price-choice-container.scss',\n  shadow: false,\n})\nexport class ScPriceChoiceContainer {\n  /** Stores the price */\n  @Prop() price: string | Price;\n\n  /** Is this loading */\n  @Prop() loading: boolean = false;\n\n  /** Label for the choice. */\n  @Prop() label: string;\n\n  /** Show the label */\n  @Prop() showLabel: boolean = true;\n\n  /** Show the price amount */\n  @Prop() showPrice: boolean = true;\n\n  /** Show the radio/checkbox control */\n  @Prop() showControl: boolean = false;\n\n  /** Label for the choice. */\n  @Prop() description: string;\n\n  /** Choice Type */\n  @Prop() type: 'checkbox' | 'radio';\n\n  @Prop() required: boolean = false;\n\n  /** Is this checked by default */\n  @Prop({ reflect: true, mutable: true }) checked: boolean = false;\n\n  @State() priceData: Price;\n\n  @Event() scChange: EventEmitter<void>;\n\n  @Watch('price')\n  handlePriceChange() {\n    this.priceData = typeof this.price === 'string' ? JSON.parse(this.price) : this.price;\n  }\n  componentWillLoad() {\n    this.handlePriceChange();\n  }\n\n  renderPrice() {\n    return (\n      <Fragment>\n        <sc-format-number type=\"currency\" value={this.priceData?.amount} currency={this.priceData?.currency}></sc-format-number>\n        {intervalString(this.priceData, {\n          showOnce: true,\n          abbreviate: true,\n          labels: {\n            interval: '/',\n            period:\n              /** translators: used as in time period: \"for 3 months\" */\n              __('for', 'surecart'),\n          },\n        })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    if (this.loading) {\n      return (\n        <sc-choice-container showControl={this.showControl} name=\"loading\" disabled>\n          <div class=\"price-choice\">\n            <sc-skeleton style={{ width: '60px', display: 'inline-block' }}></sc-skeleton>\n            <sc-skeleton style={{ width: '80px', display: 'inline-block' }}></sc-skeleton>\n          </div>\n        </sc-choice-container>\n      );\n    }\n\n    return (\n      <sc-choice-container\n        value={this.priceData?.id}\n        type={this.type}\n        showControl={this.showControl}\n        checked={this.checked}\n        onScChange={() => this.scChange.emit()}\n        required={this.required}\n      >\n        <div class=\"price-choice\">\n          {this.showLabel && (\n            <div class=\"price-choice__title\">\n              <div class=\"price-choice__name\">{this.label || this.priceData.name}</div>\n              {!!this.description && <div class=\"price-choice__description\">{this.description}</div>}\n            </div>\n          )}\n\n          {this.showPrice && (\n            <div class=\"price-choice__details\">\n              <div class=\"price-choice__price\">\n                {this.priceData?.ad_hoc ? (\n                  __('Custom Amount', 'surecart')\n                ) : (\n                  <Fragment>\n                    <sc-format-number type=\"currency\" value={this.priceData?.amount} currency={this.priceData?.currency}></sc-format-number>\n                    {this.priceData?.recurring_period_count && 1 <= this.priceData?.recurring_period_count && (\n                      <sc-visually-hidden>\n                        {' '}\n                        {__('This is a repeating price. Payment will happen', 'surecart')}{' '}\n                        {intervalString(this.priceData, {\n                          showOnce: true,\n                          abbreviate: false,\n                          labels: {\n                            interval: __('every', 'surecart'),\n                            period:\n                              /** translators: used as in time period: \"for 3 months\" */\n                              __('for', 'surecart'),\n                          },\n                        })}\n                      </sc-visually-hidden>\n                    )}\n                    <span aria-hidden=\"true\">\n                      {intervalString(this.priceData, {\n                        showOnce: true,\n                        abbreviate: true,\n                        labels: {\n                          interval: '/',\n                          period:\n                            /** translators: used as in time period: \"for 3 months\" */\n                            __('for', 'surecart'),\n                        },\n                      })}\n                    </span>\n                  </Fragment>\n                )}\n              </div>\n\n              {!!this.priceData?.trial_duration_days && (\n                <Fragment>\n                  <sc-visually-hidden>\n                    {sprintf(__('You have a %d-day trial before payment becomes necessary.', 'surecart'), this.priceData?.trial_duration_days)}\n                  </sc-visually-hidden>\n                  <div class=\"price-choice__trial\" aria-hidden=\"true\">\n                    {sprintf(_n('Starting in %s day', 'Starting in %s days', this.priceData.trial_duration_days, 'surecart'), this.priceData.trial_duration_days)}\n                  </div>\n                </Fragment>\n              )}\n\n              {!!this.priceData?.setup_fee_enabled && this.priceData?.setup_fee_amount && (\n                <div class=\"price-choice__setup-fee\">\n                  <sc-visually-hidden>{__('This payment plan has', 'surecart')} </sc-visually-hidden>\n                  <sc-format-number type=\"currency\" value={Math.abs(this.priceData.setup_fee_amount)} currency={this.priceData?.currency}></sc-format-number>{' '}\n                  {this.priceData?.setup_fee_name || (this.priceData?.setup_fee_amount < 0 ? __('Discount', 'surecart') : __('Setup Fee', 'surecart'))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </sc-choice-container>\n    );\n  }\n}\n"]}