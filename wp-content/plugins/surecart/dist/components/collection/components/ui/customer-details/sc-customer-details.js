import{h}from"@stencil/core";import{__}from"@wordpress/i18n";import{formatAddress}from"localized-address-format";import{countryChoices}from"../../../functions/address";import{zones}from"../../../functions/tax";export class ScCustomerDetails{constructor(){this.heading=void 0,this.editLink=void 0,this.customer=void 0,this.loading=void 0,this.error=void 0}renderContent(){var e,t,i,s,r,l,o,n;return this.loading?this.renderLoading():this.customer?h("sc-card",{"no-padding":!0},h("sc-stacked-list",null,!!(null===(e=null==this?void 0:this.customer)||void 0===e?void 0:e.name)&&h("sc-stacked-list-row",{style:{"--columns":"3"},mobileSize:480},h("div",null,h("strong",null,__("Billing Name","surecart"))),h("div",null,null===(t=this.customer)||void 0===t?void 0:t.name),h("div",null)),!!(null===(i=null==this?void 0:this.customer)||void 0===i?void 0:i.email)&&h("sc-stacked-list-row",{style:{"--columns":"3"},mobileSize:480},h("div",null,h("strong",null,__("Billing Email","surecart"))),h("div",null,null===(s=this.customer)||void 0===s?void 0:s.email),h("div",null)),!!Object.keys((null===(r=null==this?void 0:this.customer)||void 0===r?void 0:r.shipping_address)||{}).length&&this.renderAddress(__("Shipping Address","surecart"),this.customer.shipping_address),!!Object.keys(null===(l=this.customer)||void 0===l?void 0:l.billing_address_display).length&&this.renderAddress(__("Billing Address","surecart"),this.customer.billing_address_display),!!(null===(o=null==this?void 0:this.customer)||void 0===o?void 0:o.phone)&&h("sc-stacked-list-row",{style:{"--columns":"3"},mobileSize:480},h("div",null,h("strong",null,__("Phone","surecart"))),h("div",null,null===(n=this.customer)||void 0===n?void 0:n.phone),h("div",null)),(()=>{var e,t,i,s;const{number_type:r,number:l}=(null===(e=this.customer)||void 0===e?void 0:e.tax_identifier)||{};if(!l||!r)return;const o=(null===(t=null==zones?void 0:zones[r])||void 0===t?void 0:t.label)||__("Tax Id","surecart"),n=!1===(null===(s=null===(i=this.customer)||void 0===i?void 0:i.tax_identifier)||void 0===s?void 0:s[`valid_${r}`]);return h("sc-stacked-list-row",{style:{"--columns":"3"},mobileSize:480},h("div",null,h("strong",null,o)),h("div",null,l," ",n&&h("sc-tag",{type:"warning"},__("Invalid","surecart"))),h("div",null))})())):this.renderEmpty()}renderAddress(e="Address",t){var i;const{name:s,line_1:r,line_2:l,city:o,state:n,postal_code:d,country:a}=t,u=null===(i=countryChoices.find((({value:e})=>e===a)))||void 0===i?void 0:i.label;return h("sc-stacked-list-row",{style:{"--columns":"3"},mobileSize:480},h("div",null,h("strong",null,e)),h("div",null,formatAddress({name:s,postalCountry:a,administrativeArea:n,locality:o,postalCode:d,addressLines:[r,l]}).join("\n")+"\n"+u||a),h("div",null))}renderEmpty(){return h("div",null,h("sc-divider",{style:{"--spacing":"0"}}),h("slot",{name:"empty"},h("sc-empty",{icon:"user"},__("You don't have any billing information.","surecart"))))}renderLoading(){return h("sc-card",{"no-padding":!0},h("sc-stacked-list",null,h("sc-stacked-list-row",{style:{"--columns":"2"},"mobile-size":0},h("div",{style:{padding:"0.5em"}},h("sc-skeleton",{style:{width:"30%",marginBottom:"0.75em"}}),h("sc-skeleton",{style:{width:"20%",marginBottom:"0.75em"}}),h("sc-skeleton",{style:{width:"40%"}})))))}render(){var e,t,i;return h("sc-dashboard-module",{exportparts:"base, heading, heading-text, heading-title, heading-description",class:"customer-details",error:this.error},h("span",{slot:"heading"},this.heading||__("Billing Details","surecart")," ",!!(null===(e=null==this?void 0:this.customer)||void 0===e?void 0:e.id)&&!(null===(t=null==this?void 0:this.customer)||void 0===t?void 0:t.live_mode)&&h("sc-tag",{exportparts:"base:test-tag__base, content:test-tag__content",type:"warning",size:"small"},__("Test","surecart"))),!!this.editLink&&!!(null===(i=this.customer)||void 0===i?void 0:i.id)&&h("sc-button",{exportparts:"base:button__base, label:button__label, prefix:button__prefix",type:"link",href:this.editLink,slot:"end"},h("sc-icon",{name:"edit-3",slot:"prefix"}),__("Update","surecart")),this.renderContent())}static get is(){return"sc-customer-details"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-customer-details.css"]}}static get styleUrls(){return{$:["sc-customer-details.css"]}}static get properties(){return{heading:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"heading",reflect:!1},editLink:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"edit-link",reflect:!1},customer:{type:"unknown",mutable:!1,complexType:{original:"Customer",resolved:"Customer",references:{Customer:{location:"import",path:"../../../types"}}},required:!1,optional:!1,docs:{tags:[],text:""}},loading:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"loading",reflect:!1},error:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"error",reflect:!1}}}static get elementRef(){return"el"}}