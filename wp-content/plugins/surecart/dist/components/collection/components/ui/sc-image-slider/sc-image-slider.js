import{h}from"@stencil/core";import{__,sprintf}from"@wordpress/i18n";import Swiper,{Navigation}from"swiper";export class ScImageSlider{constructor(){this.images=void 0,this.thumbnails=[],this.hasThumbnails=void 0,this.thumbnailsPerPage=5,this.autoHeight=void 0,this.currentSliderIndex=0,this.imagesData=[],this.thumbnailsData=[]}handleThumbPaginate(){this.thumbsSwiper&&(this.currentSliderIndex>=this.thumbsSwiper.activeIndex&&this.currentSliderIndex<this.thumbsSwiper.activeIndex+this.thumbnailsPerPage||this.thumbsSwiper.slideTo(this.currentSliderIndex))}parseImages(e){e&&(this.imagesData="string"==typeof e?JSON.parse(e):e)}parseThumnails(e){e&&(this.thumbnailsData="string"==typeof e?JSON.parse(e):e)}componentWillLoad(){this.parseImages(this.images),this.parseThumnails(this.thumbnails)}componentDidUpdate(){this.swiper.update()}componentDidLoad(){this.swiperContainerRef&&(this.swiper=new Swiper(this.swiperContainerRef,{direction:"horizontal",loop:!1,autoHeight:this.autoHeight,centeredSlides:!0,on:{slideChange:e=>{this.currentSliderIndex=e.activeIndex}}})),this.swiperThumbsRef&&(this.thumbsSwiper=new Swiper(this.swiperThumbsRef,{modules:[Navigation],direction:"horizontal",loop:!1,slidesPerView:this.thumbnailsPerPage,slidesPerGroup:this.thumbnailsPerPage,spaceBetween:10,centerInsufficientSlides:!0,slideToClickedSlide:!0,navigation:{nextEl:this.next,prevEl:this.previous}}))}disconnectedCallback(){this.swiper.destroy(!0,!0),this.thumbsSwiper&&this.thumbsSwiper.destroy(!0,!0)}render(){var e,i,t;const s=(null===(e=this.thumbnailsData)||void 0===e?void 0:e.length)?this.thumbnailsData:this.imagesData;return h("div",{class:{"image-slider":!0,"image-slider--is-fixed-height":!this.autoHeight},part:"base"},h("div",{class:"swiper",ref:e=>this.swiperContainerRef=e},h("div",{class:"swiper-wrapper"},(this.imagesData||[]).map((({src:e,alt:i,srcset:t,width:s,height:r,sizes:a,title:n},l)=>h("div",{key:l,class:"swiper-slide image-slider__slider"},h("div",{class:"swiper-slide-img"},h("img",{src:e,alt:i,srcset:t,width:s,height:r,sizes:a,loading:l>0?"lazy":"eager",...n?{title:n}:{}}))))))),this.hasThumbnails&&h("div",{class:{"image-slider__thumbs":!0,"image-slider__thumbs--has-navigation":this.images.length>5}},h("button",{disabled:null===(i=this.thumbsSwiper)||void 0===i?void 0:i.isBeginning,class:"image-slider__navigation image-slider--is-prev",ref:e=>this.previous=e},h("sc-visually-hidden",null,__("Go to previous product slide.","surecart")),h("sc-icon",{name:"chevron-left","aria-hidden":"true","tab-index":"0"})),h("div",{class:"swiper",ref:e=>this.swiperThumbsRef=e},h("div",{class:"swiper-wrapper",role:"radiogroup","aria-label":sprintf(__("Products slide options section. There are %d options present.","surecart"),(null==s?void 0:s.length)||0)},(s||[]).map((({src:e,alt:i,srcset:t,width:s,height:r,sizes:a,title:n},l)=>h("button",{class:{"swiper-slide":!0,"image-slider__thumb":!0,"image-slider__thumb--is-active":this.currentSliderIndex===l},onClick:()=>{var e,i;return null===(i=null===(e=this.swiper)||void 0===e?void 0:e.slideTo)||void 0===i?void 0:i.call(e,l)},role:"radio","aria-checked":this.currentSliderIndex===l?"true":"false",tabindex:"0"},h("img",{src:e,alt:sprintf(__("Product image number %d, %s","sc-image-slider"),l+1,i),...n?{title:n}:{},srcset:t,width:s,height:r,sizes:a,loading:l>this.thumbnailsPerPage-1?"lazy":"eager"})))))),h("button",{disabled:null===(t=this.thumbsSwiper)||void 0===t?void 0:t.isEnd,class:"image-slider__navigation image-slider--is-next",ref:e=>this.next=e},h("sc-visually-hidden",null,__("Go to next product slide.","surecart")),h("sc-icon",{name:"chevron-right","aria-hidden":"true","tab-index":"0"}))))}static get is(){return"sc-image-slider"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-image-slider.scss"]}}static get styleUrls(){return{$:["sc-image-slider.css"]}}static get properties(){return{images:{type:"string",mutable:!1,complexType:{original:"string | { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[]",resolved:"string | { src: string; alt: string; srcset: any; width: number; height: number; sizes: string; title: string; }[]",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Accept a string or an array of objects"},attribute:"images",reflect:!1},thumbnails:{type:"string",mutable:!1,complexType:{original:"string | { src: string; alt: string; srcset; width: number; height: number; sizes: string; title: string }[]",resolved:"string | { src: string; alt: string; srcset: any; width: number; height: number; sizes: string; title: string; }[]",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"thumbnails",reflect:!1,defaultValue:"[]"},hasThumbnails:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"has-thumbnails",reflect:!1},thumbnailsPerPage:{type:"number",mutable:!1,complexType:{original:"number",resolved:"number",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"thumbnails-per-page",reflect:!1,defaultValue:"5"},autoHeight:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"auto-height",reflect:!1}}}static get states(){return{currentSliderIndex:{},imagesData:{},thumbnailsData:{}}}static get watchers(){return[{propName:"currentSliderIndex",methodName:"handleThumbPaginate"},{propName:"images",methodName:"parseImages"},{propName:"thumbnails",methodName:"parseThumnails"}]}}