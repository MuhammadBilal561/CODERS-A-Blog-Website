{"version":3,"file":"sc-product-donation-choices.js","sourceRoot":"","sources":["../../../../../src/components/controllers/checkout-form/product-donation-choices/sc-product-donation-choices.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AAClE,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AACrC,OAAO,EAAE,KAAK,IAAI,aAAa,EAAE,MAAM,yBAAyB,CAAC;AAOjE,MAAM,OAAO,uBAAuB;;;;;;EAWlC,KAAK;IACH,OAAO,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;EACvC,CAAC;EAED,WAAW,CAAC,IAAI;IACd,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG;MAC9B,GAAG,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC;MAChC,GAAG,IAAI;KACR,CAAC;EACJ,CAAC;EAED,MAAM;;IACJ,MAAM,MAAM,GAAG,CAAC,CAAA,MAAA,MAAA,MAAA,IAAI,CAAC,KAAK,EAAE,0CAAE,OAAO,0CAAE,MAAM,0CAAE,IAAI,KAAI,EAAE,CAAC;OACvD,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,kBAAkB,MAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,MAAM,CAAA,CAAC,CAAC,CAAC,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,kBAAkB,CAAA,KAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,MAAM,CAAA,CAAC,CAAC;OAC5H,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,QAAQ,CAAA,CAAC,CAAC;IAErC,wDAAwD;IACxD,IAAI,CAAC,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,CAAA,EAAE;MACnB,OAAO,EAAC,IAAI,IAAC,KAAK,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,GAAS,CAAC;KAClD;IAED,iCAAiC;IACjC,OAAO,CACL,2CACE,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,QAAQ,KAAG,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,QAAQ,CAAA,CAAC,EACxD,OAAO,EAAE,MAAA,IAAI,CAAC,KAAK,EAAE,0CAAE,OAAO,EAC9B,aAAa,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,aAAa,EACzC,WAAW,EAAE,KAAK,EAClB,UAAU,EAAE,KAAK,EACjB,UAAU,EAAE,CAAC,CAAC,EAAE;;QACd,MAAM,aAAa,GAAG,CAAC,CAAA,MAAA,MAAA,IAAI,CAAC,KAAK,EAAE,CAAC,OAAO,0CAAE,MAAM,0CAAE,IAAI,KAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;QAClG,IAAI,CAAC,WAAW,CAAC,EAAE,aAAa,EAAE,CAAC,CAAC;MACtC,CAAC,gBAEC,IAAI,CAAC,SAAS;QACZ,CAAC,CAAC,EAAE,CAAC,qHAAqH,EAAE,UAAU,CAAC;QACvI,CAAC,CAAC,EAAE,CAAC,2DAA2D,EAAE,UAAU,CAAC,EAEjF,KAAK,EAAE,EAAE,yCAAyC,EAAE,MAAM,EAAE,wCAAwC,EAAE,MAAM,EAAE;MAE9G,gBAAO,IAAI,CAAC,KAAK,CAAQ,CACW,CACvC,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, h, Prop, Element, Host } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { state as donationState } from '@store/product-donation';\n\n@Component({\n  tag: 'sc-product-donation-choices',\n  styleUrl: 'sc-product-donation-choices.scss',\n  shadow: true,\n})\nexport class ScProductDonationChoice {\n  @Element() el: HTMLScProductDonationChoicesElement;\n\n  /** The product id for the fields. */\n  @Prop({ reflect: true }) productId: string;\n\n  /** The label for the field. */\n  @Prop() label: string;\n\n  @Prop() recurring: boolean;\n\n  state() {\n    return donationState[this.productId];\n  }\n\n  updateState(data) {\n    donationState[this.productId] = {\n      ...donationState[this.productId],\n      ...data,\n    };\n  }\n\n  render() {\n    const prices = (this.state()?.product?.prices?.data || [])\n      .filter(price => (this.recurring ? price?.recurring_interval && price?.ad_hoc : !price?.recurring_interval && price?.ad_hoc))\n      .filter(price => !price?.archived);\n\n    // no prices, or less than 2 prices, we have no choices.\n    if (!prices?.length) {\n      return <Host style={{ display: 'none' }}></Host>;\n    }\n\n    // return price choice container.\n    return (\n      <sc-recurring-price-choice-container\n        prices={prices.sort((a, b) => a?.position - b?.position)}\n        product={this.state()?.product}\n        selectedPrice={this.state().selectedPrice}\n        showDetails={false}\n        showAmount={false}\n        onScChange={e => {\n          const selectedPrice = (this.state().product?.prices?.data || []).find(({ id }) => id == e.detail);\n          this.updateState({ selectedPrice });\n        }}\n        aria-label={\n          this.recurring\n            ? __('If you want to make your donation recurring then Press Tab once & select the recurring interval from the dropdown. ', 'surecart')\n            : __('If you want to make your donation once then Press Enter. ', 'surecart')\n        }\n        style={{ '--sc-recurring-price-choice-white-space': 'wrap', '--sc-recurring-price-choice-text-align': 'left' }}\n      >\n        <slot>{this.label}</slot>\n      </sc-recurring-price-choice-container>\n    );\n  }\n}\n"]}