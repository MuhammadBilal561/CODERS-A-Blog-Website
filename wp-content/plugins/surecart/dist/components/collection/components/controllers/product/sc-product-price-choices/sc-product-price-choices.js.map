{"version":3,"file":"sc-product-price-choices.js","sourceRoot":"","sources":["../../../../../src/components/controllers/product/sc-product-price-choices/sc-product-price-choices.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AACnE,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AACrC,OAAO,EAAE,cAAc,EAAE,MAAM,6BAA6B,CAAC;AAC7D,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AACvC,OAAO,EAAE,eAAe,EAAE,MAAM,wBAAwB,CAAC;AACzD,OAAO,EAAE,UAAU,EAAE,MAAM,wBAAwB,CAAC;AAOpD,MAAM,OAAO,qBAAqB;;;;;;EAUhC,WAAW,CAAC,KAAK;IACf,OAAO,CACL,EAAC,QAAQ;MACP,wBAAkB,IAAI,EAAC,UAAU,EAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC,QAAQ,GAAqB;MACpG,YAAM,IAAI,EAAC,KAAK,IACb,cAAc,CAAC,KAAK,EAAE;QACrB,MAAM,EAAE;UACN,QAAQ,EAAE,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;UACjC,MAAM,EAAE,EAAE,CAAC,KAAK,EAAE,UAAU,CAAC;UAC7B,IAAI,EAAE,EAAE,CAAC,MAAM,EAAE,UAAU,CAAC;SAC7B;QACD,QAAQ,EAAE,IAAI;OACf,CAAC,CACG,CACE,CACZ,CAAC;EACJ,CAAC;EAED,MAAM;IACJ,MAAM,MAAM,GAAG,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAC/C,IAAI,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,IAAG,CAAC;MAAE,OAAO,EAAC,IAAI,IAAC,KAAK,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,GAAS,CAAC;IAEzE,OAAO,CACL,kBAAY,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,QAAC,KAAK,EAAE,EAAE,+BAA+B,EAAE,GAAG,EAAE,IACpF,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;;MAAC,OAAA,CAC3B,iCACE,KAAK,EAAE,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,IAAI,MAAI,MAAA,MAAA,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,0CAAE,OAAO,0CAAE,IAAI,CAAA,EAC1D,SAAS,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAC3B,KAAK,EAAE,KAAK,EACZ,OAAO,EAAE,CAAA,MAAA,MAAA,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,0CAAE,aAAa,0CAAE,EAAE,OAAK,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,EAAE,CAAA,EAC/D,UAAU,EAAE,CAAC,CAAC,EAAE;UACd,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE;YACpB,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC,CAAC;WACtD;QACH,CAAC,GACD,CACH,CAAA;KAAA,CAAC,CACS,CACd,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, h, Prop, Fragment, Host } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { intervalString } from '../../../../functions/price';\nimport { state } from '@store/product';\nimport { availablePrices } from '@store/product/getters';\nimport { setProduct } from '@store/product/setters';\n\n@Component({\n  tag: 'sc-product-price-choices',\n  styleUrl: 'sc-product-price-choices.css',\n  shadow: true,\n})\nexport class ScProductPriceChoices {\n  /** The product price choice label */\n  @Prop() label: string;\n\n  /** Whether to show the price */\n  @Prop() showPrice: boolean;\n\n  /** The product id */\n  @Prop() productId: string;\n\n  renderPrice(price) {\n    return (\n      <Fragment>\n        <sc-format-number type=\"currency\" value={price.amount} currency={price.currency}></sc-format-number>\n        <span slot=\"per\">\n          {intervalString(price, {\n            labels: {\n              interval: __('Every', 'surecart'),\n              period: __('for', 'surecart'),\n              once: __('Once', 'surecart'),\n            },\n            showOnce: true,\n          })}\n        </span>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const prices = availablePrices(this.productId);\n    if (prices?.length < 2) return <Host style={{ display: 'none' }}></Host>;\n\n    return (\n      <sc-choices label={this.label} required style={{ '--sc-input-required-indicator': ' ' }}>\n        {(prices || []).map(price => (\n          <sc-price-choice-container\n            label={price?.name || state[this.productId]?.product?.name}\n            showPrice={!!this.showPrice}\n            price={price}\n            checked={state[this.productId]?.selectedPrice?.id === price?.id}\n            onScChange={e => {\n              if (e.target.checked) {\n                setProduct(this.productId, { selectedPrice: price });\n              }\n            }}\n          />\n        ))}\n      </sc-choices>\n    );\n  }\n}\n"]}