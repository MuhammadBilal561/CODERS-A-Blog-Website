{"version":3,"file":"sc-subscription-switch.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/subscription-switch/sc-subscription-switch.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Fragment, h, Prop, State, Watch } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport apiFetch from '../../../../functions/fetch';\nimport { onFirstVisible } from '../../../../functions/lazy';\nimport { intervalString } from '../../../../functions/price';\nimport { Price, Product, ProductGroup, Subscription } from '../../../../types';\n\n@Component({\n  tag: 'sc-subscription-switch',\n  styleUrl: 'sc-subscription-switch.scss',\n  shadow: true,\n})\nexport class ScSubscriptionSwitch {\n  @Element() el: HTMLScSubscriptionsListElement;\n  /** Customer id to fetch subscriptions */\n  @Prop() query: object;\n  @Prop() heading: string;\n  @Prop() productGroupId: ProductGroup;\n  @Prop() productId: string;\n  @Prop() subscription: Subscription;\n  @Prop() filterAbove: number = 4;\n  @Prop() successUrl: string = window.location.href;\n\n  /** The currently selected price. */\n  @State() selectedPrice: Price;\n\n  /** Holds the products */\n  @State() products: Array<Product> = [];\n\n  /** Holds the prices */\n  @State() prices: Array<Price>;\n\n  /** Filter state */\n  @State() filter: 'month' | 'week' | 'year' | 'never' | 'split' = 'month';\n\n  @State() hasFilters: {\n    split: boolean;\n    month: boolean;\n    week: boolean;\n    year: boolean;\n    never: boolean;\n  };\n\n  @State() showFilters: boolean;\n\n  /** Loading state */\n  @State() loading: boolean;\n\n  /** Busy state */\n  @State() busy: boolean;\n\n  /** Error message */\n  @State() error: string;\n\n  componentWillLoad() {\n    onFirstVisible(this.el, async () => {\n      try {\n        this.loading = true;\n        await Promise.all([this.getGroup(), this.getProductPrices()]);\n      } catch (e) {\n        console.error(e);\n        if (e?.message) {\n          this.error = e.message;\n        } else {\n          this.error = __('Something went wrong', 'surecart');\n        }\n      } finally {\n        this.loading = false;\n      }\n    });\n    this.handleSubscriptionChange();\n  }\n\n  @Watch('products')\n  handleProductsChange() {\n    this.prices = this.products\n      .map(product => (product as Product)?.prices?.data)\n      .flat()\n      .filter((v, i, a) => a.findIndex(t => t.id === v.id) === i) // remove duplicates.\n      .filter(price => !price?.archived) // remove archived\n      .filter(price => price.portal_subscription_update_enabled); // only show prices that can be upgraded to.\n\n    this.showFilters = this.prices?.length > this.filterAbove;\n  }\n\n  @Watch('prices')\n  handlePricesChange(val, prev) {\n    if (!prev?.length && val?.length) {\n      this.selectedPrice = val.find(price => price.id === (this.subscription?.price as Price)?.id);\n    }\n\n    this.hasFilters = {\n      ...this.hasFilters,\n      split: this.prices.some(price => !!price?.recurring_period_count && !price?.archived),\n      month: this.prices.some(price => price.recurring_interval === 'month' && !price?.recurring_period_count && !price?.archived),\n      year: this.prices.some(price => price.recurring_interval === 'year' && !price?.recurring_period_count && !price?.archived),\n      never: this.prices.some(price => (price.recurring_interval === 'never' || !price.recurring_interval) && !price?.archived),\n    };\n  }\n\n  @Watch('subscription')\n  handleSubscriptionChange() {\n    this.filter = (this.subscription?.price as Price)?.recurring_interval || 'month';\n  }\n\n  /** Get all subscriptions */\n  async getGroup() {\n    if (!this.productGroupId) return;\n    const products = (await await apiFetch({\n      path: addQueryArgs(`surecart/v1/products/`, {\n        product_group_ids: [this.productGroupId],\n        expand: ['prices'],\n        ...this.query,\n      }),\n    })) as Product[];\n    this.products = [...this.products, ...products];\n  }\n\n  /** Get the product's prices. */\n  async getProductPrices() {\n    if (!this.productId) return;\n    const product = (await await apiFetch({\n      path: addQueryArgs(`surecart/v1/products/${this.productId}`, {\n        expand: ['prices'],\n      }),\n    })) as Product;\n    this.products = [...this.products, ...[product]];\n  }\n\n  async handleSubmit(e) {\n    const { plan } = await e.target.getFormJson();\n    const price = this.prices.find(p => p.id === plan);\n    const currentPlan = this.subscription?.price as Price;\n    if (price?.id === currentPlan.id && !price?.ad_hoc && !this.subscription?.variant_options?.length) return;\n\n    // confirm product variation.\n    if (this.subscription?.variant_options?.length) {\n      this.busy = true;\n      return window.location.assign(\n        addQueryArgs(this.successUrl, {\n          action: 'confirm_variation',\n          price_id: plan,\n          ...(this.subscription?.live_mode === false ? { live_mode: false } : {}),\n        }),\n      );\n    }\n\n    // confirm ad_hoc amount.\n    if (price?.ad_hoc) {\n      this.busy = true;\n      return window.location.assign(\n        addQueryArgs(this.successUrl, {\n          action: 'confirm_amount',\n          price_id: plan,\n          ...(this.subscription?.live_mode === false ? { live_mode: false } : {}),\n        }),\n      );\n    }\n\n    // confirm plan.\n    this.busy = true;\n    window.location.assign(\n      addQueryArgs(this.successUrl, {\n        action: 'confirm',\n        price_id: plan,\n        ...(this.subscription?.live_mode === false ? { live_mode: false } : {}),\n      }),\n    );\n  }\n\n  renderSwitcher() {\n    const hasMultipleFilters = Object.values(this.hasFilters || {}).filter(v => !!v).length > 1;\n    if (!hasMultipleFilters) return;\n    if (!this.showFilters) return;\n\n    return (\n      <sc-flex slot=\"end\" class=\"subscriptions-switch__switcher\">\n        {this.hasFilters.month && (\n          <sc-button onClick={() => (this.filter = 'month')} size=\"small\" type={this.filter === 'month' ? 'default' : 'text'}>\n            {__('Monthly', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.week && (\n          <sc-button onClick={() => (this.filter = 'week')} size=\"small\" type={this.filter === 'week' ? 'default' : 'text'}>\n            {__('Weekly', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.year && (\n          <sc-button onClick={() => (this.filter = 'year')} size=\"small\" type={this.filter === 'year' ? 'default' : 'text'}>\n            {__('Yearly', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.never && (\n          <sc-button onClick={() => (this.filter = 'never')} size=\"small\" type={this.filter === 'never' ? 'default' : 'text'}>\n            {__('Lifetime', 'surecart')}\n          </sc-button>\n        )}\n        {this.hasFilters.split && (\n          <sc-button onClick={() => (this.filter = 'split')} size=\"small\" type={this.filter === 'split' ? 'default' : 'text'}>\n            {__('Payment Plan', 'surecart')}\n          </sc-button>\n        )}\n      </sc-flex>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <sc-choice name=\"loading\" disabled>\n        <sc-skeleton style={{ width: '60px', display: 'inline-block' }}></sc-skeleton>\n        <sc-skeleton style={{ width: '80px', display: 'inline-block' }} slot=\"price\"></sc-skeleton>\n        <sc-skeleton style={{ width: '120px', display: 'inline-block' }} slot=\"description\"></sc-skeleton>\n      </sc-choice>\n    );\n  }\n\n  /** Is the price hidden or not */\n  isHidden(price: Price) {\n    // don't hide if no filters.\n    if (!this.showFilters) return false;\n\n    // hide if the filter does not match the recurring interval.\n    let hidden = this.filter !== price.recurring_interval;\n\n    // if filter is never, show prices with non-recurring interval.\n    if (this.filter === 'never' && !price?.recurring_interval) {\n      hidden = false;\n    }\n\n    // if filter is split, show prices with a recurring_period_count.\n    if (this.filter === 'split' && price?.recurring_period_count) {\n      hidden = false;\n    }\n\n    return hidden;\n  }\n\n  renderContent() {\n    if (this.loading) {\n      return this.renderLoading();\n    }\n\n    return (\n      <sc-choices required>\n        <div>\n          {(this.prices || [])\n            .filter(price => !price.archived)\n            .filter(price => price?.currency === this.subscription?.currency)\n            .sort((a, b) => a.amount - b.amount)\n            .map(price => {\n              const currentPlan = (this.subscription?.price as Price)?.id === price?.id;\n              const product = this.products.find(product => product.id === price?.product);\n\n              return (\n                <sc-choice\n                  key={price?.id}\n                  checked={currentPlan}\n                  name=\"plan\"\n                  value={price?.id}\n                  hidden={this.isHidden(price)}\n                  onScChange={e => {\n                    if (e.detail) {\n                      this.selectedPrice = this.prices.find(p => p.id === price?.id);\n                    }\n                  }}\n                >\n                  <div>\n                    <strong>\n                      {product?.name} {price?.name && <Fragment> — {price?.name}</Fragment>}\n                    </strong>\n                  </div>\n                  <div slot=\"description\">\n                    {price?.ad_hoc ? (\n                      `${__('Custom amount', 'surecart')} ${intervalString(price)}`\n                    ) : (\n                      <Fragment>\n                        <sc-format-number type=\"currency\" currency={price?.currency || 'usd'} value={price?.amount}></sc-format-number> {intervalString(price, { showOnce: true })}\n                      </Fragment>\n                    )}\n                  </div>\n                  {currentPlan && (\n                    <sc-tag type=\"warning\" slot=\"price\">\n                      {__('Current Plan', 'surecart')}\n                    </sc-tag>\n                  )}\n                </sc-choice>\n              );\n            })}\n        </div>\n      </sc-choices>\n    );\n  }\n\n  buttonText() {\n    if (this.subscription?.variant_options?.length) {\n      if (this.selectedPrice?.id === (this.subscription?.price as Price)?.id) {\n        return __('Update Options', 'surecart');\n      } else {\n        return __('Choose Options', 'surecart');\n      }\n    }\n\n    if (this.selectedPrice?.ad_hoc) {\n      if (this.selectedPrice?.id === (this.subscription?.price as Price)?.id) {\n        return __('Update Amount', 'surecart');\n      } else {\n        return __('Choose Amount', 'surecart');\n      }\n    }\n    return __('Next', 'surecart');\n  }\n\n  buttonDisabled() {\n    if (this.subscription?.variant_options) {\n      return false;\n    }\n    return (this.subscription?.price as Price)?.id === this.selectedPrice?.id && !this.selectedPrice?.ad_hoc;\n  }\n\n  render() {\n    // we are not loading and we don't have enough prices to switch.\n    if (!this.loading && this.prices?.length < 2) {\n      if (!this.prices?.[0]?.ad_hoc && !this.subscription?.variant_options?.length) {\n        return null;\n      }\n    }\n\n    // subscription is a payment plan.\n    if (this.subscription?.finite) {\n      return (\n        <sc-alert type=\"info\" open>\n          {__('To make changes to your payment plan, please contact us.', 'surecart')}\n        </sc-alert>\n      );\n    }\n\n    return (\n      <sc-dashboard-module heading={this.heading || __('Update Plan', 'surecart')} class=\"subscription-switch\" error={this.error}>\n        <span slot=\"end\">{this.renderSwitcher()}</span>\n        <sc-form class=\"subscriptions-switch\" onScFormSubmit={e => this.handleSubmit(e)}>\n          {this.renderContent()}\n\n          <sc-button type=\"primary\" full submit loading={this.loading || this.busy} disabled={this.buttonDisabled()}>\n            {this.buttonText()} <sc-icon name=\"arrow-right\" slot=\"suffix\"></sc-icon>\n          </sc-button>\n\n          {this.busy && <sc-block-ui style={{ zIndex: '9' }}></sc-block-ui>}\n        </sc-form>\n      </sc-dashboard-module>\n    );\n  }\n}\n"]}