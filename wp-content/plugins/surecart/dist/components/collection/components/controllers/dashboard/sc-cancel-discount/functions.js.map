{"version":3,"file":"functions.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/sc-cancel-discount/functions.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,6BAA6B,CAAC;AAE/D,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AAErC;;GAEG;AACH,MAAM,CAAC,MAAM,aAAa,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,GAAG,QAAQ,EAAE,EAAE;EAChE,OAAO,MAAM,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,GAAG,KAAK,EAAE,OAAO,CAAC,CAAC;AAClG,CAAC,CAAC;AAEF;;GAEG;AACH,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,SAAS,EAAE,QAAQ,EAAE,EAAE,CAC7D,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,mBAAmB,EAAC,CAAC,CAAC,aAAa,CAAC,SAAS,EAAE,gBAAgB,CAAC,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,mBAA6B,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;AAElI;;GAEG;AACH,MAAM,CAAC,MAAM,0BAA0B,GAAG,CAAC,QAA8B,EAAE,WAAW,EAAE,EAAE;EACxF,MAAM,EAAE,cAAc,EAAE,oBAAoB,EAAE,eAAe,EAAE,WAAW,EAAE,GAAG,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,oBAAoB,KAAI,EAAE,CAAC;EAEpH,IAAI,WAAW,EAAE;IACf,MAAM,eAAe,GAAG;MACtB,KAAK,EAAE,uBAAuB,CAAC,EAAE,CAAC,6CAA6C,EAAE,UAAU,CAAC,EAAE,QAAQ,CAAC;MACvG,WAAW,EAAE,uBAAuB,CAClC,EAAE,CAAC,8HAA8H,EAAE,UAAU,CAAC,EAC9I,QAAQ,CACT;MACD,MAAM,EAAE,EAAE,CAAC,kBAAkB,EAAE,UAAU,CAAC;MAC1C,WAAW,EAAE,EAAE,CAAC,eAAe,EAAE,UAAU,CAAC;KAC7C,CAAC;IACF,OAAO,eAAe,CAAC;GACxB;EAED,MAAM,cAAc,GAAG;IACrB,KAAK,EAAE,uBAAuB,CAAC,cAAc,EAAE,QAAQ,CAAC;IACxD,WAAW,EAAE,uBAAuB,CAAC,oBAAoB,EAAE,QAAQ,CAAC;IACpE,MAAM,EAAE,eAAe;IACvB,WAAW,EAAE,WAAW;GACzB,CAAC;EACF,OAAO,cAAc,CAAC;AACxB,CAAC,CAAC","sourcesContent":["import { getHumanDiscount } from '../../../../functions/price';\nimport { Coupon, SubscriptionProtocol } from '../../../../types';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Replace the {{ name }} in a string with a new value\n */\nexport const replaceAmount = (string, replace, name = 'amount') => {\n  return string.replaceAll('{{' + name + '}}', replace).replaceAll('{{ ' + name + ' }}', replace);\n};\n\n/**\n * Replace the amount in a string with discount.\n */\nexport const replaceAmountFromString = (amountStr, protocol) =>\n  protocol?.preservation_coupon ? replaceAmount(amountStr, getHumanDiscount(protocol?.preservation_coupon as Coupon)) : amountStr;\n\n/**\n *\n */\nexport const getCurrentBehaviourContent = (protocol: SubscriptionProtocol, hasDiscount) => {\n  const { preserve_title, preserve_description, preserve_button, cancel_link } = protocol?.preservation_locales || {};\n\n  if (hasDiscount) {\n    const discountLocales = {\n      title: replaceAmountFromString(__('Your {{ amount }} discount is still active.', 'surecart'), protocol),\n      description: replaceAmountFromString(\n        __('You have a {{ amount }} discount active. Cancelling now will forfeit this discount forever. Are you sure you wish to cancel?', 'surecart'),\n        protocol,\n      ),\n      button: __('Keep My Discount', 'surecart'),\n      cancel_link: __('Cancel Anyway', 'surecart'),\n    };\n    return discountLocales;\n  }\n\n  const defaultLocales = {\n    title: replaceAmountFromString(preserve_title, protocol),\n    description: replaceAmountFromString(preserve_description, protocol),\n    button: preserve_button,\n    cancel_link: cancel_link,\n  };\n  return defaultLocales;\n};\n"]}