{"version":3,"file":"sc-dashboard-customer-details.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/customer-details/sc-dashboard-customer-details.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACnE,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AACrC,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,QAAQ,MAAM,6BAA6B,CAAC;AACnD,OAAO,EAAE,cAAc,EAAE,MAAM,4BAA4B,CAAC;AAQ5D,MAAM,OAAO,0BAA0B;;;;;;;;EAQrC,iBAAiB;IACf,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,EAAE;MAC3B,IAAI,CAAC,KAAK,EAAE,CAAC;IACf,CAAC,CAAC,CAAC;EACL,CAAC;EAED,KAAK,CAAC,KAAK;IACT,IAAI,EAAE,KAAK,IAAI,CAAC,UAAU,EAAE;MAC1B,OAAO;KACR;IACD,IAAI;MACF,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;MACpB,IAAI,CAAC,QAAQ,GAAG,CAAC,MAAM,MAAM,QAAQ,CAAC;QACpC,IAAI,EAAE,YAAY,CAAC,yBAAyB,IAAI,CAAC,UAAU,EAAE,EAAE;UAC7D,MAAM,EAAE,CAAC,kBAAkB,EAAE,iBAAiB,EAAE,gBAAgB,CAAC;SAClE,CAAC;OACH,CAAC,CAAa,CAAC;KACjB;IAAC,OAAO,CAAC,EAAE;MACV,IAAI,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,OAAO,EAAE;QACd,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;OACxB;WAAM;QACL,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC;OACrD;MACD,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC3B;YAAS;MACR,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;KACtB;EACH,CAAC;EAED,MAAM;IACJ,OAAO,CACL,2BACE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,OAAO,EAAE,IAAI,CAAC,OAAO,EACrB,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,OAAO,EAAE,IAAI,CAAC,OAAO,eACV,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE;QAC5C,MAAM,EAAE,MAAM;QACd,KAAK,EAAE,UAAU;QACjB,EAAE,EAAE,IAAI,CAAC,UAAU;OACpB,CAAC,GACmB,CACxB,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Element, h, Prop, State } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\nimport apiFetch from '../../../../functions/fetch';\nimport { onFirstVisible } from '../../../../functions/lazy';\nimport { Customer } from '../../../../types';\n\n@Component({\n  tag: 'sc-dashboard-customer-details',\n  styleUrl: 'sc-dashboard-customer-details.css',\n  shadow: true,\n})\nexport class ScDashboardCustomerDetails {\n  @Element() el: HTMLScCustomerDetailsElement;\n  @Prop() customerId: string;\n  @Prop() heading: string;\n  @State() customer: Customer;\n  @State() loading: boolean;\n  @State() error: string;\n\n  componentWillLoad() {\n    onFirstVisible(this.el, () => {\n      this.fetch();\n    });\n  }\n\n  async fetch() {\n    if ('' === this.customerId) {\n      return;\n    }\n    try {\n      this.loading = true;\n      this.customer = (await await apiFetch({\n        path: addQueryArgs(`surecart/v1/customers/${this.customerId}`, {\n          expand: ['shipping_address', 'billing_address', 'tax_identifier'],\n        }),\n      })) as Customer;\n    } catch (e) {\n      if (e?.message) {\n        this.error = e.message;\n      } else {\n        this.error = __('Something went wrong', 'surecart');\n      }\n      console.error(this.error);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  render() {\n    return (\n      <sc-customer-details\n        customer={this.customer}\n        loading={this.loading}\n        error={this.error}\n        heading={this.heading}\n        edit-link={addQueryArgs(window.location.href, {\n          action: 'edit',\n          model: 'customer',\n          id: this.customerId,\n        })}\n      ></sc-customer-details>\n    );\n  }\n}\n"]}