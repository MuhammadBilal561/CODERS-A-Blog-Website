{"version":3,"file":"sc-checkout-form-errors.js","sourceRoot":"","sources":["../../../../../src/components/controllers/checkout-form/checkout-form-errors/sc-checkout-form-errors.tsx"],"names":[],"mappings":"AAAA;;GAEG;AACH,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AAGnD;;GAEG;AACH,OAAO,EAAE,KAAK,IAAI,UAAU,EAAE,MAAM,gBAAgB,CAAC;AACrD,OAAO,EAAE,0BAA0B,EAAE,MAAM,wBAAwB,CAAC;AACpE,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAC;AACvC,OAAO,EAAE,YAAY,EAAE,MAAM,0BAA0B,CAAC;AAExD;;GAEG;AAMH,MAAM,OAAO,oBAAoB;EALjC;IAMU,wBAAmB,GAAG,GAAG,EAAE,GAAE,CAAC,CAAC;GAuDxC;EAtDC;;;KAGG;EACH,YAAY;IACV,QAAQ,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,EAAE;MACxB,KAAK,OAAO;QACV,OAAO,QAAQ,CAAC;MAClB,KAAK,SAAS;QACZ,OAAO,SAAS,CAAC;MACnB;QACE,OAAO,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,CAAC;KAC3B;EACH,CAAC;EAED,iBAAiB;IACf,2CAA2C;IAC3C,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC,WAAW,EAAE,GAAG,EAAE;MACpD,IAAI,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC,EAAE;QAC3D,YAAY,EAAE,CAAC;OAChB;IACH,CAAC,CAAC,CAAC;EACL,CAAC;EAED,oBAAoB;IAClB,IAAI,CAAC,mBAAmB,EAAE,CAAC;EAC7B,CAAC;EAED,gBAAgB;;IACd,oCAAoC;IACpC,IAAI,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,MAAK,kBAAkB,KAAI,MAAA,0BAA0B,EAAE,0CAAE,MAAM,CAAA,EAAE;MACnF,OAAO,EAAE,CAAC;KACX;IACD,OAAO,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,OAAO,CAAC;EAC7B,CAAC;EAED,MAAM;IACJ,yEAAyE;IACzE,IAAI,CAAC,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,OAAO,CAAA,IAAI,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC,EAAE;MACnF,OAAO,EAAC,IAAI,IAAC,KAAK,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,GAAS,CAAC;KAClD;IAED,OAAO,CACL,EAAC,IAAI;MACH,gBAAU,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,OAAO,CAAA,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,WAAW,CAAA;QACtH,CAAC,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,YAAM,IAAI,EAAC,OAAO,EAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,GAAS;QAC3F,CAAC,0BAA0B,EAAE,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAC5D,WAAK,SAAS,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,GAAQ,CAC5C,CAAC,CACO;MACX,eAAQ,CACH,CACR,CAAC;EACJ,CAAC;;;;;;;;;CACF","sourcesContent":["/**\n * External dependencies.\n */\nimport { Component, h, Host } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies.\n */\nimport { state as errorState } from '@store/notices';\nimport { getAdditionalErrorMessages } from '@store/notices/getters';\nimport { currentFormState } from '@store/form/getters';\nimport { onChange } from '@store/form';\nimport { removeNotice } from '@store/notices/mutations';\n\n/**\n * This component listens for a confirmed event and redirects to the success url.\n */\n@Component({\n  tag: 'sc-checkout-form-errors',\n  styleUrl: 'sc-checkout-form-errors.scss',\n  shadow: true,\n})\nexport class ScCheckoutFormErrors {\n  private removeStateListener = () => {};\n  /**\n   * Get the alert type.\n   * @returns string\n   */\n  getAlertType() {\n    switch (errorState?.type) {\n      case 'error':\n        return 'danger';\n      case 'default':\n        return 'primary';\n      default:\n        return errorState?.type;\n    }\n  }\n\n  componentWillLoad() {\n    // remove notice if finalizing or updating.\n    this.removeStateListener = onChange('formState', () => {\n      if (['finalizing', 'updating'].includes(currentFormState())) {\n        removeNotice();\n      }\n    });\n  }\n\n  disconnectedCallback() {\n    this.removeStateListener();\n  }\n\n  getTopLevelError() {\n    // checkout invalid is not friendly.\n    if (errorState?.code === 'checkout.invalid' && getAdditionalErrorMessages()?.length) {\n      return '';\n    }\n    return errorState?.message;\n  }\n\n  render() {\n    // don't show component if no error message or is finalizing or updating.\n    if (!errorState?.message || ['finalizing', 'updating'].includes(currentFormState())) {\n      return <Host style={{ display: 'none' }}></Host>;\n    }\n\n    return (\n      <Host>\n        <sc-alert type={this.getAlertType()} scrollOnOpen={true} open={!!errorState?.message} closable={!!errorState?.dismissible}>\n          {!!this.getTopLevelError() && <span slot=\"title\" innerHTML={this.getTopLevelError()}></span>}\n          {(getAdditionalErrorMessages() || []).map((message, index) => (\n            <div innerHTML={message} key={index}></div>\n          ))}\n        </sc-alert>\n        <slot />\n      </Host>\n    );\n  }\n}\n"]}