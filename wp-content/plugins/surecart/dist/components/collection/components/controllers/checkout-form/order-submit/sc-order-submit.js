import{Fragment,h}from"@stencil/core";import{checkoutIsLocked}from"@store/checkout/getters";import{availableProcessors}from"@store/processors/getters";import{state as selectedProcessor}from"@store/selected-processor";import{state as checkoutState}from"@store/checkout";import{__}from"@wordpress/i18n";import{openWormhole}from"stencil-wormhole";import{getProcessorData}from"../../../../functions/processor";import{formBusy}from"@store/form/getters";export class ScOrderSubmit{constructor(){this.loading=void 0,this.paying=void 0,this.type="primary",this.size="medium",this.full=!0,this.icon=void 0,this.showTotal=void 0,this.processors=void 0,this.order=void 0,this.currencyCode="usd",this.processor=void 0,this.secureNoticeText=void 0,this.secureNotice=!0}cannotShipToLocation(){var e,t;return(null===(e=null==checkoutState?void 0:checkoutState.checkout)||void 0===e?void 0:e.selected_shipping_choice_required)&&!(null===(t=checkoutState.checkout)||void 0===t?void 0:t.selected_shipping_choice)}renderPayPalButton(e){const{client_id:t,account_id:o,merchant_initiated_enabled:r}=getProcessorData(availableProcessors(),"paypal",checkoutState.mode);return t||o?h("sc-paypal-buttons",{buttons:e,busy:formBusy()||checkoutIsLocked(),mode:checkoutState.mode,order:checkoutState.checkout,merchantInitiated:r,"currency-code":checkoutState.currencyCode,"client-id":t,"merchant-id":o,label:"checkout",color:"blue"}):null}render(){return this.cannotShipToLocation()||checkoutIsLocked("OUT_OF_STOCK")?h("sc-button",{type:this.type,size:this.size,full:this.full,loading:this.loading||this.paying,disabled:!0},!!this.icon&&h("sc-icon",{name:this.icon,slot:"prefix","aria-hidden":"true"}),h("slot",null,__("Purchase","surecart")),this.showTotal&&h("span",null," ",h("sc-total",null)),h("sc-visually-hidden",null," ",__("Press enter to purchase","surecart"))):h(Fragment,null,"paypal"===selectedProcessor.id&&!(null==selectedProcessor?void 0:selectedProcessor.method)&&this.renderPayPalButton(["paypal"]),"paypal"===selectedProcessor.id&&"card"===(null==selectedProcessor?void 0:selectedProcessor.method)&&this.renderPayPalButton(["card"]),h("sc-button",{hidden:["paypal","paypal-card"].includes(selectedProcessor.id),submit:!0,type:this.type,size:this.size,full:this.full,loading:this.loading||this.paying,disabled:this.loading||this.paying||formBusy()||checkoutIsLocked()||this.cannotShipToLocation()},!!this.icon&&h("sc-icon",{name:this.icon,slot:"prefix","aria-hidden":"true"}),h("slot",null,__("Purchase","surecart")),this.showTotal&&h("span",null," ",h("sc-total",null)),h("sc-visually-hidden",null," ",__("Press enter to purchase","surecart"))),this.secureNotice&&"https:"===location.protocol&&h("div",{class:"sc-secure-notice"},h("sc-secure-notice",null,this.secureNoticeText||__("This is a secure, encrypted payment.","surecart"))))}static get is(){return"sc-order-submit"}static get originalStyleUrls(){return{$:["sc-order-submit.scss"]}}static get styleUrls(){return{$:["sc-order-submit.css"]}}static get properties(){return{loading:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Is the order loading."},attribute:"loading",reflect:!1},paying:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Is the order paying."},attribute:"paying",reflect:!1},type:{type:"string",mutable:!1,complexType:{original:"'default' | 'primary' | 'success' | 'info' | 'warning' | 'danger' | 'text' | 'link'",resolved:'"danger" | "default" | "info" | "link" | "primary" | "success" | "text" | "warning"',references:{}},required:!1,optional:!1,docs:{tags:[],text:"The button type."},attribute:"type",reflect:!0,defaultValue:"'primary'"},size:{type:"string",mutable:!1,complexType:{original:"'small' | 'medium' | 'large'",resolved:'"large" | "medium" | "small"',references:{}},required:!1,optional:!1,docs:{tags:[],text:"The button's size."},attribute:"size",reflect:!0,defaultValue:"'medium'"},full:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Show a full-width button."},attribute:"full",reflect:!1,defaultValue:"true"},icon:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Icon to show."},attribute:"icon",reflect:!1},showTotal:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Show the total."},attribute:"show-total",reflect:!1},processors:{type:"unknown",mutable:!1,complexType:{original:"Processor[]",resolved:"Processor[]",references:{Processor:{location:"import",path:"../../../../types"}}},required:!1,optional:!1,docs:{tags:[],text:"Keys and secrets for processors."}},order:{type:"unknown",mutable:!1,complexType:{original:"Checkout",resolved:"Checkout",references:{Checkout:{location:"import",path:"../../../../types"}}},required:!1,optional:!1,docs:{tags:[],text:"The current order."}},currencyCode:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Currency Code"},attribute:"currency-code",reflect:!1,defaultValue:"'usd'"},processor:{type:"string",mutable:!1,complexType:{original:"ProcessorName",resolved:'"paypal" | "paypal-card" | "stripe"',references:{ProcessorName:{location:"import",path:"../../../../types"}}},required:!1,optional:!1,docs:{tags:[],text:"The selected processor."},attribute:"processor",reflect:!1},secureNoticeText:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Secure"},attribute:"secure-notice-text",reflect:!1},secureNotice:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Show the secure notice"},attribute:"secure-notice",reflect:!1,defaultValue:"true"}}}}openWormhole(ScOrderSubmit,["loading","paying","processors","processor","currencyCode","order"],!1);