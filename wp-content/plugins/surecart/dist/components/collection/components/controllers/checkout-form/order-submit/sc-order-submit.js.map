{"version":3,"file":"sc-order-submit.js","sourceRoot":"","sources":["../../../../../src/components/controllers/checkout-form/order-submit/sc-order-submit.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Fragment, h, Prop } from '@stencil/core';\nimport { checkoutIsLocked } from '@store/checkout/getters';\nimport { availableProcessors } from '@store/processors/getters';\nimport { state as selectedProcessor } from '@store/selected-processor';\nimport { state as checkoutState } from '@store/checkout';\nimport { __ } from '@wordpress/i18n';\nimport { openWormhole } from 'stencil-wormhole';\n\nimport { getProcessorData } from '../../../../functions/processor';\nimport { Checkout, Processor, ProcessorName } from '../../../../types';\nimport { formBusy } from '@store/form/getters';\n\n@Component({\n  tag: 'sc-order-submit',\n  styleUrl: 'sc-order-submit.scss',\n  shadow: false,\n})\nexport class ScOrderSubmit {\n  /** Is the order loading. */\n  @Prop() loading: boolean;\n\n  /** Is the order paying. */\n  @Prop() paying: boolean;\n\n  /** The button type. */\n  @Prop({ reflect: true }) type: 'default' | 'primary' | 'success' | 'info' | 'warning' | 'danger' | 'text' | 'link' = 'primary';\n\n  /** The button's size. */\n  @Prop({ reflect: true }) size: 'small' | 'medium' | 'large' = 'medium';\n\n  /** Show a full-width button. */\n  @Prop() full: boolean = true;\n\n  /** Icon to show. */\n  @Prop() icon: string;\n\n  /** Show the total. */\n  @Prop() showTotal: boolean;\n\n  /** Keys and secrets for processors. */\n  @Prop() processors: Processor[];\n\n  /** The current order. */\n  @Prop() order: Checkout;\n\n  /** Currency Code */\n  @Prop() currencyCode: string = 'usd';\n\n  /** The selected processor. */\n  @Prop() processor: ProcessorName;\n\n  /** Secure */\n  @Prop() secureNoticeText: string;\n\n  /** Show the secure notice */\n  @Prop() secureNotice: boolean = true;\n\n  cannotShipToLocation() {\n    return checkoutState?.checkout?.selected_shipping_choice_required && !checkoutState.checkout?.selected_shipping_choice;\n  }\n\n  renderPayPalButton(buttons) {\n    const { client_id, account_id, merchant_initiated_enabled } = getProcessorData(availableProcessors(), 'paypal', checkoutState.mode);\n    if (!client_id && !account_id) return null;\n\n    return (\n      <sc-paypal-buttons\n        buttons={buttons}\n        busy={formBusy() || checkoutIsLocked()}\n        mode={checkoutState.mode}\n        order={checkoutState.checkout}\n        merchantInitiated={merchant_initiated_enabled}\n        currency-code={checkoutState.currencyCode}\n        client-id={client_id}\n        merchant-id={account_id}\n        label=\"checkout\"\n        color=\"blue\"\n      ></sc-paypal-buttons>\n    );\n  }\n\n  render() {\n    if (this.cannotShipToLocation() || checkoutIsLocked('OUT_OF_STOCK')) {\n      return (\n        <sc-button type={this.type} size={this.size} full={this.full} loading={this.loading || this.paying} disabled={true}>\n          {!!this.icon && <sc-icon name={this.icon} slot=\"prefix\" aria-hidden=\"true\"></sc-icon>}\n          <slot>{__('Purchase', 'surecart')}</slot>\n          {this.showTotal && (\n            <span>\n              {'\\u00A0'}\n              <sc-total></sc-total>\n            </span>\n          )}\n          <sc-visually-hidden> {__('Press enter to purchase', 'surecart')}</sc-visually-hidden>\n        </sc-button>\n      );\n    }\n\n    return (\n      <Fragment>\n        {selectedProcessor.id === 'paypal' && !selectedProcessor?.method && this.renderPayPalButton(['paypal'])}\n        {selectedProcessor.id === 'paypal' && selectedProcessor?.method === 'card' && this.renderPayPalButton(['card'])}\n        <sc-button\n          hidden={['paypal', 'paypal-card'].includes(selectedProcessor.id)}\n          submit\n          type={this.type}\n          size={this.size}\n          full={this.full}\n          loading={this.loading || this.paying}\n          disabled={this.loading || this.paying || formBusy() || checkoutIsLocked() || this.cannotShipToLocation()}\n        >\n          {!!this.icon && <sc-icon name={this.icon} slot=\"prefix\" aria-hidden=\"true\"></sc-icon>}\n          <slot>{__('Purchase', 'surecart')}</slot>\n          {this.showTotal && (\n            <span>\n              {'\\u00A0'}\n              <sc-total></sc-total>\n            </span>\n          )}\n          <sc-visually-hidden> {__('Press enter to purchase', 'surecart')}</sc-visually-hidden>\n        </sc-button>\n        {this.secureNotice && location.protocol === 'https:' && (\n          <div class=\"sc-secure-notice\">\n            <sc-secure-notice>{this.secureNoticeText || __('This is a secure, encrypted payment.', 'surecart')}</sc-secure-notice>\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n}\nopenWormhole(ScOrderSubmit, ['loading', 'paying', 'processors', 'processor', 'currencyCode', 'order'], false);\n"]}