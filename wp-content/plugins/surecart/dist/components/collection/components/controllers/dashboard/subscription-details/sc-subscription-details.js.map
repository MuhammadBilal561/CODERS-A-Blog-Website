{"version":3,"file":"sc-subscription-details.js","sourceRoot":"","sources":["../../../../../src/components/controllers/dashboard/subscription-details/sc-subscription-details.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop, State, Watch } from '@stencil/core';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\n\nimport apiFetch from '../../../../functions/fetch';\nimport { intervalString } from '../../../../functions/price';\nimport { License, Price, Product, Purchase, Subscription } from '../../../../types';\nimport { productNameWithPrice } from '../../../../functions/price';\nimport { formatTime } from '../../../../../../admin/util/time';\nimport { formatNumber } from '../../../../../../admin/util';\n@Component({\n  tag: 'sc-subscription-details',\n  styleUrl: 'sc-subscription-details.css',\n  shadow: true,\n})\nexport class ScSubscriptionDetails {\n  @Prop() subscription: Subscription;\n  @Prop() pendingPrice: Price;\n  @Prop() hideRenewalText: boolean;\n\n  @State() activationsModal: boolean;\n  @State() loading: boolean;\n  @State() hasPendingUpdate: boolean;\n\n  renderName() {\n    if (typeof this.subscription?.price?.product !== 'string') {\n      return productNameWithPrice(this.subscription?.price);\n    }\n    return __('Subscription', 'surecart');\n  }\n\n  @Watch('subscription')\n  async handleSubscriptionChange() {\n    this.hasPendingUpdate = !!Object.keys(this?.subscription?.pending_update || {})?.length;\n    if (this?.subscription?.pending_update?.price && !this?.pendingPrice && !this.hideRenewalText) {\n      this.pendingPrice = await this.fetchPrice(this.subscription.pending_update.price);\n    }\n  }\n\n  componentWillLoad() {\n    this.handleSubscriptionChange();\n  }\n\n  async fetchPrice(price_id: string) {\n    try {\n      this.loading = true;\n      const price = await apiFetch({\n        path: addQueryArgs(`surecart/v1/prices/${price_id}`, {\n          expand: ['product'],\n        }),\n      });\n      return price as Price;\n    } catch (e) {\n      console.error(e);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  renderRenewalText() {\n    const tag = <sc-subscription-status-badge subscription={this?.subscription}></sc-subscription-status-badge>;\n\n    if (this?.subscription?.cancel_at_period_end && this?.subscription?.current_period_end_at) {\n      return (\n        <span aria-label={sprintf(__('Renewal Update - Your plan will be canceled on %s', 'surecart'), formatTime(this.subscription.current_period_end_at))}>\n          {tag} {sprintf(__('Your plan will be canceled on', 'surecart'))}{' '}\n          <sc-format-date date={this.subscription.current_period_end_at * 1000} month=\"long\" day=\"numeric\" year=\"numeric\"></sc-format-date>\n        </span>\n      );\n    }\n\n    if (this.hasPendingUpdate) {\n      if (!this.pendingPrice && !this.subscription?.pending_update?.ad_hoc_amount) {\n        return <sc-skeleton></sc-skeleton>;\n      }\n\n      if (this.subscription?.pending_update?.ad_hoc_amount) {\n        return (\n          <span\n            aria-label={sprintf(\n              __('Renewal Update - Your plan switches to %1s on %2s', 'surecart'),\n              formatNumber(this.subscription?.pending_update?.ad_hoc_amount, this.pendingPrice?.currency || this.subscription?.price?.currency),\n              formatTime(this.subscription.current_period_end_at),\n            )}\n          >\n            {__('Your plan switches to', 'surecart')}{' '}\n            <strong>\n              <sc-format-number\n                type=\"currency\"\n                currency={this.pendingPrice?.currency || this.subscription?.price?.currency}\n                value={this.subscription?.pending_update?.ad_hoc_amount}\n              ></sc-format-number>{' '}\n              {intervalString(this.pendingPrice || this.subscription?.price)}\n            </strong>{' '}\n            {__('on', 'surecart')}{' '}\n            <sc-format-date date={this.subscription.current_period_end_at as number} type=\"timestamp\" month=\"long\" day=\"numeric\" year=\"numeric\"></sc-format-date>\n          </span>\n        );\n      }\n      return (\n        <span\n          aria-label={sprintf(\n            __('Renewal Update - Your plan switches to %1s on %2s', 'surecart'),\n            (this.pendingPrice.product as Product).name,\n            formatTime(this.subscription.current_period_end_at),\n          )}\n        >\n          {__('Your plan switches to', 'surecart')} <strong>{(this.pendingPrice.product as Product).name}</strong> {__('on', 'surecart')}{' '}\n          <sc-format-date date={this.subscription.current_period_end_at as number} type=\"timestamp\" month=\"long\" day=\"numeric\" year=\"numeric\"></sc-format-date>\n        </span>\n      );\n    }\n\n    if (this?.subscription?.status === 'trialing' && this?.subscription?.trial_end_at) {\n      return (\n        <span aria-label={sprintf(__('Renewal Update - Your plan begins on %s.', 'surecart'), formatTime(this.subscription.trial_end_at))}>\n          {tag} {sprintf(__('Your plan begins on', 'surecart'))}{' '}\n          <sc-format-date date={this?.subscription?.trial_end_at} type=\"timestamp\" month=\"long\" day=\"numeric\" year=\"numeric\"></sc-format-date>\n        </span>\n      );\n    }\n    if (this.subscription?.status === 'active' && this.subscription?.current_period_end_at) {\n      return (\n        <span aria-label={sprintf(__('Renewal Update - Your next payment is on %s', 'surecart'), formatTime(this.subscription.current_period_end_at))}>\n          {tag} {this.subscription?.remaining_period_count === null ? __('Your plan renews on', 'surecart') : __('Your next payment is on', 'surecart')}{' '}\n          <sc-format-date date={this?.subscription?.current_period_end_at} type=\"timestamp\" month=\"long\" day=\"numeric\" year=\"numeric\"></sc-format-date>\n        </span>\n      );\n    }\n\n    return tag;\n  }\n\n  getActivations() {\n    return (((this.subscription?.purchase as Purchase)?.license as License)?.activations?.data || []).filter(activation => {\n      return activation?.counted;\n    });\n  }\n\n  renderActivations() {\n    const activations = this.getActivations();\n    if (!activations?.length) return null;\n    return (\n      <sc-flex justifyContent=\"flex-start\" alignItems=\"center\">\n        <sc-tag size=\"small\">{activations?.[0]?.name}</sc-tag>\n        {activations?.length > 1 && (\n          <sc-text\n            style={{ '--font-size': 'var(--sc-font-size-small)', 'cursor': 'pointer' }}\n            onClick={e => {\n              e.preventDefault();\n              e.stopImmediatePropagation();\n              this.activationsModal = true;\n            }}\n          >\n            + {activations?.length - 1} More\n          </sc-text>\n        )}\n      </sc-flex>\n    );\n  }\n\n  showWarning() {\n    // no payment method.\n    if (this.subscription?.payment_method || this.subscription.manual_payment) {\n      return false;\n    }\n    // don't show if not looking for payment.\n    if (!['active', 'past_due', 'unpaid', 'incomplete'].includes(this.subscription?.status)) {\n      return false;\n    }\n    // handle ad_hoc.\n    if (this.subscription?.price?.ad_hoc) {\n      return this.subscription?.ad_hoc_amount !== 0;\n    }\n    // show the warning if the subscription is not free.\n    return this.subscription?.price?.amount !== 0;\n  }\n\n  render() {\n    return (\n      <div class=\"subscription-details\">\n        {this.hasPendingUpdate && (\n          <div>\n            <sc-tag size=\"small\" type=\"warning\">\n              {__('Update Scheduled', 'surecart')}\n            </sc-tag>\n          </div>\n        )}\n\n        <sc-flex alignItems=\"center\" justifyContent=\"flex-start\">\n          <sc-text aria-label={sprintf(__('Plan name - %s', 'surecart'), this.renderName())} style={{ '--font-weight': 'var(--sc-font-weight-bold)' }}>\n            {this.renderName()}\n          </sc-text>\n          {this.renderActivations()}\n        </sc-flex>\n\n        {!this.hideRenewalText && <div>{this.renderRenewalText()} </div>}\n\n        <slot />\n\n        <sc-dialog label={__('Activations', 'surecart')} onScRequestClose={() => (this.activationsModal = false)} open={!!this.activationsModal}>\n          <sc-card no-padding style={{ '--overflow': 'hidden' }}>\n            <sc-stacked-list>\n              {(this.getActivations() || []).map(activation => {\n                return (\n                  <sc-stacked-list-row style={{ '--columns': '2' }} mobileSize={0}>\n                    <sc-text style={{ '--line-height': 'var(--sc-line-height-dense)' }}>\n                      <strong>{activation?.name}</strong>\n                      <div>\n                        <sc-text style={{ '--color': 'var(--sc-color-gray-500)' }}>{activation?.fingerprint}</sc-text>\n                      </div>\n                    </sc-text>\n                    <sc-text style={{ '--color': 'var(--sc-color-gray-500)' }}>\n                      <sc-format-date type=\"timestamp\" month=\"short\" day=\"numeric\" year=\"numeric\" date={activation?.created_at}></sc-format-date>\n                    </sc-text>\n                  </sc-stacked-list-row>\n                );\n              })}\n            </sc-stacked-list>\n          </sc-card>\n        </sc-dialog>\n\n        {this.showWarning() && (\n          <div>\n            <sc-tag type=\"warning\">\n              <div class=\"subscription-details__missing-method\">\n                <sc-icon name=\"alert-triangle\"></sc-icon>\n                {__('Payment Method Missing', 'surecart')}\n              </div>\n            </sc-tag>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]}