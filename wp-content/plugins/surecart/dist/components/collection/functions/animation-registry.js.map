{"version":3,"file":"animation-registry.js","sourceRoot":"","sources":["../../src/functions/animation-registry.ts"],"names":[],"mappings":"AASA,MAAM,wBAAwB,GAAG,IAAI,GAAG,EAA4B,CAAC;AACrE,MAAM,uBAAuB,GAAG,IAAI,OAAO,EAAgC,CAAC;AAE5E,SAAS,eAAe,CAAC,SAAkC;EACzD,OAAO,SAAS,aAAT,SAAS,cAAT,SAAS,GAAI,EAAE,SAAS,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC;AAClE,CAAC;AAED,EAAE;AACF,wHAAwH;AACxH,+GAA+G;AAC/G,EAAE;AACF,MAAM,UAAU,mBAAmB,CAAC,aAAqB,EAAE,SAAkC;EAC3F,wBAAwB,CAAC,GAAG,CAAC,aAAa,EAAE,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC;AAC1E,CAAC;AAED,EAAE;AACF,qDAAqD;AACrD,EAAE;AACF,MAAM,UAAU,YAAY,CAAC,EAAW,EAAE,aAAqB,EAAE,SAAkC;EACjG,uBAAuB,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,uBAAuB,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,eAAe,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;AACvH,CAAC;AAED,EAAE;AACF,mFAAmF;AACnF,EAAE;AACF,MAAM,UAAU,YAAY,CAAC,EAAW,EAAE,aAAqB;EAC7D,MAAM,eAAe,GAAG,uBAAuB,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;EAExD,+BAA+B;EAC/B,IAAI,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAG,aAAa,CAAC,EAAE;IACpC,OAAO,eAAe,CAAC,aAAa,CAAC,CAAC;GACvC;EAED,gCAAgC;EAChC,MAAM,gBAAgB,GAAG,wBAAwB,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;EACrE,IAAI,gBAAgB,EAAE;IACpB,OAAO,gBAAgB,CAAC;GACzB;EAED,kCAAkC;EAClC,OAAO;IACL,SAAS,EAAE,EAAE;IACb,OAAO,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE;GACzB,CAAC;AACJ,CAAC","sourcesContent":["interface ElementAnimation {\n  keyframes: Keyframe[];\n  options?: KeyframeAnimationOptions;\n}\n\ninterface ElementAnimationMap {\n  [animationName: string]: ElementAnimation;\n}\n\nconst defaultAnimationRegistry = new Map<string, ElementAnimation>();\nconst customAnimationRegistry = new WeakMap<Element, ElementAnimationMap>();\n\nfunction ensureAnimation(animation: ElementAnimation | null) {\n  return animation ?? { keyframes: [], options: { duration: 0 } };\n}\n\n//\n// Sets a default animation. Components should use the `name.animation` for primary animations and `name.part.animation`\n// for secondary animations, e.g. `dialog.show` and `dialog.overlay.show`. For modifiers, use `drawer.showTop`.\n//\nexport function setDefaultAnimation(animationName: string, animation: ElementAnimation | null) {\n  defaultAnimationRegistry.set(animationName, ensureAnimation(animation));\n}\n\n//\n// Sets a custom animation for the specified element.\n//\nexport function setAnimation(el: Element, animationName: string, animation: ElementAnimation | null) {\n  customAnimationRegistry.set(el, { ...customAnimationRegistry.get(el), [animationName]: ensureAnimation(animation) });\n}\n\n//\n// Gets an element's animation. Falls back to the default if no animation is found.\n//\nexport function getAnimation(el: Element, animationName: string) {\n  const customAnimation = customAnimationRegistry.get(el);\n\n  // Check for a custom animation\n  if (customAnimation?.[animationName]) {\n    return customAnimation[animationName];\n  }\n\n  // Check for a default animation\n  const defaultAnimation = defaultAnimationRegistry.get(animationName);\n  if (defaultAnimation) {\n    return defaultAnimation;\n  }\n\n  // Fall back to an empty animation\n  return {\n    keyframes: [],\n    options: { duration: 0 },\n  };\n}\n"]}