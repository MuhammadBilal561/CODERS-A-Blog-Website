import{getQueryArg}from"@wordpress/url";export const getEnabledPriceChoices=i=>(i||[]).filter((i=>!1!==(null==i?void 0:i.enabled)));export const convertPriceChoiceToLineItemData=i=>({price_id:i.id,quantity:i.quantity});export const convertLineItemsToLineItemData=i=>((null==i?void 0:i.data)||[]).map((i=>{var e;return{...(null==i?void 0:i.id)?{id:i.id}:{},price_id:i.price.id,quantity:i.quantity,variant_id:null===(e=i.variant)||void 0===e?void 0:e.id}}));export const addLineItem=(i,e)=>{const t=convertLineItemsToLineItemData(i),n=t.findIndex((i=>i.price_id===e.price_id));return t[n]=e,t};export const calculateInitialLineItems=(i,e)=>{const t=getQueryArg(window.location.href,"prices");return t?t.map(convertPriceChoiceToLineItemData):getInitialChoiceLineItems(i,e)};export const getInitialChoiceLineItems=(i,e)=>{var t;return"all"===e?getEnabledPriceChoices(i).map(convertPriceChoiceToLineItemData):[null===(t=getEnabledPriceChoices(i).map(convertPriceChoiceToLineItemData))||void 0===t?void 0:t[0]]};export const getLineItemPriceIds=i=>((null==i?void 0:i.data)||[]).map((i=>i.price.id));export const getLineItemBumpIds=i=>((null==i?void 0:i.data)||[]).map((i=>{var e;return(null===(e=null==i?void 0:i.bump)||void 0===e?void 0:e.id)||(null==i?void 0:i.bump)}));export const getLineItemPrices=i=>((null==i?void 0:i.data)||[]).map((i=>i.price));export const getLineItemByPriceId=(i,e)=>((null==i?void 0:i.data)||[]).find((i=>i.price.id===e));export const isProductInOrder=(i,e)=>{const t=((null==(n=null==e?void 0:e.line_items)?void 0:n.data)||[]).map((i=>i.price));var n;return!!(null==t?void 0:t.length)&&!!t.find((e=>{var t;return(null===(t=null==e?void 0:e.product)||void 0===t?void 0:t.id)===i.id}))};export const isPriceInOrder=(i,e)=>{var t;return!!((null==(t=null==e?void 0:e.line_items)?void 0:t.data)||[]).map((i=>i.price.id)).find((e=>(null==i?void 0:i.id)===e))};export const isBumpInOrder=(i,e)=>{var t;return!!((null==(t=null==e?void 0:e.line_items)?void 0:t.data)||[]).map((i=>{var e;return(null===(e=null==i?void 0:i.bump)||void 0===e?void 0:e.id)||(null==i?void 0:i.bump)})).find((e=>(null==i?void 0:i.id)===e))};export const getSessionId=(i,e,t=!1)=>{if(!0===t)return!1;if(null==e?void 0:e.id)return e.id;return getQueryArg(window.location.href,"order")||window.localStorage.getItem(i)};export const hasSubscription=i=>{var e,t,n;return!!(null===(t=null===(e=null==i?void 0:i.line_items)||void 0===e?void 0:e.data)||void 0===t?void 0:t.length)&&(null===(n=null==i?void 0:i.line_items.data)||void 0===n?void 0:n.some((i=>{var e;return null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.recurring_interval_count})))};export const hasTrial=i=>null==i?void 0:i.trial_amount;export const hasPaymentPlan=i=>{var e;return hasSubscription(i)&&(null===(e=null==i?void 0:i.line_items.data)||void 0===e?void 0:e.some((i=>{var e;return null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.recurring_period_count})))};