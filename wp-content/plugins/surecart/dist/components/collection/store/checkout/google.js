import{trackEvent}from"../../functions/google";import{maybeConvertAmount}from"../../functions/currency";window.addEventListener("scAddedToCart",(i=>{var n,o,d,t,u,e,v,l,r,c,a,m;const p=i.detail;(null===(n=null==p?void 0:p.price)||void 0===n?void 0:n.product)&&trackEvent("add_to_cart",{currency:null===(o=p.price)||void 0===o?void 0:o.currency,value:maybeConvertAmount((null===(d=null==p?void 0:p.price)||void 0===d?void 0:d.amount)||0,(null===(t=p.price)||void 0===t?void 0:t.currency)||"USD"),items:[{item_id:null===(e=null===(u=p.price)||void 0===u?void 0:u.product)||void 0===e?void 0:e.id,item_name:null===(l=null===(v=p.price)||void 0===v?void 0:v.product)||void 0===l?void 0:l.name,item_variant:(p.variant_options||[]).join(" / "),price:maybeConvertAmount((null===(r=null==p?void 0:p.price)||void 0===r?void 0:r.amount)||0,(null===(c=p.price)||void 0===c?void 0:c.currency)||"USD"),currency:null===(a=p.price)||void 0===a?void 0:a.currency,quantity:p.quantity,discount:(null==p?void 0:p.discount_amount)?maybeConvertAmount((null==p?void 0:p.discount_amount)||0,(null===(m=p.price)||void 0===m?void 0:m.currency)||"USD"):0}]})})),window.addEventListener("scRemovedFromCart",(i=>{var n,o,d,t,u,e,v,l,r,c,a,m;const p=i.detail;(null===(n=null==p?void 0:p.price)||void 0===n?void 0:n.product)&&trackEvent("remove_from_cart",{currency:null===(o=p.price)||void 0===o?void 0:o.currency,value:maybeConvertAmount((null===(d=null==p?void 0:p.price)||void 0===d?void 0:d.amount)||0,(null===(t=p.price)||void 0===t?void 0:t.currency)||"USD"),items:[{item_id:null===(e=null===(u=p.price)||void 0===u?void 0:u.product)||void 0===e?void 0:e.id,item_name:null===(l=null===(v=p.price)||void 0===v?void 0:v.product)||void 0===l?void 0:l.name,item_variant:(p.variant_options||[]).join(" / "),price:maybeConvertAmount((null===(r=null==p?void 0:p.price)||void 0===r?void 0:r.amount)||0,(null===(c=p.price)||void 0===c?void 0:c.currency)||"USD"),currency:null===(a=p.price)||void 0===a?void 0:a.currency,quantity:p.quantity,discount:(null==p?void 0:p.discount_amount)?maybeConvertAmount((null==p?void 0:p.discount_amount)||0,(null===(m=p.price)||void 0===m?void 0:m.currency)||"USD"):0}]})})),window.addEventListener("scViewedCart",(i=>{var n;const o=i.detail;trackEvent("view_cart",{currency:o.currency,value:maybeConvertAmount(o.total_amount,o.currency),items:((null===(n=o.line_items)||void 0===n?void 0:n.data)||[]).map((i=>{var n,o,d,t,u,e,v,l,r;return{item_id:null===(o=null===(n=null==i?void 0:i.price)||void 0===n?void 0:n.product)||void 0===o?void 0:o.id,item_name:null===(t=null===(d=null==i?void 0:i.price)||void 0===d?void 0:d.product)||void 0===t?void 0:t.name,currency:null===(u=i.price)||void 0===u?void 0:u.currency,discount:i.discount_amount?maybeConvertAmount(i.discount_amount,null===(e=i.price)||void 0===e?void 0:e.currency):0,price:maybeConvertAmount(null===(v=null==i?void 0:i.price)||void 0===v?void 0:v.amount,null===(l=i.price)||void 0===l?void 0:l.currency),quantity:i.quantity,...(null===(r=null==i?void 0:i.variant_options)||void 0===r?void 0:r.length)?{item_variant:(i.variant_options||[]).join(" / ")}:{}}}))})})),window.addEventListener("scCheckoutInitiated",(i=>{var n;const o=i.detail;trackEvent("begin_checkout",{currency:o.currency,value:maybeConvertAmount(o.total_amount,o.currency),items:((null===(n=o.line_items)||void 0===n?void 0:n.data)||[]).map((i=>{var n,o,d,t,u,e,v,l,r;return{item_id:null===(o=null===(n=null==i?void 0:i.price)||void 0===n?void 0:n.product)||void 0===o?void 0:o.id,item_name:null===(t=null===(d=null==i?void 0:i.price)||void 0===d?void 0:d.product)||void 0===t?void 0:t.name,currency:null===(u=i.price)||void 0===u?void 0:u.currency,discount:i.discount_amount?maybeConvertAmount(i.discount_amount,null===(e=i.price)||void 0===e?void 0:e.currency):0,price:maybeConvertAmount(null===(v=null==i?void 0:i.price)||void 0===v?void 0:v.amount,null===(l=i.price)||void 0===l?void 0:l.currency),quantity:i.quantity,...(null===(r=null==i?void 0:i.variant_options)||void 0===r?void 0:r.length)?{item_variant:(i.variant_options||[]).join(" / ")}:{}}}))})})),window.addEventListener("scCheckoutCompleted",(i=>{var n;const o=i.detail;trackEvent("purchase",{transaction_id:null==o?void 0:o.id,value:maybeConvertAmount(null==o?void 0:o.total_amount,(null==o?void 0:o.currency)||"USD"),currency:(o.currency||"").toUpperCase(),items:((null===(n=null==o?void 0:o.line_items)||void 0===n?void 0:n.data)||[]).map((i=>{var n,d,t,u,e,v,l,r;return{item_id:null===(d=null===(n=null==i?void 0:i.price)||void 0===n?void 0:n.product)||void 0===d?void 0:d.id,currency:(o.currency||"").toUpperCase(),item_name:(null===(u=null===(t=null==i?void 0:i.price)||void 0===t?void 0:t.product)||void 0===u?void 0:u.name)||"",discount:(null==i?void 0:i.discount_amount)?maybeConvertAmount((null==i?void 0:i.discount_amount)||0,(null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.currency)||"USD"):0,price:maybeConvertAmount((null===(v=null==i?void 0:i.price)||void 0===v?void 0:v.amount)||0,(null===(l=null==i?void 0:i.price)||void 0===l?void 0:l.currency)||"USD"),quantity:(null==i?void 0:i.quantity)||1,...(null===(r=null==i?void 0:i.variant_options)||void 0===r?void 0:r.length)?{item_variant:(i.variant_options||[]).join(" / ")}:{}}}))})})),window.addEventListener("scPaymentInfoAdded",(i=>{var n;const o=i.detail;trackEvent("add_payment_info",{currency:o.currency,value:maybeConvertAmount(o.total_amount,o.currency),items:((null===(n=o.line_items)||void 0===n?void 0:n.data)||[]).map((i=>{var n,o,d,t,u,e,v,l,r;return{item_id:null===(o=null===(n=null==i?void 0:i.price)||void 0===n?void 0:n.product)||void 0===o?void 0:o.id,item_name:(null===(t=null===(d=null==i?void 0:i.price)||void 0===d?void 0:d.product)||void 0===t?void 0:t.name)||"",currency:null===(u=i.price)||void 0===u?void 0:u.currency,discount:i.discount_amount?maybeConvertAmount(i.discount_amount,null===(e=i.price)||void 0===e?void 0:e.currency):0,price:maybeConvertAmount(null===(v=null==i?void 0:i.price)||void 0===v?void 0:v.amount,null===(l=i.price)||void 0===l?void 0:l.currency),quantity:i.quantity,...(null===(r=null==i?void 0:i.variant_options)||void 0===r?void 0:r.length)?{item_variant:(i.variant_options||[]).join(" / ")}:{}}}))})})),window.addEventListener("scShippingInfoAdded",(i=>{var n,o,d,t,u,e,v,l;const r=i.detail,c=null===(o=null===(n=null==r?void 0:r.shipping_choices)||void 0===n?void 0:n.data)||void 0===o?void 0:o.find((i=>i.id===(null==r?void 0:r.selected_shipping_choice))),a=(null===(d=null==c?void 0:c.shipping_method)||void 0===d?void 0:d.name)||"";trackEvent("add_shipping_info",{currency:r.currency,value:maybeConvertAmount(r.total_amount,r.currency),...(null===(u=null===(t=null==r?void 0:r.discount)||void 0===t?void 0:t.promotion)||void 0===u?void 0:u.code)?{coupon:null===(v=null===(e=null==r?void 0:r.discount)||void 0===e?void 0:e.promotion)||void 0===v?void 0:v.code}:{},...a?{shipping_tier:a}:"",items:((null===(l=r.line_items)||void 0===l?void 0:l.data)||[]).map((i=>{var n,o,d,t,u,e,v,l,r;return{item_id:null===(o=null===(n=null==i?void 0:i.price)||void 0===n?void 0:n.product)||void 0===o?void 0:o.id,item_name:(null===(t=null===(d=null==i?void 0:i.price)||void 0===d?void 0:d.product)||void 0===t?void 0:t.name)||"",currency:null===(u=i.price)||void 0===u?void 0:u.currency,discount:i.discount_amount?maybeConvertAmount(i.discount_amount,null===(e=i.price)||void 0===e?void 0:e.currency):0,price:maybeConvertAmount(null===(v=null==i?void 0:i.price)||void 0===v?void 0:v.amount,null===(l=i.price)||void 0===l?void 0:l.currency),quantity:i.quantity,...(null===(r=null==i?void 0:i.variant_options)||void 0===r?void 0:r.length)?{item_variant:(i.variant_options||[]).join(" / ")}:{}}}))})}));