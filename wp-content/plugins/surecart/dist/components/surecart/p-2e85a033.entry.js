import{r as i,h as t}from"./p-cc7ce8c7.js";import{g as o}from"./p-c06b2e12.js";import{a as s}from"./p-1c2e2695.js";const n=":host{display:block}.sc-product-variation-choice-wrap{display:flex;flex-direction:column;gap:var(--sc-variation-gap, 12px)}";const e=class{constructor(t){i(this,t);this.heading=undefined;this.product=undefined;this.price=undefined;this.subscription=undefined;this.busy=false;this.variantValues=[];this.handleSubmit=this.handleSubmit.bind(this)}componentWillLoad(){var i;this.variantValues=(i=this.subscription)===null||i===void 0?void 0:i.variant_options}async handleSubmit(){var i,t,n,e;this.busy=true;const r=o({variants:(t=(i=this.product)===null||i===void 0?void 0:i.variants)===null||t===void 0?void 0:t.data,values:this.variantValues});if((n=this.price)===null||n===void 0?void 0:n.ad_hoc){return window.location.assign(s(window.location.href,{action:"confirm_amount",price_id:(e=this.price)===null||e===void 0?void 0:e.id,variant:r===null||r===void 0?void 0:r.id}))}return window.location.assign(s(window.location.href,{action:"confirm",variant:r===null||r===void 0?void 0:r.id}))}buttonText(){var i,t,o,s;if((i=this.price)===null||i===void 0?void 0:i.ad_hoc){if(((t=this.price)===null||t===void 0?void 0:t.id)===((s=(o=this.subscription)===null||o===void 0?void 0:o.price)===null||s===void 0?void 0:s.id)){return wp.i18n.__("Update Amount","surecart")}return wp.i18n.__("Choose Amount","surecart")}return wp.i18n.__("Next","surecart")}render(){var i,o;return t("sc-dashboard-module",{heading:this.heading||wp.i18n.__("Enter An Amount","surecart"),class:"subscription-switch"},t("sc-card",null,t("sc-form",{onScSubmit:this.handleSubmit},t("div",{class:"sc-product-variation-choice-wrap"},(((o=(i=this.product)===null||i===void 0?void 0:i.variant_options)===null||o===void 0?void 0:o.data)||[]).map((({name:i,values:o,id:s},n)=>{var e,r;return t("sc-select",{exportparts:"base:select__base, input, form-control, label, help-text, trigger, panel, caret, menu__base, spinner__base, empty",part:"name__input",value:((r=(e=this.subscription)===null||e===void 0?void 0:e.variant_options)===null||r===void 0?void 0:r[n])||"",onScChange:i=>{this.variantValues[n]=i.detail.value},label:i,choices:o===null||o===void 0?void 0:o.map((i=>({label:i,value:i}))),unselect:false,key:s})}))),t("sc-button",{type:"primary",full:true,submit:true,loading:this.busy},this.buttonText()," ",t("sc-icon",{name:"arrow-right",slot:"suffix"})))),this.busy&&t("sc-block-ui",{style:{zIndex:"9"}}))}};e.style=n;export{e as sc_subscription_variation_confirm};
//# sourceMappingURL=p-2e85a033.entry.js.map