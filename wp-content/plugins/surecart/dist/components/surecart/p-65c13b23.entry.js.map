{"version":3,"names":["scProductPriceCss","ScProductPrice","renderRange","_b","_a","state","this","productId","prices","length","renderPrice","_c","h","_d","renderVariantPrice","selectedVariant","variant","variants","find","id","selectedPrice","amount","price","variantAmount","originalAmount","getUpsellDiscountAmount","scratch_amount","getUpsellScratchAmount","currency","scratchAmount","saleText","adHoc","ad_hoc","trialDurationDays","trial_duration_days","setupFeeAmount","setup_fee_enabled","setup_fee_amount","setupFeeName","setup_fee_name","recurringPeriodCount","recurring_period_count","recurringInterval","recurring_interval","recurringIntervalCount","recurring_interval_count","render","Host","role","_e"],"sources":["./src/components/controllers/product/sc-product-price/sc-product-price.scss?tag=sc-product-price&encapsulation=shadow","./src/components/controllers/product/sc-product-price/sc-product-price.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","/**\n * External dependencies.\n */\nimport { Component, h, Prop, Host } from '@stencil/core';\nimport { __, _n } from '@wordpress/i18n';\n\n/**\n * Internal dependencies.\n */\nimport { state } from '@store/product';\nimport { Price, Variant } from '../../../../types';\nimport { getDiscountedAmount as getUpsellDiscountAmount, getScratchAmount as getUpsellScratchAmount } from '@store/upsell/getters';\n\n@Component({\n  tag: 'sc-product-price',\n  styleUrl: 'sc-product-price.scss',\n  shadow: true,\n})\nexport class ScProductPrice {\n  /** The product's prices. */\n  @Prop() prices: Price[];\n\n  /** The sale text */\n  @Prop() saleText: string;\n\n  /** The product id */\n  @Prop() productId: string;\n\n  renderRange() {\n    if (state[this.productId]?.prices?.length === 1) {\n      return this.renderPrice(state[this.productId]?.prices[0]);\n    }\n    return <sc-price-range prices={state[this.productId]?.prices} />;\n  }\n\n  renderVariantPrice(selectedVariant: Variant) {\n    const variant = state[this.productId]?.variants?.find(variant => variant?.id === selectedVariant?.id);\n    return this.renderPrice(state[this.productId].selectedPrice, variant?.amount);\n  }\n\n  renderPrice(price: Price, variantAmount?: number) {\n    const originalAmount = variantAmount ?? price?.amount ?? 0;\n\n    const amount = getUpsellDiscountAmount(originalAmount);\n    const scratch_amount = getUpsellScratchAmount(price?.scratch_amount);\n\n    return (\n      <sc-price\n        currency={price?.currency}\n        amount={amount}\n        scratchAmount={scratch_amount}\n        saleText={this.saleText}\n        adHoc={price?.ad_hoc}\n        trialDurationDays={price?.trial_duration_days}\n        setupFeeAmount={price?.setup_fee_enabled ? price?.setup_fee_amount : null}\n        setupFeeName={price?.setup_fee_enabled ? price?.setup_fee_name : null}\n        recurringPeriodCount={price?.recurring_period_count}\n        recurringInterval={price?.recurring_interval}\n        recurringIntervalCount={price?.recurring_interval_count}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <Host role=\"paragraph\">\n        {(() => {\n          if (state[this.productId]?.selectedVariant) {\n            return this.renderVariantPrice(state[this.productId]?.selectedVariant);\n          }\n\n          if (state[this.productId]?.selectedPrice) {\n            return this.renderPrice(state[this.productId].selectedPrice);\n          }\n\n          if (state[this.productId]?.prices?.length) {\n            return this.renderRange();\n          }\n\n          return <slot />;\n        })()}\n      </Host>\n    );\n  }\n}\n"],"mappings":"iUAAA,MAAMA,EAAoB,uB,MCkBbC,EAAc,M,gGAUzBC,c,YACE,KAAIC,GAAAC,EAAAC,EAAMC,KAAKC,cAAU,MAAAH,SAAA,SAAAA,EAAEI,UAAM,MAAAL,SAAA,SAAAA,EAAEM,UAAW,EAAG,CAC/C,OAAOH,KAAKI,aAAYC,EAAAN,EAAMC,KAAKC,cAAU,MAAAI,SAAA,SAAAA,EAAEH,OAAO,G,CAExD,OAAOI,EAAA,kBAAgBJ,QAAQK,EAAAR,EAAMC,KAAKC,cAAU,MAAAM,SAAA,SAAAA,EAAEL,Q,CAGxDM,mBAAmBC,G,QACjB,MAAMC,GAAUb,GAAAC,EAAAC,EAAMC,KAAKC,cAAU,MAAAH,SAAA,SAAAA,EAAEa,YAAQ,MAAAd,SAAA,SAAAA,EAAEe,MAAKF,IAAWA,IAAO,MAAPA,SAAO,SAAPA,EAASG,OAAOJ,IAAe,MAAfA,SAAe,SAAfA,EAAiBI,MAClG,OAAOb,KAAKI,YAAYL,EAAMC,KAAKC,WAAWa,cAAeJ,IAAO,MAAPA,SAAO,SAAPA,EAASK,O,CAGxEX,YAAYY,EAAcC,G,MACxB,MAAMC,GAAiBpB,EAAAmB,IAAa,MAAbA,SAAa,EAAbA,EAAiBD,IAAK,MAALA,SAAK,SAALA,EAAOD,UAAM,MAAAjB,SAAA,EAAAA,EAAI,EAEzD,MAAMiB,EAASI,EAAwBD,GACvC,MAAME,EAAiBC,EAAuBL,IAAK,MAALA,SAAK,SAALA,EAAOI,gBAErD,OACEd,EAAA,YACEgB,SAAUN,IAAK,MAALA,SAAK,SAALA,EAAOM,SACjBP,OAAQA,EACRQ,cAAeH,EACfI,SAAUxB,KAAKwB,SACfC,MAAOT,IAAK,MAALA,SAAK,SAALA,EAAOU,OACdC,kBAAmBX,IAAK,MAALA,SAAK,SAALA,EAAOY,oBAC1BC,gBAAgBb,IAAK,MAALA,SAAK,SAALA,EAAOc,mBAAoBd,IAAK,MAALA,SAAK,SAALA,EAAOe,iBAAmB,KACrEC,cAAchB,IAAK,MAALA,SAAK,SAALA,EAAOc,mBAAoBd,IAAK,MAALA,SAAK,SAALA,EAAOiB,eAAiB,KACjEC,qBAAsBlB,IAAK,MAALA,SAAK,SAALA,EAAOmB,uBAC7BC,kBAAmBpB,IAAK,MAALA,SAAK,SAALA,EAAOqB,mBAC1BC,uBAAwBtB,IAAK,MAALA,SAAK,SAALA,EAAOuB,0B,CAKrCC,SACE,OACElC,EAACmC,EAAI,CAACC,KAAK,aACR,M,cACC,IAAI5C,EAAAC,EAAMC,KAAKC,cAAU,MAAAH,SAAA,SAAAA,EAAEW,gBAAiB,CAC1C,OAAOT,KAAKQ,oBAAmBX,EAAAE,EAAMC,KAAKC,cAAU,MAAAJ,SAAA,SAAAA,EAAEY,gB,CAGxD,IAAIJ,EAAAN,EAAMC,KAAKC,cAAU,MAAAI,SAAA,SAAAA,EAAES,cAAe,CACxC,OAAOd,KAAKI,YAAYL,EAAMC,KAAKC,WAAWa,c,CAGhD,IAAI6B,GAAApC,EAAAR,EAAMC,KAAKC,cAAU,MAAAM,SAAA,SAAAA,EAAEL,UAAM,MAAAyC,SAAA,SAAAA,EAAExC,OAAQ,CACzC,OAAOH,KAAKJ,a,CAGd,OAAOU,EAAA,YACR,EAdA,G"}