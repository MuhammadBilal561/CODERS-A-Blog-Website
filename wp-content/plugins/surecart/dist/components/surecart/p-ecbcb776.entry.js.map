{"version":3,"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","apply","this","_inheritsLoose","subClass","superClass","create","constructor","__proto__","isImmutable","object","_map","denormalizeImmutable","schema","input","unvisit","keys","reduce","stringKey","has","set","get","getDefaultGetId","idAttribute","EntitySchema","definition","options","Error","_options","_options$idAttribute","_options$mergeStrateg","mergeStrategy","entityA","entityB","_options$processStrat","processStrategy","_options$fallbackStra","fallbackStrategy","undefined","_key","_getId","_idAttribute","_mergeStrategy","_processStrategy","_fallbackStrategy","define","_proto","entitySchema","_extends2","getId","parent","merge","fallback","id","normalize","visit","addEntity","visitedEntities","_this","entityType","some","entity","push","processedEntity","forEach","resolvedSchema","denormalize","_this2","PolymorphicSchema","schemaAttribute","_schemaAttribute","getSchemaAttribute","isSingleSchema","inferSchema","attr","normalizeValue","value","normalizedValue","denormalizeValue","schemaKey","UnionSchema","_PolymorphicSchema","ValuesSchema","output","index","_extends3","entityOrId","validateSchema","isArray","Array","getValues","map","values","ArraySchema","filter","_normalize","localSchema","resolvedLocalSchema","_denormalize","ObjectSchema","_len","args","concat","_len2","_key2","method","addEntities","entities","existingEntity","Entity","Union","Values","normalize$1","result","integration","account","price","product","product_group","purchase","payment_method","card","invoice","current_period","refund","charge","coupon","promotion","order","customer","subscription","prices","data","purchases","promotions","normalizeEntities","getPricesAndProducts","async","ids","archived","apiFetch","path","addQueryArgs","expand","normalizePrices","products","scPriceChoiceCss","wp","i18n","__","h","Fragment","type","amount","currency","intervalString","sprintf","_n","trial_duration_days","setup_fee_enabled","_g","setup_fee_amount","class","Math","abs","setup_fee_name","_h","openWormhole","ScPriceChoice"],"sources":["../../node_modules/normalizr/dist/normalizr.es.js","../admin/schema/entities.js","../admin/schema/index.js","./src/services/fetch/index.ts","./src/components/controllers/checkout-form/price-choice/sc-price-choice.scss?tag=sc-price-choice","./src/components/controllers/checkout-form/price-choice/sc-price-choice.tsx"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\n/**\n * Helpers to enable Immutable compatibility *without* bringing in\n * the 'immutable' package as a dependency.\n */\n\n/**\n * Check if an object is immutable by checking if it has a key specific\n * to the immutable library.\n *\n * @param  {any} object\n * @return {bool}\n */\nfunction isImmutable(object) {\n  return !!(object && typeof object.hasOwnProperty === 'function' && (object.hasOwnProperty('__ownerID') || // Immutable.Map\n  object._map && object._map.hasOwnProperty('__ownerID'))); // Immutable.Record\n}\n/**\n * Denormalize an immutable entity.\n *\n * @param  {Schema} schema\n * @param  {Immutable.Map|Immutable.Record} input\n * @param  {function} unvisit\n * @param  {function} getDenormalizedEntity\n * @return {Immutable.Map|Immutable.Record}\n */\n\nfunction denormalizeImmutable(schema, input, unvisit) {\n  return Object.keys(schema).reduce(function (object, key) {\n    // Immutable maps cast keys to strings on write so we need to ensure\n    // we're accessing them using string keys.\n    var stringKey = \"\" + key;\n\n    if (object.has(stringKey)) {\n      return object.set(stringKey, unvisit(object.get(stringKey), schema[stringKey]));\n    } else {\n      return object;\n    }\n  }, input);\n}\n\nvar getDefaultGetId = function getDefaultGetId(idAttribute) {\n  return function (input) {\n    return isImmutable(input) ? input.get(idAttribute) : input[idAttribute];\n  };\n};\n\nvar EntitySchema = /*#__PURE__*/function () {\n  function EntitySchema(key, definition, options) {\n    if (definition === void 0) {\n      definition = {};\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!key || typeof key !== 'string') {\n      throw new Error(\"Expected a string key for Entity, but found \" + key + \".\");\n    }\n\n    var _options = options,\n        _options$idAttribute = _options.idAttribute,\n        idAttribute = _options$idAttribute === void 0 ? 'id' : _options$idAttribute,\n        _options$mergeStrateg = _options.mergeStrategy,\n        mergeStrategy = _options$mergeStrateg === void 0 ? function (entityA, entityB) {\n      return _extends({}, entityA, entityB);\n    } : _options$mergeStrateg,\n        _options$processStrat = _options.processStrategy,\n        processStrategy = _options$processStrat === void 0 ? function (input) {\n      return _extends({}, input);\n    } : _options$processStrat,\n        _options$fallbackStra = _options.fallbackStrategy,\n        fallbackStrategy = _options$fallbackStra === void 0 ? function (key, schema) {\n      return undefined;\n    } : _options$fallbackStra;\n    this._key = key;\n    this._getId = typeof idAttribute === 'function' ? idAttribute : getDefaultGetId(idAttribute);\n    this._idAttribute = idAttribute;\n    this._mergeStrategy = mergeStrategy;\n    this._processStrategy = processStrategy;\n    this._fallbackStrategy = fallbackStrategy;\n    this.define(definition);\n  }\n\n  var _proto = EntitySchema.prototype;\n\n  _proto.define = function define(definition) {\n    this.schema = Object.keys(definition).reduce(function (entitySchema, key) {\n      var _extends2;\n\n      var schema = definition[key];\n      return _extends({}, entitySchema, (_extends2 = {}, _extends2[key] = schema, _extends2));\n    }, this.schema || {});\n  };\n\n  _proto.getId = function getId(input, parent, key) {\n    return this._getId(input, parent, key);\n  };\n\n  _proto.merge = function merge(entityA, entityB) {\n    return this._mergeStrategy(entityA, entityB);\n  };\n\n  _proto.fallback = function fallback(id, schema) {\n    return this._fallbackStrategy(id, schema);\n  };\n\n  _proto.normalize = function normalize(input, parent, key, visit, addEntity, visitedEntities) {\n    var _this = this;\n\n    var id = this.getId(input, parent, key);\n    var entityType = this.key;\n\n    if (!(entityType in visitedEntities)) {\n      visitedEntities[entityType] = {};\n    }\n\n    if (!(id in visitedEntities[entityType])) {\n      visitedEntities[entityType][id] = [];\n    }\n\n    if (visitedEntities[entityType][id].some(function (entity) {\n      return entity === input;\n    })) {\n      return id;\n    }\n\n    visitedEntities[entityType][id].push(input);\n\n    var processedEntity = this._processStrategy(input, parent, key);\n\n    Object.keys(this.schema).forEach(function (key) {\n      if (processedEntity.hasOwnProperty(key) && typeof processedEntity[key] === 'object') {\n        var schema = _this.schema[key];\n        var resolvedSchema = typeof schema === 'function' ? schema(input) : schema;\n        processedEntity[key] = visit(processedEntity[key], processedEntity, key, resolvedSchema, addEntity, visitedEntities);\n      }\n    });\n    addEntity(this, processedEntity, input, parent, key);\n    return id;\n  };\n\n  _proto.denormalize = function denormalize(entity, unvisit) {\n    var _this2 = this;\n\n    if (isImmutable(entity)) {\n      return denormalizeImmutable(this.schema, entity, unvisit);\n    }\n\n    Object.keys(this.schema).forEach(function (key) {\n      if (entity.hasOwnProperty(key)) {\n        var schema = _this2.schema[key];\n        entity[key] = unvisit(entity[key], schema);\n      }\n    });\n    return entity;\n  };\n\n  _createClass(EntitySchema, [{\n    key: \"key\",\n    get: function get() {\n      return this._key;\n    }\n  }, {\n    key: \"idAttribute\",\n    get: function get() {\n      return this._idAttribute;\n    }\n  }]);\n\n  return EntitySchema;\n}();\n\nvar PolymorphicSchema = /*#__PURE__*/function () {\n  function PolymorphicSchema(definition, schemaAttribute) {\n    if (schemaAttribute) {\n      this._schemaAttribute = typeof schemaAttribute === 'string' ? function (input) {\n        return input[schemaAttribute];\n      } : schemaAttribute;\n    }\n\n    this.define(definition);\n  }\n\n  var _proto = PolymorphicSchema.prototype;\n\n  _proto.define = function define(definition) {\n    this.schema = definition;\n  };\n\n  _proto.getSchemaAttribute = function getSchemaAttribute(input, parent, key) {\n    return !this.isSingleSchema && this._schemaAttribute(input, parent, key);\n  };\n\n  _proto.inferSchema = function inferSchema(input, parent, key) {\n    if (this.isSingleSchema) {\n      return this.schema;\n    }\n\n    var attr = this.getSchemaAttribute(input, parent, key);\n    return this.schema[attr];\n  };\n\n  _proto.normalizeValue = function normalizeValue(value, parent, key, visit, addEntity, visitedEntities) {\n    var schema = this.inferSchema(value, parent, key);\n\n    if (!schema) {\n      return value;\n    }\n\n    var normalizedValue = visit(value, parent, key, schema, addEntity, visitedEntities);\n    return this.isSingleSchema || normalizedValue === undefined || normalizedValue === null ? normalizedValue : {\n      id: normalizedValue,\n      schema: this.getSchemaAttribute(value, parent, key)\n    };\n  };\n\n  _proto.denormalizeValue = function denormalizeValue(value, unvisit) {\n    var schemaKey = isImmutable(value) ? value.get('schema') : value.schema;\n\n    if (!this.isSingleSchema && !schemaKey) {\n      return value;\n    }\n\n    var id = this.isSingleSchema ? undefined : isImmutable(value) ? value.get('id') : value.id;\n    var schema = this.isSingleSchema ? this.schema : this.schema[schemaKey];\n    return unvisit(id || value, schema);\n  };\n\n  _createClass(PolymorphicSchema, [{\n    key: \"isSingleSchema\",\n    get: function get() {\n      return !this._schemaAttribute;\n    }\n  }]);\n\n  return PolymorphicSchema;\n}();\n\nvar UnionSchema = /*#__PURE__*/function (_PolymorphicSchema) {\n  _inheritsLoose(UnionSchema, _PolymorphicSchema);\n\n  function UnionSchema(definition, schemaAttribute) {\n    if (!schemaAttribute) {\n      throw new Error('Expected option \"schemaAttribute\" not found on UnionSchema.');\n    }\n\n    return _PolymorphicSchema.call(this, definition, schemaAttribute) || this;\n  }\n\n  var _proto = UnionSchema.prototype;\n\n  _proto.normalize = function normalize(input, parent, key, visit, addEntity, visitedEntities) {\n    return this.normalizeValue(input, parent, key, visit, addEntity, visitedEntities);\n  };\n\n  _proto.denormalize = function denormalize(input, unvisit) {\n    return this.denormalizeValue(input, unvisit);\n  };\n\n  return UnionSchema;\n}(PolymorphicSchema);\n\nvar ValuesSchema = /*#__PURE__*/function (_PolymorphicSchema) {\n  _inheritsLoose(ValuesSchema, _PolymorphicSchema);\n\n  function ValuesSchema() {\n    return _PolymorphicSchema.apply(this, arguments) || this;\n  }\n\n  var _proto = ValuesSchema.prototype;\n\n  _proto.normalize = function normalize(input, parent, key, visit, addEntity, visitedEntities) {\n    var _this = this;\n\n    return Object.keys(input).reduce(function (output, key, index) {\n      var _extends2;\n\n      var value = input[key];\n      return value !== undefined && value !== null ? _extends({}, output, (_extends2 = {}, _extends2[key] = _this.normalizeValue(value, input, key, visit, addEntity, visitedEntities), _extends2)) : output;\n    }, {});\n  };\n\n  _proto.denormalize = function denormalize(input, unvisit) {\n    var _this2 = this;\n\n    return Object.keys(input).reduce(function (output, key) {\n      var _extends3;\n\n      var entityOrId = input[key];\n      return _extends({}, output, (_extends3 = {}, _extends3[key] = _this2.denormalizeValue(entityOrId, unvisit), _extends3));\n    }, {});\n  };\n\n  return ValuesSchema;\n}(PolymorphicSchema);\n\nvar validateSchema = function validateSchema(definition) {\n  var isArray = Array.isArray(definition);\n\n  if (isArray && definition.length > 1) {\n    throw new Error(\"Expected schema definition to be a single schema, but found \" + definition.length + \".\");\n  }\n\n  return definition[0];\n};\n\nvar getValues = function getValues(input) {\n  return Array.isArray(input) ? input : Object.keys(input).map(function (key) {\n    return input[key];\n  });\n};\n\nvar normalize = function normalize(schema, input, parent, key, visit, addEntity, visitedEntities) {\n  schema = validateSchema(schema);\n  var values = getValues(input); // Special case: Arrays pass *their* parent on to their children, since there\n  // is not any special information that can be gathered from themselves directly\n\n  return values.map(function (value, index) {\n    return visit(value, parent, key, schema, addEntity, visitedEntities);\n  });\n};\nvar denormalize = function denormalize(schema, input, unvisit) {\n  schema = validateSchema(schema);\n  return input && input.map ? input.map(function (entityOrId) {\n    return unvisit(entityOrId, schema);\n  }) : input;\n};\n\nvar ArraySchema = /*#__PURE__*/function (_PolymorphicSchema) {\n  _inheritsLoose(ArraySchema, _PolymorphicSchema);\n\n  function ArraySchema() {\n    return _PolymorphicSchema.apply(this, arguments) || this;\n  }\n\n  var _proto = ArraySchema.prototype;\n\n  _proto.normalize = function normalize(input, parent, key, visit, addEntity, visitedEntities) {\n    var _this = this;\n\n    var values = getValues(input);\n    return values.map(function (value, index) {\n      return _this.normalizeValue(value, parent, key, visit, addEntity, visitedEntities);\n    }).filter(function (value) {\n      return value !== undefined && value !== null;\n    });\n  };\n\n  _proto.denormalize = function denormalize(input, unvisit) {\n    var _this2 = this;\n\n    return input && input.map ? input.map(function (value) {\n      return _this2.denormalizeValue(value, unvisit);\n    }) : input;\n  };\n\n  return ArraySchema;\n}(PolymorphicSchema);\n\nvar _normalize = function normalize(schema, input, parent, key, visit, addEntity, visitedEntities) {\n  var object = _extends({}, input);\n\n  Object.keys(schema).forEach(function (key) {\n    var localSchema = schema[key];\n    var resolvedLocalSchema = typeof localSchema === 'function' ? localSchema(input) : localSchema;\n    var value = visit(input[key], input, key, resolvedLocalSchema, addEntity, visitedEntities);\n\n    if (value === undefined || value === null) {\n      delete object[key];\n    } else {\n      object[key] = value;\n    }\n  });\n  return object;\n};\n\nvar _denormalize = function denormalize(schema, input, unvisit) {\n  if (isImmutable(input)) {\n    return denormalizeImmutable(schema, input, unvisit);\n  }\n\n  var object = _extends({}, input);\n\n  Object.keys(schema).forEach(function (key) {\n    if (object[key] != null) {\n      object[key] = unvisit(object[key], schema[key]);\n    }\n  });\n  return object;\n};\n\nvar ObjectSchema = /*#__PURE__*/function () {\n  function ObjectSchema(definition) {\n    this.define(definition);\n  }\n\n  var _proto = ObjectSchema.prototype;\n\n  _proto.define = function define(definition) {\n    this.schema = Object.keys(definition).reduce(function (entitySchema, key) {\n      var _extends2;\n\n      var schema = definition[key];\n      return _extends({}, entitySchema, (_extends2 = {}, _extends2[key] = schema, _extends2));\n    }, this.schema || {});\n  };\n\n  _proto.normalize = function normalize() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _normalize.apply(void 0, [this.schema].concat(args));\n  };\n\n  _proto.denormalize = function denormalize() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _denormalize.apply(void 0, [this.schema].concat(args));\n  };\n\n  return ObjectSchema;\n}();\n\nvar visit = function visit(value, parent, key, schema, addEntity, visitedEntities) {\n  if (typeof value !== 'object' || !value) {\n    return value;\n  }\n\n  if (typeof schema === 'object' && (!schema.normalize || typeof schema.normalize !== 'function')) {\n    var method = Array.isArray(schema) ? normalize : _normalize;\n    return method(schema, value, parent, key, visit, addEntity, visitedEntities);\n  }\n\n  return schema.normalize(value, parent, key, visit, addEntity, visitedEntities);\n};\n\nvar addEntities = function addEntities(entities) {\n  return function (schema, processedEntity, value, parent, key) {\n    var schemaKey = schema.key;\n    var id = schema.getId(value, parent, key);\n\n    if (!(schemaKey in entities)) {\n      entities[schemaKey] = {};\n    }\n\n    var existingEntity = entities[schemaKey][id];\n\n    if (existingEntity) {\n      entities[schemaKey][id] = schema.merge(existingEntity, processedEntity);\n    } else {\n      entities[schemaKey][id] = processedEntity;\n    }\n  };\n};\n\nvar schema = {\n  Array: ArraySchema,\n  Entity: EntitySchema,\n  Object: ObjectSchema,\n  Union: UnionSchema,\n  Values: ValuesSchema\n};\nvar normalize$1 = function normalize(input, schema) {\n  if (!input || typeof input !== 'object') {\n    throw new Error(\"Unexpected input given to normalize. Expected type to be \\\"object\\\", found \\\"\" + (input === null ? 'null' : typeof input) + \"\\\".\");\n  }\n\n  var entities = {};\n  var addEntity = addEntities(entities);\n  var visitedEntities = {};\n  var result = visit(input, input, null, schema, addEntity, visitedEntities);\n  return {\n    entities: entities,\n    result: result\n  };\n};\n\nvar unvisitEntity = function unvisitEntity(id, schema, unvisit, getEntity, cache) {\n  var entity = getEntity(id, schema);\n\n  if (entity === undefined && schema instanceof EntitySchema) {\n    entity = schema.fallback(id, schema);\n  }\n\n  if (typeof entity !== 'object' || entity === null) {\n    return entity;\n  }\n\n  if (!cache[schema.key]) {\n    cache[schema.key] = {};\n  }\n\n  if (!cache[schema.key][id]) {\n    // Ensure we don't mutate it non-immutable objects\n    var entityCopy = isImmutable(entity) ? entity : _extends({}, entity); // Need to set this first so that if it is referenced further within the\n    // denormalization the reference will already exist.\n\n    cache[schema.key][id] = entityCopy;\n    cache[schema.key][id] = schema.denormalize(entityCopy, unvisit);\n  }\n\n  return cache[schema.key][id];\n};\n\nvar getUnvisit = function getUnvisit(entities) {\n  var cache = {};\n  var getEntity = getEntities(entities);\n  return function unvisit(input, schema) {\n    if (typeof schema === 'object' && (!schema.denormalize || typeof schema.denormalize !== 'function')) {\n      var method = Array.isArray(schema) ? denormalize : _denormalize;\n      return method(schema, input, unvisit);\n    }\n\n    if (input === undefined || input === null) {\n      return input;\n    }\n\n    if (schema instanceof EntitySchema) {\n      return unvisitEntity(input, schema, unvisit, getEntity, cache);\n    }\n\n    return schema.denormalize(input, unvisit);\n  };\n};\n\nvar getEntities = function getEntities(entities) {\n  var isImmutable$1 = isImmutable(entities);\n  return function (entityOrId, schema) {\n    var schemaKey = schema.key;\n\n    if (typeof entityOrId === 'object') {\n      return entityOrId;\n    }\n\n    if (isImmutable$1) {\n      return entities.getIn([schemaKey, entityOrId.toString()]);\n    }\n\n    return entities[schemaKey] && entities[schemaKey][entityOrId];\n  };\n};\n\nvar denormalize$1 = function denormalize(input, schema, entities) {\n  if (typeof input !== 'undefined') {\n    return getUnvisit(entities)(input, schema);\n  }\n};\n\nexport { denormalize$1 as denormalize, normalize$1 as normalize, schema };\n","import { schema } from 'normalizr';\n\nexport default {\n\tintegration: new schema.Entity('integration'),\n\taccount: new schema.Entity('account'),\n\tprice: new schema.Entity('price'),\n\tproduct: new schema.Entity('product'),\n\tproduct_group: new schema.Entity('product_group'),\n\tpurchase: new schema.Entity('purchase'),\n\tpayment_method: new schema.Entity('payment_method'),\n\tcard: new schema.Entity('card'),\n\tinvoice: new schema.Entity('invoice'),\n\tcurrent_period: new schema.Entity('current_period'),\n\trefund: new schema.Entity('refund'),\n\tcharge: new schema.Entity('charge'),\n\tcoupon: new schema.Entity('coupon'),\n\tpromotion: new schema.Entity('promotion'),\n\torder: new schema.Entity('order'),\n\tcustomer: new schema.Entity('customer'),\n\tsubscription: new schema.Entity('subscription'),\n\tproduct_group: new schema.Entity('product_group'),\n};\n","import entities from './entities';\nimport { normalize, schema } from 'normalizr';\n\nconst {\n\tprice,\n\tproduct,\n\tpurchase,\n\tpayment_method,\n\tcard,\n\tinvoice,\n\trefund,\n\tcharge,\n\tcoupon,\n\tpromotion,\n\torder,\n\tintegration,\n\tcustomer,\n\tproduct_group,\n\tsubscription,\n} = entities;\n\nproduct.define({\n\tprices: {\n\t\tdata: [price],\n\t},\n\tproduct_group,\n});\n\nprice.define({\n\tproduct,\n});\n\ninvoice.define({\n\tpurchases: {\n\t\tdata: [purchase],\n\t},\n\tcharge,\n\tcustomer,\n\tsubscription,\n});\n\norder.define({\n\tpurchases: {\n\t\tdata: [purchase],\n\t},\n\tcharge,\n\tcustomer,\n\tsubscription,\n});\n\ncharge.define({\n\torder,\n\tinvoice,\n});\n\nsubscription.define({\n\tcurrent_period: invoice,\n\tpurchase,\n\tprice,\n\tpayment_method,\n\torder,\n\tcustomer,\n});\n\nrefund.define({\n\tcharge,\n\tcustomer,\n});\n\npurchase.define({\n\torder,\n\tproduct,\n\tsubscription,\n});\n\npayment_method.define({\n\tcard,\n});\n\ncoupon.define({\n\tpromotions: {\n\t\tdata: [promotion],\n\t},\n});\n\nproduct_group.define({});\nintegration.define({});\n\nexport const normalizeEntities = (data) => {\n\tif (entities?.[data?.[0]?.object]) {\n\t\treturn normalize(data, [entities[data?.[0]?.object]]);\n\t}\n\treturn {};\n};\n\nexport const normalizeEntity = (data) => {\n\tif (entities?.[data?.object]) {\n\t\treturn normalize(data, entities[data.object]);\n\t}\n\treturn {};\n};\n\n// normalize price data\nexport const normalizePrices = (prices) => {\n\treturn normalize({ prices }, { prices: [entities.price] });\n};\n\n// normalize price data\nexport const normalizeProducts = (products) => {\n\treturn normalize({ products }, { products: [entities.product] });\n};\n\n// normalize price data\nexport const normalizeProduct = (data) => {\n\treturn normalize(data, entities.product);\n};\n\nexport { normalize, schema };\n","import { normalizeEntities } from '../../../../admin/schema';\nimport apiFetch from '../../functions/fetch';\nimport { Price, Product } from '../../types';\nimport { addQueryArgs } from '@wordpress/url';\n\nconst path = 'surecart/v1/products/';\n\nexport const getPricesAndProducts = async ({ ids, archived = false }: { ids: Array<string>; archived: boolean }) => {\n  const prices = (await apiFetch({\n    path: addQueryArgs('surecart/v1/prices/', {\n      ids,\n      archived,\n      expand: ['product'],\n    }),\n  })) as Array<Price>;\n\n  return normalizePrices(prices);\n};\nexport const normalizePrices = (prices: Array<Price>) => {\n  const { entities } = normalizeEntities(prices);\n  return {\n    prices: entities?.price,\n    products: entities?.product,\n  };\n};\n\n/**\n * Get prices\n */\nexport const getProducts = async ({ query }: { query: Object }) => {\n  return (await apiFetch({\n    path: addQueryArgs(path, query),\n  })) as Array<Product>;\n};\n",":host {\n  display: block;\n  min-width: 0;\n  width: 100%;\n}\n\nsc-choice-container {\n  container-type: inline-size;\n}\n\n.price-choice  {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  line-height: var(--sc-line-height-dense);\n  gap: var(--sc-spacing-small);\n\n  &__name {\n    color: var(--sc-price-choice-name-color, var(--sc-input-label-color));\n    font-size: var(--sc-price-choice-name-size, var(--sc-input-label-font-size-medium));\n    font-weight: var(--sc-price-choice-name-font-weight, var(--sc-font-weight-bold));\n    text-transform: var(--sc-price-choice-text-transform, var(--sc-input-label-text-transform, none));\n    display: -webkit-box;\n    display: -moz-box;\n    -webkit-box-orient: vertical;\n    -moz-box-orient: vertical;\n    -webkit-line-clamp: 3;\n    -moz-box-lines: 3;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  &__description {\n    color: var(--sc-input-help-text-color);\n  }\n\n  > *:not(:first-child):last-child {\n    text-align: right;\n  }\n\n  &__details {\n    flex: 1 0 50%;\n    display: grid;\n    gap: var(--sc-spacing-xxx-small);\n  }\n\n  &__trial,\n  &__setup-fee,\n  &__price {\n    font-size: var(--sc-font-size-small);\n    color: var(--sc-input-help-text-color);\n  }\n\n  &__price {\n    color: var(--sc-input-label-color);\n    font-weight: var(--sc-price-choice-price-font-weight, var(--sc-font-weight-normal));\n  }\n}\n\n@container (max-width: 325px) {\n  .price-choice {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: var(--sc-spacing-xx-small);\n    > *:not(:first-child):last-child {\n      text-align: initial;\n    }\n  }\n}\n","import { Component, Event, EventEmitter, Fragment, h, Host, Prop, State, Watch } from '@stencil/core';\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { openWormhole } from 'stencil-wormhole';\n\nimport { isPriceInOrder } from '../../../../functions/line-items';\nimport { intervalString } from '../../../../functions/price';\nimport { getPricesAndProducts } from '../../../../services/fetch';\nimport { LineItemData, Checkout, Price, Prices, Product, Products, ResponseError } from '../../../../types';\n@Component({\n  tag: 'sc-price-choice',\n  styleUrl: 'sc-price-choice.scss',\n  shadow: false,\n})\nexport class ScPriceChoice {\n  private adHocInput: HTMLScPriceInputElement;\n  private choice: HTMLScChoiceContainerElement;\n\n  /** Id of the price. */\n  @Prop({ reflect: true }) priceId: string;\n\n  /** Stores the price */\n  @Prop({ mutable: true }) price: Price;\n\n  /** Stores the price */\n  @Prop({ mutable: true }) product: Product;\n\n  /** Is this loading */\n  @Prop({ mutable: true }) loading: boolean = false;\n\n  /** Label for the choice. */\n  @Prop() label: string;\n\n  /** Show the label */\n  @Prop() showLabel: boolean = true;\n\n  /** Show the price amount */\n  @Prop() showPrice: boolean = true;\n\n  /** Show the radio/checkbox control */\n  @Prop() showControl: boolean = true;\n\n  /** Label for the choice. */\n  @Prop() description: string;\n\n  /** Price entities */\n  @Prop() prices: Prices = {};\n\n  /** Product entity */\n  @Prop() products: Products = {};\n\n  /** Session */\n  @Prop() order: Checkout;\n\n  /** Default quantity */\n  @Prop() quantity: number = 1;\n\n  /** Choice Type */\n  @Prop() type: 'checkbox' | 'radio';\n\n  /** Is this checked by default */\n  @Prop({ reflect: true, mutable: true }) checked: boolean = false;\n\n  /** Errors from response */\n  @Prop() error: ResponseError;\n\n  /** Is this an ad-hoc price choice */\n  @Prop({ mutable: true, reflect: true }) isAdHoc: Boolean;\n\n  /** Is this blank? */\n  @Prop() blank: boolean = false;\n\n  /** Toggle line item event */\n  @Event() scUpdateLineItem: EventEmitter<LineItemData>;\n\n  /** Toggle line item event */\n  @Event() scRemoveLineItem: EventEmitter<LineItemData>;\n\n  /** Add entities */\n  @Event() scAddEntities: EventEmitter<any>;\n\n  /** Stores the error message */\n  @State() errorMessage: string;\n\n  /** Stores the error message */\n  @State() adHocErrorMessage: string;\n\n  /** Refetch if price changes */\n  @Watch('priceId')\n  handlePriceIdChage() {\n    if (this.price && this.price?.id === this.priceId) return;\n    this.fetchPriceWithProduct();\n  }\n\n  /** Keep price up to date. */\n  @Watch('prices')\n  @Watch('products')\n  handlePricesChange() {\n    if (!Object.keys(this.prices || {}).length || !Object.keys(this.products || {}).length) return;\n    this.price = this?.prices?.[this.priceId];\n    this.product = this?.products?.[this?.price?.product as string];\n  }\n\n  @Watch('price')\n  handlePriseChange() {\n    this.isAdHoc = this?.price?.ad_hoc;\n  }\n\n  @Watch('error')\n  handleErrorsChange() {\n    const error = (this?.error?.additional_errors || []).find(error => error?.data?.attribute === 'line_items.ad_hoc_amount');\n    this.adHocErrorMessage = error?.message ? error?.message : '';\n  }\n\n  @Watch('checked')\n  handleCheckedChange() {\n    if (this.price?.ad_hoc && this.choice.checked) {\n      setTimeout(() => {\n        this.adHocInput.triggerFocus();\n      }, 50);\n      return;\n    }\n  }\n\n  /** Fetch on load */\n  componentWillLoad() {\n    if (!this.price) {\n      this.fetchPriceWithProduct();\n    }\n  }\n\n  /** Fetch prices and products */\n  async fetchPriceWithProduct() {\n    if (!this.priceId) return;\n    try {\n      this.loading = true;\n      const { products, prices } = await getPricesAndProducts({\n        archived: false,\n        ids: [this.priceId],\n      });\n      // add to central store.\n      this.scAddEntities.emit({ prices, products });\n    } catch (err) {\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  /** Is this price in the checkout session. */\n  isInOrder() {\n    return isPriceInOrder(this.price, this.order);\n  }\n\n  /** Is this checked */\n  isChecked() {\n    return this.isInOrder();\n  }\n\n  onChangeAdHoc(e) {\n    this.scUpdateLineItem.emit({ price_id: this.priceId, quantity: this.quantity, ad_hoc_amount: e.target.value });\n  }\n\n  getLineItem() {\n    return (this.order?.line_items?.data || []).find(lineItem => lineItem.price.id === this.priceId);\n  }\n\n  /** Show we show the ad hoc price box */\n  showAdHoc() {\n    if (!this.price?.ad_hoc) {\n      return false;\n    }\n    if (this.isInOrder()) {\n      return true;\n    }\n    return this?.choice?.checked;\n  }\n\n  renderEmpty() {\n    if (window?.wp?.blocks) {\n      return (\n        <sc-alert type=\"danger\" open style={{ margin: '0px' }}>\n          {__('This product has been archived.', 'surecart')}\n        </sc-alert>\n      );\n    }\n    return <Host style={{ display: 'none' }}></Host>;\n  }\n\n  renderPrice() {\n    return (\n      <Fragment>\n        <sc-format-number type=\"currency\" value={this.price.amount} currency={this.price.currency}></sc-format-number>\n        {intervalString(this.price, {\n          showOnce: true,\n          abbreviate: true,\n          labels: {\n            interval: '/',\n            period:\n              /** translators: used as in time period: \"for 3 months\" */\n              __('for', 'surecart'),\n          },\n        })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    if (this.loading) {\n      return (\n        <sc-choice-container showControl={this.showControl} name=\"loading\" disabled>\n          <div class=\"price-choice\">\n            <sc-skeleton style={{ width: '60px', display: 'inline-block' }}></sc-skeleton>\n            <sc-skeleton style={{ width: '80px', display: 'inline-block' }}></sc-skeleton>\n          </div>\n        </sc-choice-container>\n      );\n    }\n\n    // we need an active price.\n    if (!this?.price?.id || this.price?.archived) return this.renderEmpty();\n\n    // product needs to be active\n    if (this.product?.archived) {\n      return this.renderEmpty();\n    }\n\n    return (\n      <sc-choice-container\n        ref={el => (this.choice = el as HTMLScChoiceContainerElement)}\n        value={this.priceId}\n        type={this.type}\n        showControl={this.showControl}\n        checked={this.isChecked()}\n      >\n        <div class=\"price-choice\">\n          {this.showLabel && (\n            <div class=\"price-choice__title\">\n              <div class=\"price-choice__name\">{this.label || this?.price?.name || this?.product?.name}</div>\n              {!!this.description && <div class=\"price-choice__description\">{this.description}</div>}\n            </div>\n          )}\n\n          {this.showPrice && (\n            <div class=\"price-choice__details\">\n              <div class=\"price-choice__price\">\n                {this.price?.ad_hoc ? (\n                  __('Custom Amount', 'surecart')\n                ) : (\n                  <Fragment>\n                    <sc-format-number type=\"currency\" value={this.price.amount} currency={this.price.currency}></sc-format-number>\n                    {intervalString(this.price, {\n                      showOnce: true,\n                      abbreviate: true,\n                      labels: {\n                        interval: '/',\n                        period:\n                          /** translators: used as in time period: \"for 3 months\" */\n                          __('for', 'surecart'),\n                      },\n                    })}\n                  </Fragment>\n                )}\n              </div>\n\n              {!!this.price.trial_duration_days && (\n                <div class=\"price-choice__trial\">\n                  {sprintf(_n('Starting in %s day', 'Starting in %s days', this.price.trial_duration_days, 'surecart'), this.price.trial_duration_days)}\n                </div>\n              )}\n\n              {!!this.price.setup_fee_enabled && this.price?.setup_fee_amount && (\n                <div class=\"price-choice__setup-fee\">\n                  <sc-format-number type=\"currency\" value={Math.abs(this.price.setup_fee_amount)} currency={this.price.currency}></sc-format-number>{' '}\n                  {this.price.setup_fee_name || (this.price?.setup_fee_amount < 0 ? __('Discount', 'surecart') : __('Setup Fee', 'surecart'))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </sc-choice-container>\n    );\n  }\n}\n\nopenWormhole(ScPriceChoice, ['prices', 'products', 'order', 'error'], false);\n"],"mappings":"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"}