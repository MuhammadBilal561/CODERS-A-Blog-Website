import{r as i,h as t}from"./p-cc7ce8c7.js";import{a as o}from"./p-18e45a13.js";import{U as r}from"./p-13dcb064.js";import{g as s}from"./p-4d73f82a.js";import{a as n}from"./p-1c2e2695.js";const e=":host{display:block;max-width:800px;margin:auto}::slotted(*:not(:last-child)),sc-form form>*:not(:last-child){margin-bottom:var(--sc-form-row-spacing-large)}.order-confirmation__content{color:var(--sc-order-confirmation-color, var(--sc-color-gray-500))}.order-confirmation__content.hidden{display:none}::part(line-items){display:grid;gap:0.5em}";const a=class{constructor(t){i(this,t);this.order=undefined;this.loading=false;this.error=undefined}componentWillLoad(){r.create(this,this.state());this.getSession()}getSessionId(){var i;if((i=this.order)===null||i===void 0?void 0:i.id)return this.order.id;return s(window.location.href,"sc_order")}async getSession(){var i;if(!this.getSessionId())return;if((i=this.order)===null||i===void 0?void 0:i.id)return;try{this.loading=true;this.order=await await o({path:n(`surecart/v1/checkouts/${this.getSessionId()}`,{expand:["line_items","line_item.price","line_item.fees","price.product","customer","customer.shipping_address","payment_intent","discount","manual_payment_method","discount.promotion","billing_address","shipping_address"],refresh_status:true})})}catch(i){if(i===null||i===void 0?void 0:i.message){this.error=i.message}else{this.error=wp.i18n.__("Something went wrong","surecart")}}finally{this.loading=false}}state(){var i,t;const o=(i=this.order)===null||i===void 0?void 0:i.manual_payment_method;return{processor:"stripe",loading:this.loading,orderId:this.getSessionId(),order:this.order,customer:(t=this.order)===null||t===void 0?void 0:t.customer,manualPaymentTitle:o===null||o===void 0?void 0:o.name,manualPaymentInstructions:o===null||o===void 0?void 0:o.instructions}}renderOnHold(){var i,o,r;if(((i=this.order)===null||i===void 0?void 0:i.status)!=="processing")return null;if(((r=(o=this===null||this===void 0?void 0:this.order)===null||o===void 0?void 0:o.payment_intent)===null||r===void 0?void 0:r.processor_type)==="paypal"){return t("sc-alert",{type:"warning",open:true},wp.i18n.__("Paypal is taking a closer look at this payment. Itâ€™s required for some payments and normally takes up to 3 business days.","surecart"))}}renderManualInstructions(){var i;const o=(i=this.order)===null||i===void 0?void 0:i.manual_payment_method;if(!(o===null||o===void 0?void 0:o.instructions))return;return t("sc-alert",{type:"info",open:true},t("span",{slot:"title"},o===null||o===void 0?void 0:o.name),t("div",{innerHTML:o===null||o===void 0?void 0:o.instructions}))}render(){var i,o;return t(r.Provider,{state:this.state()},t("div",{class:{"order-confirmation":true}},t("div",{class:{"order-confirmation__content":true,hidden:!((i=this.order)===null||i===void 0?void 0:i.id)&&!this.loading}},t("sc-order-confirm-components-validator",{checkout:this.order},t("slot",null))),!((o=this.order)===null||o===void 0?void 0:o.id)&&!this.loading&&t("sc-heading",null,wp.i18n.__("Order not found.","surecart"),t("span",{slot:"description"},wp.i18n.__("This order could not be found. Please try again.","surecart")))))}};a.style=e;export{a as sc_order_confirmation};
//# sourceMappingURL=p-d1409082.entry.js.map