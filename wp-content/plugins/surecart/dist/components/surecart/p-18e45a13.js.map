{"version":3,"names":["createNonceMiddleware","nonce","middleware","options","next","headers","headerName","toLowerCase","namespaceAndEndpointMiddleware","path","namespaceTrimmed","endpointTrimmed","namespace","endpoint","replace","createRootURLMiddleware","rootURL","optionsWithPath","url","apiRoot","indexOf","getQueryString","query","URL","search","substring","error","buildQueryString","data","string","stack","Object","entries","pair","shift","key","value","hasNestedData","Array","isArray","constructor","valuePairs","reverse","member","memberValue","unshift","undefined","map","encodeURIComponent","join","substr","setPath","object","length","lastIndex","i","toString","includes","toUpperCase","isNextKeyArrayIndex","isNaN","Number","getQueryArgs","split","reduce","accumulator","keyValue","filter","Boolean","decodeURIComponent","segments","create","addQueryArgs","arguments","args","keys","baseUrl","queryStringIndex","assign","getQueryArg","arg","hasQueryArg","normalizePath","splitted","base","entry","sort","a","b","localeCompare","createPreloadingMiddleware","preloadedData","cache","fromEntries","_ref","parse","rawPath","rest_route","pathFromQuery","queryArgs","method","cacheData","prepareResponse","responseData","Promise","resolve","body","window","Response","JSON","stringify","status","statusText","modifyQuery","parseResponse","response","json","reject","parseLinkHeader","linkHeader","match","getNextPageUrl","get","requestContainsUnboundedQuery","pathIsUnbounded","urlIsUnbounded","fetchAllMiddleware","async","apiFetch","per_page","results","nextPage","mergedResults","concat","nextResponse","nextResults","OVERRIDE_METHODS","Set","DEFAULT_METHOD","httpV1Middleware","has","userLocaleMiddleware","_locale","shouldParseResponse","parseJsonAndNormalizeError$1","invalidJsonError","code","message","wp","i18n","__","catch","res","parseAndThrowError","then","unknownError","isMediaUploadRequest","isCreateMethod","isMediaEndpoint","mediaUploadMiddleware","retries","maxRetries","postProcess","attachmentId","action","parseResponseAndNormalizeError","DEFAULT_HEADERS","Accept","DEFAULT_OPTIONS","credentials","middlewares","registerMiddleware","checkStatus","defaultFetchHandler","nextOptions","remainingOptions","responsePromise","fetch","location","href","err","name","fetchHandler","setFetchHandler","newFetchHandler","enhancedHandler","reduceRight","workingOptions","nonceEndpoint","text","nonceMiddleware","use","_b","_a","parent","scData","root_url","_c","_d","_f","nonce_endpoint"],"sources":["../../node_modules/@wordpress/api-fetch/build-module/middlewares/nonce.js","../../node_modules/@wordpress/api-fetch/build-module/middlewares/namespace-endpoint.js","../../node_modules/@wordpress/api-fetch/build-module/middlewares/root-url.js","../../node_modules/@wordpress/api-fetch/node_modules/@wordpress/url/build-module/get-query-string.js","../../node_modules/@wordpress/api-fetch/node_modules/@wordpress/url/build-module/build-query-string.js","../../node_modules/@wordpress/api-fetch/node_modules/@wordpress/url/build-module/get-query-args.js","../../node_modules/@wordpress/api-fetch/node_modules/@wordpress/url/build-module/add-query-args.js","../../node_modules/@wordpress/api-fetch/node_modules/@wordpress/url/build-module/get-query-arg.js","../../node_modules/@wordpress/api-fetch/node_modules/@wordpress/url/build-module/has-query-arg.js","../../node_modules/@wordpress/api-fetch/node_modules/@wordpress/url/build-module/normalize-path.js","../../node_modules/@wordpress/api-fetch/build-module/middlewares/preloading.js","../../node_modules/@wordpress/api-fetch/build-module/middlewares/fetch-all-middleware.js","../../node_modules/@wordpress/api-fetch/build-module/middlewares/http-v1.js","../../node_modules/@wordpress/api-fetch/build-module/middlewares/user-locale.js","../../node_modules/@wordpress/api-fetch/build-module/utils/response.js","../../node_modules/@wordpress/api-fetch/build-module/middlewares/media-upload.js","../../node_modules/@wordpress/api-fetch/build-module/index.js","./src/functions/fetch.ts"],"sourcesContent":["/**\n * @param {string} nonce\n * @return {import('../types').APIFetchMiddleware & { nonce: string }} A middleware to enhance a request with a nonce.\n */\nfunction createNonceMiddleware(nonce) {\n  /**\n   * @type {import('../types').APIFetchMiddleware & { nonce: string }}\n   */\n  const middleware = (options, next) => {\n    const {\n      headers = {}\n    } = options; // If an 'X-WP-Nonce' header (or any case-insensitive variation\n    // thereof) was specified, no need to add a nonce header.\n\n    for (const headerName in headers) {\n      if (headerName.toLowerCase() === 'x-wp-nonce' && headers[headerName] === middleware.nonce) {\n        return next(options);\n      }\n    }\n\n    return next({ ...options,\n      headers: { ...headers,\n        'X-WP-Nonce': middleware.nonce\n      }\n    });\n  };\n\n  middleware.nonce = nonce;\n  return middleware;\n}\n\nexport default createNonceMiddleware;\n//# sourceMappingURL=nonce.js.map","/**\n * @type {import('../types').APIFetchMiddleware}\n */\nconst namespaceAndEndpointMiddleware = (options, next) => {\n  let path = options.path;\n  let namespaceTrimmed, endpointTrimmed;\n\n  if (typeof options.namespace === 'string' && typeof options.endpoint === 'string') {\n    namespaceTrimmed = options.namespace.replace(/^\\/|\\/$/g, '');\n    endpointTrimmed = options.endpoint.replace(/^\\//, '');\n\n    if (endpointTrimmed) {\n      path = namespaceTrimmed + '/' + endpointTrimmed;\n    } else {\n      path = namespaceTrimmed;\n    }\n  }\n\n  delete options.namespace;\n  delete options.endpoint;\n  return next({ ...options,\n    path\n  });\n};\n\nexport default namespaceAndEndpointMiddleware;\n//# sourceMappingURL=namespace-endpoint.js.map","/**\n * Internal dependencies\n */\nimport namespaceAndEndpointMiddleware from './namespace-endpoint';\n/**\n * @param {string} rootURL\n * @return {import('../types').APIFetchMiddleware} Root URL middleware.\n */\n\nconst createRootURLMiddleware = rootURL => (options, next) => {\n  return namespaceAndEndpointMiddleware(options, optionsWithPath => {\n    let url = optionsWithPath.url;\n    let path = optionsWithPath.path;\n    let apiRoot;\n\n    if (typeof path === 'string') {\n      apiRoot = rootURL;\n\n      if (-1 !== rootURL.indexOf('?')) {\n        path = path.replace('?', '&');\n      }\n\n      path = path.replace(/^\\//, ''); // API root may already include query parameter prefix if site is\n      // configured to use plain permalinks.\n\n      if ('string' === typeof apiRoot && -1 !== apiRoot.indexOf('?')) {\n        path = path.replace('?', '&');\n      }\n\n      url = apiRoot + path;\n    }\n\n    return next({ ...optionsWithPath,\n      url\n    });\n  });\n};\n\nexport default createRootURLMiddleware;\n//# sourceMappingURL=root-url.js.map","/**\n * Returns the query string part of the URL.\n *\n * @param {string} url The full URL.\n *\n * @example\n * ```js\n * const queryString = getQueryString( 'http://localhost:8080/this/is/a/test?query=true#fragment' ); // 'query=true'\n * ```\n *\n * @return {string|void} The query string part of the URL.\n */\nexport function getQueryString(url) {\n  let query;\n\n  try {\n    query = new URL(url, 'http://example.com').search.substring(1);\n  } catch (error) {}\n\n  if (query) {\n    return query;\n  }\n}\n//# sourceMappingURL=get-query-string.js.map","/**\n * Generates URL-encoded query string using input query data.\n *\n * It is intended to behave equivalent as PHP's `http_build_query`, configured\n * with encoding type PHP_QUERY_RFC3986 (spaces as `%20`).\n *\n * @example\n * ```js\n * const queryString = buildQueryString( {\n *    simple: 'is ok',\n *    arrays: [ 'are', 'fine', 'too' ],\n *    objects: {\n *       evenNested: {\n *          ok: 'yes',\n *       },\n *    },\n * } );\n * // \"simple=is%20ok&arrays%5B0%5D=are&arrays%5B1%5D=fine&arrays%5B2%5D=too&objects%5BevenNested%5D%5Bok%5D=yes\"\n * ```\n *\n * @param {Record<string,*>} data Data to encode.\n *\n * @return {string} Query string.\n */\nexport function buildQueryString(data) {\n  let string = '';\n  const stack = Object.entries(data);\n  let pair;\n\n  while (pair = stack.shift()) {\n    let [key, value] = pair; // Support building deeply nested data, from array or object values.\n\n    const hasNestedData = Array.isArray(value) || value && value.constructor === Object;\n\n    if (hasNestedData) {\n      // Push array or object values onto the stack as composed of their\n      // original key and nested index or key, retaining order by a\n      // combination of Array#reverse and Array#unshift onto the stack.\n      const valuePairs = Object.entries(value).reverse();\n\n      for (const [member, memberValue] of valuePairs) {\n        stack.unshift([`${key}[${member}]`, memberValue]);\n      }\n    } else if (value !== undefined) {\n      // Null is treated as special case, equivalent to empty string.\n      if (value === null) {\n        value = '';\n      }\n\n      string += '&' + [key, value].map(encodeURIComponent).join('=');\n    }\n  } // Loop will concatenate with leading `&`, but it's only expected for all\n  // but the first query parameter. This strips the leading `&`, while still\n  // accounting for the case that the string may in-fact be empty.\n\n\n  return string.substr(1);\n}\n//# sourceMappingURL=build-query-string.js.map","/**\n * Internal dependencies\n */\nimport { getQueryString } from './get-query-string';\n/** @typedef {import('./get-query-arg').QueryArgParsed} QueryArgParsed */\n\n/**\n * @typedef {Record<string,QueryArgParsed>} QueryArgs\n */\n\n/**\n * Sets a value in object deeply by a given array of path segments. Mutates the\n * object reference.\n *\n * @param {Record<string,*>} object Object in which to assign.\n * @param {string[]}         path   Path segment at which to set value.\n * @param {*}                value  Value to set.\n */\n\nfunction setPath(object, path, value) {\n  const length = path.length;\n  const lastIndex = length - 1;\n\n  for (let i = 0; i < length; i++) {\n    let key = path[i];\n\n    if (!key && Array.isArray(object)) {\n      // If key is empty string and next value is array, derive key from\n      // the current length of the array.\n      key = object.length.toString();\n    }\n\n    key = ['__proto__', 'constructor', 'prototype'].includes(key) ? key.toUpperCase() : key; // If the next key in the path is numeric (or empty string), it will be\n    // created as an array. Otherwise, it will be created as an object.\n\n    const isNextKeyArrayIndex = !isNaN(Number(path[i + 1]));\n    object[key] = i === lastIndex ? // If at end of path, assign the intended value.\n    value : // Otherwise, advance to the next object in the path, creating\n    // it if it does not yet exist.\n    object[key] || (isNextKeyArrayIndex ? [] : {});\n\n    if (Array.isArray(object[key]) && !isNextKeyArrayIndex) {\n      // If we current key is non-numeric, but the next value is an\n      // array, coerce the value to an object.\n      object[key] = { ...object[key]\n      };\n    } // Update working reference object to the next in the path.\n\n\n    object = object[key];\n  }\n}\n/**\n * Returns an object of query arguments of the given URL. If the given URL is\n * invalid or has no querystring, an empty object is returned.\n *\n * @param {string} url URL.\n *\n * @example\n * ```js\n * const foo = getQueryArgs( 'https://wordpress.org?foo=bar&bar=baz' );\n * // { \"foo\": \"bar\", \"bar\": \"baz\" }\n * ```\n *\n * @return {QueryArgs} Query args object.\n */\n\n\nexport function getQueryArgs(url) {\n  return (getQueryString(url) || '' // Normalize space encoding, accounting for PHP URL encoding\n  // corresponding to `application/x-www-form-urlencoded`.\n  //\n  // See: https://tools.ietf.org/html/rfc1866#section-8.2.1\n  ).replace(/\\+/g, '%20').split('&').reduce((accumulator, keyValue) => {\n    const [key, value = ''] = keyValue.split('=') // Filtering avoids decoding as `undefined` for value, where\n    // default is restored in destructuring assignment.\n    .filter(Boolean).map(decodeURIComponent);\n\n    if (key) {\n      const segments = key.replace(/\\]/g, '').split('[');\n      setPath(accumulator, segments, value);\n    }\n\n    return accumulator;\n  }, Object.create(null));\n}\n//# sourceMappingURL=get-query-args.js.map","/**\n * Internal dependencies\n */\nimport { getQueryArgs } from './get-query-args';\nimport { buildQueryString } from './build-query-string';\n/**\n * Appends arguments as querystring to the provided URL. If the URL already\n * includes query arguments, the arguments are merged with (and take precedent\n * over) the existing set.\n *\n * @param {string} [url=''] URL to which arguments should be appended. If omitted,\n *                          only the resulting querystring is returned.\n * @param {Object} [args]   Query arguments to apply to URL.\n *\n * @example\n * ```js\n * const newURL = addQueryArgs( 'https://google.com', { q: 'test' } ); // https://google.com/?q=test\n * ```\n *\n * @return {string} URL with arguments applied.\n */\n\nexport function addQueryArgs() {\n  let url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  let args = arguments.length > 1 ? arguments[1] : undefined;\n\n  // If no arguments are to be appended, return original URL.\n  if (!args || !Object.keys(args).length) {\n    return url;\n  }\n\n  let baseUrl = url; // Determine whether URL already had query arguments.\n\n  const queryStringIndex = url.indexOf('?');\n\n  if (queryStringIndex !== -1) {\n    // Merge into existing query arguments.\n    args = Object.assign(getQueryArgs(url), args); // Change working base URL to omit previous query arguments.\n\n    baseUrl = baseUrl.substr(0, queryStringIndex);\n  }\n\n  return baseUrl + '?' + buildQueryString(args);\n}\n//# sourceMappingURL=add-query-args.js.map","/**\n * Internal dependencies\n */\nimport { getQueryArgs } from './get-query-args';\n/**\n * @typedef {{[key: string]: QueryArgParsed}} QueryArgObject\n */\n\n/**\n * @typedef {string|string[]|QueryArgObject} QueryArgParsed\n */\n\n/**\n * Returns a single query argument of the url\n *\n * @param {string} url URL.\n * @param {string} arg Query arg name.\n *\n * @example\n * ```js\n * const foo = getQueryArg( 'https://wordpress.org?foo=bar&bar=baz', 'foo' ); // bar\n * ```\n *\n * @return {QueryArgParsed|void} Query arg value.\n */\n\nexport function getQueryArg(url, arg) {\n  return getQueryArgs(url)[arg];\n}\n//# sourceMappingURL=get-query-arg.js.map","/**\n * Internal dependencies\n */\nimport { getQueryArg } from './get-query-arg';\n/**\n * Determines whether the URL contains a given query arg.\n *\n * @param {string} url URL.\n * @param {string} arg Query arg name.\n *\n * @example\n * ```js\n * const hasBar = hasQueryArg( 'https://wordpress.org?foo=bar&bar=baz', 'bar' ); // true\n * ```\n *\n * @return {boolean} Whether or not the URL contains the query arg.\n */\n\nexport function hasQueryArg(url, arg) {\n  return getQueryArg(url, arg) !== undefined;\n}\n//# sourceMappingURL=has-query-arg.js.map","/**\n * Given a path, returns a normalized path where equal query parameter values\n * will be treated as identical, regardless of order they appear in the original\n * text.\n *\n * @param {string} path Original path.\n *\n * @return {string} Normalized path.\n */\nexport function normalizePath(path) {\n  const splitted = path.split('?');\n  const query = splitted[1];\n  const base = splitted[0];\n\n  if (!query) {\n    return base;\n  } // 'b=1%2C2&c=2&a=5'\n\n\n  return base + '?' + query // [ 'b=1%2C2', 'c=2', 'a=5' ]\n  .split('&') // [ [ 'b, '1%2C2' ], [ 'c', '2' ], [ 'a', '5' ] ]\n  .map(entry => entry.split('=')) // [ [ 'b', '1,2' ], [ 'c', '2' ], [ 'a', '5' ] ]\n  .map(pair => pair.map(decodeURIComponent)) // [ [ 'a', '5' ], [ 'b, '1,2' ], [ 'c', '2' ] ]\n  .sort((a, b) => a[0].localeCompare(b[0])) // [ [ 'a', '5' ], [ 'b, '1%2C2' ], [ 'c', '2' ] ]\n  .map(pair => pair.map(encodeURIComponent)) // [ 'a=5', 'b=1%2C2', 'c=2' ]\n  .map(pair => pair.join('=')) // 'a=5&b=1%2C2&c=2'\n  .join('&');\n}\n//# sourceMappingURL=normalize-path.js.map","/**\n * WordPress dependencies\n */\nimport { addQueryArgs, getQueryArgs, normalizePath } from '@wordpress/url';\n/**\n * @param {Record<string, any>} preloadedData\n * @return {import('../types').APIFetchMiddleware} Preloading middleware.\n */\n\nfunction createPreloadingMiddleware(preloadedData) {\n  const cache = Object.fromEntries(Object.entries(preloadedData).map(_ref => {\n    let [path, data] = _ref;\n    return [normalizePath(path), data];\n  }));\n  return (options, next) => {\n    const {\n      parse = true\n    } = options;\n    /** @type {string | void} */\n\n    let rawPath = options.path;\n\n    if (!rawPath && options.url) {\n      const {\n        rest_route: pathFromQuery,\n        ...queryArgs\n      } = getQueryArgs(options.url);\n\n      if (typeof pathFromQuery === 'string') {\n        rawPath = addQueryArgs(pathFromQuery, queryArgs);\n      }\n    }\n\n    if (typeof rawPath !== 'string') {\n      return next(options);\n    }\n\n    const method = options.method || 'GET';\n    const path = normalizePath(rawPath);\n\n    if ('GET' === method && cache[path]) {\n      const cacheData = cache[path]; // Unsetting the cache key ensures that the data is only used a single time.\n\n      delete cache[path];\n      return prepareResponse(cacheData, !!parse);\n    } else if ('OPTIONS' === method && cache[method] && cache[method][path]) {\n      const cacheData = cache[method][path]; // Unsetting the cache key ensures that the data is only used a single time.\n\n      delete cache[method][path];\n      return prepareResponse(cacheData, !!parse);\n    }\n\n    return next(options);\n  };\n}\n/**\n * This is a helper function that sends a success response.\n *\n * @param {Record<string, any>} responseData\n * @param {boolean}             parse\n * @return {Promise<any>} Promise with the response.\n */\n\n\nfunction prepareResponse(responseData, parse) {\n  return Promise.resolve(parse ? responseData.body : new window.Response(JSON.stringify(responseData.body), {\n    status: 200,\n    statusText: 'OK',\n    headers: responseData.headers\n  }));\n}\n\nexport default createPreloadingMiddleware;\n//# sourceMappingURL=preloading.js.map","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n/**\n * Internal dependencies\n */\n\nimport apiFetch from '..';\n/**\n * Apply query arguments to both URL and Path, whichever is present.\n *\n * @param {import('../types').APIFetchOptions} props\n * @param {Record<string, string | number>}    queryArgs\n * @return {import('../types').APIFetchOptions} The request with the modified query args\n */\n\nconst modifyQuery = (_ref, queryArgs) => {\n  let {\n    path,\n    url,\n    ...options\n  } = _ref;\n  return { ...options,\n    url: url && addQueryArgs(url, queryArgs),\n    path: path && addQueryArgs(path, queryArgs)\n  };\n};\n/**\n * Duplicates parsing functionality from apiFetch.\n *\n * @param {Response} response\n * @return {Promise<any>} Parsed response json.\n */\n\n\nconst parseResponse = response => response.json ? response.json() : Promise.reject(response);\n/**\n * @param {string | null} linkHeader\n * @return {{ next?: string }} The parsed link header.\n */\n\n\nconst parseLinkHeader = linkHeader => {\n  if (!linkHeader) {\n    return {};\n  }\n\n  const match = linkHeader.match(/<([^>]+)>; rel=\"next\"/);\n  return match ? {\n    next: match[1]\n  } : {};\n};\n/**\n * @param {Response} response\n * @return {string | undefined} The next page URL.\n */\n\n\nconst getNextPageUrl = response => {\n  const {\n    next\n  } = parseLinkHeader(response.headers.get('link'));\n  return next;\n};\n/**\n * @param {import('../types').APIFetchOptions} options\n * @return {boolean} True if the request contains an unbounded query.\n */\n\n\nconst requestContainsUnboundedQuery = options => {\n  const pathIsUnbounded = !!options.path && options.path.indexOf('per_page=-1') !== -1;\n  const urlIsUnbounded = !!options.url && options.url.indexOf('per_page=-1') !== -1;\n  return pathIsUnbounded || urlIsUnbounded;\n};\n/**\n * The REST API enforces an upper limit on the per_page option. To handle large\n * collections, apiFetch consumers can pass `per_page=-1`; this middleware will\n * then recursively assemble a full response array from all available pages.\n *\n * @type {import('../types').APIFetchMiddleware}\n */\n\n\nconst fetchAllMiddleware = async (options, next) => {\n  if (options.parse === false) {\n    // If a consumer has opted out of parsing, do not apply middleware.\n    return next(options);\n  }\n\n  if (!requestContainsUnboundedQuery(options)) {\n    // If neither url nor path is requesting all items, do not apply middleware.\n    return next(options);\n  } // Retrieve requested page of results.\n\n\n  const response = await apiFetch({ ...modifyQuery(options, {\n      per_page: 100\n    }),\n    // Ensure headers are returned for page 1.\n    parse: false\n  });\n  const results = await parseResponse(response);\n\n  if (!Array.isArray(results)) {\n    // We have no reliable way of merging non-array results.\n    return results;\n  }\n\n  let nextPage = getNextPageUrl(response);\n\n  if (!nextPage) {\n    // There are no further pages to request.\n    return results;\n  } // Iteratively fetch all remaining pages until no \"next\" header is found.\n\n\n  let mergedResults =\n  /** @type {any[]} */\n  [].concat(results);\n\n  while (nextPage) {\n    const nextResponse = await apiFetch({ ...options,\n      // Ensure the URL for the next page is used instead of any provided path.\n      path: undefined,\n      url: nextPage,\n      // Ensure we still get headers so we can identify the next page.\n      parse: false\n    });\n    const nextResults = await parseResponse(nextResponse);\n    mergedResults = mergedResults.concat(nextResults);\n    nextPage = getNextPageUrl(nextResponse);\n  }\n\n  return mergedResults;\n};\n\nexport default fetchAllMiddleware;\n//# sourceMappingURL=fetch-all-middleware.js.map","/**\n * Set of HTTP methods which are eligible to be overridden.\n *\n * @type {Set<string>}\n */\nconst OVERRIDE_METHODS = new Set(['PATCH', 'PUT', 'DELETE']);\n/**\n * Default request method.\n *\n * \"A request has an associated method (a method). Unless stated otherwise it\n * is `GET`.\"\n *\n * @see  https://fetch.spec.whatwg.org/#requests\n *\n * @type {string}\n */\n\nconst DEFAULT_METHOD = 'GET';\n/**\n * API Fetch middleware which overrides the request method for HTTP v1\n * compatibility leveraging the REST API X-HTTP-Method-Override header.\n *\n * @type {import('../types').APIFetchMiddleware}\n */\n\nconst httpV1Middleware = (options, next) => {\n  const {\n    method = DEFAULT_METHOD\n  } = options;\n\n  if (OVERRIDE_METHODS.has(method.toUpperCase())) {\n    options = { ...options,\n      headers: { ...options.headers,\n        'X-HTTP-Method-Override': method,\n        'Content-Type': 'application/json'\n      },\n      method: 'POST'\n    };\n  }\n\n  return next(options);\n};\n\nexport default httpV1Middleware;\n//# sourceMappingURL=http-v1.js.map","/**\n * WordPress dependencies\n */\nimport { addQueryArgs, hasQueryArg } from '@wordpress/url';\n/**\n * @type {import('../types').APIFetchMiddleware}\n */\n\nconst userLocaleMiddleware = (options, next) => {\n  if (typeof options.url === 'string' && !hasQueryArg(options.url, '_locale')) {\n    options.url = addQueryArgs(options.url, {\n      _locale: 'user'\n    });\n  }\n\n  if (typeof options.path === 'string' && !hasQueryArg(options.path, '_locale')) {\n    options.path = addQueryArgs(options.path, {\n      _locale: 'user'\n    });\n  }\n\n  return next(options);\n};\n\nexport default userLocaleMiddleware;\n//# sourceMappingURL=user-locale.js.map","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n/**\n * Parses the apiFetch response.\n *\n * @param {Response} response\n * @param {boolean}  shouldParseResponse\n *\n * @return {Promise<any> | null | Response} Parsed response.\n */\n\nconst parseResponse = function (response) {\n  let shouldParseResponse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (shouldParseResponse) {\n    if (response.status === 204) {\n      return null;\n    }\n\n    return response.json ? response.json() : Promise.reject(response);\n  }\n\n  return response;\n};\n/**\n * Calls the `json` function on the Response, throwing an error if the response\n * doesn't have a json function or if parsing the json itself fails.\n *\n * @param {Response} response\n * @return {Promise<any>} Parsed response.\n */\n\n\nconst parseJsonAndNormalizeError = response => {\n  const invalidJsonError = {\n    code: 'invalid_json',\n    message: __('The response is not a valid JSON response.')\n  };\n\n  if (!response || !response.json) {\n    throw invalidJsonError;\n  }\n\n  return response.json().catch(() => {\n    throw invalidJsonError;\n  });\n};\n/**\n * Parses the apiFetch response properly and normalize response errors.\n *\n * @param {Response} response\n * @param {boolean}  shouldParseResponse\n *\n * @return {Promise<any>} Parsed response.\n */\n\n\nexport const parseResponseAndNormalizeError = function (response) {\n  let shouldParseResponse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return Promise.resolve(parseResponse(response, shouldParseResponse)).catch(res => parseAndThrowError(res, shouldParseResponse));\n};\n/**\n * Parses a response, throwing an error if parsing the response fails.\n *\n * @param {Response} response\n * @param {boolean}  shouldParseResponse\n * @return {Promise<any>} Parsed response.\n */\n\nexport function parseAndThrowError(response) {\n  let shouldParseResponse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (!shouldParseResponse) {\n    throw response;\n  }\n\n  return parseJsonAndNormalizeError(response).then(error => {\n    const unknownError = {\n      code: 'unknown_error',\n      message: __('An unknown error occurred.')\n    };\n    throw error || unknownError;\n  });\n}\n//# sourceMappingURL=response.js.map","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n/**\n * Internal dependencies\n */\n\nimport { parseAndThrowError, parseResponseAndNormalizeError } from '../utils/response';\n/**\n * @param {import('../types').APIFetchOptions} options\n * @return {boolean} True if the request is for media upload.\n */\n\nfunction isMediaUploadRequest(options) {\n  const isCreateMethod = !!options.method && options.method === 'POST';\n  const isMediaEndpoint = !!options.path && options.path.indexOf('/wp/v2/media') !== -1 || !!options.url && options.url.indexOf('/wp/v2/media') !== -1;\n  return isMediaEndpoint && isCreateMethod;\n}\n/**\n * Middleware handling media upload failures and retries.\n *\n * @type {import('../types').APIFetchMiddleware}\n */\n\n\nconst mediaUploadMiddleware = (options, next) => {\n  if (!isMediaUploadRequest(options)) {\n    return next(options);\n  }\n\n  let retries = 0;\n  const maxRetries = 5;\n  /**\n   * @param {string} attachmentId\n   * @return {Promise<any>} Processed post response.\n   */\n\n  const postProcess = attachmentId => {\n    retries++;\n    return next({\n      path: `/wp/v2/media/${attachmentId}/post-process`,\n      method: 'POST',\n      data: {\n        action: 'create-image-subsizes'\n      },\n      parse: false\n    }).catch(() => {\n      if (retries < maxRetries) {\n        return postProcess(attachmentId);\n      }\n\n      next({\n        path: `/wp/v2/media/${attachmentId}?force=true`,\n        method: 'DELETE'\n      });\n      return Promise.reject();\n    });\n  };\n\n  return next({ ...options,\n    parse: false\n  }).catch(response => {\n    const attachmentId = response.headers.get('x-wp-upload-attachment-id');\n\n    if (response.status >= 500 && response.status < 600 && attachmentId) {\n      return postProcess(attachmentId).catch(() => {\n        if (options.parse !== false) {\n          return Promise.reject({\n            code: 'post_process',\n            message: __('Media upload failed. If this is a photo or a large image, please scale it down and try again.')\n          });\n        }\n\n        return Promise.reject(response);\n      });\n    }\n\n    return parseAndThrowError(response, options.parse);\n  }).then(response => parseResponseAndNormalizeError(response, options.parse));\n};\n\nexport default mediaUploadMiddleware;\n//# sourceMappingURL=media-upload.js.map","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n/**\n * Internal dependencies\n */\n\nimport createNonceMiddleware from './middlewares/nonce';\nimport createRootURLMiddleware from './middlewares/root-url';\nimport createPreloadingMiddleware from './middlewares/preloading';\nimport fetchAllMiddleware from './middlewares/fetch-all-middleware';\nimport namespaceEndpointMiddleware from './middlewares/namespace-endpoint';\nimport httpV1Middleware from './middlewares/http-v1';\nimport userLocaleMiddleware from './middlewares/user-locale';\nimport mediaUploadMiddleware from './middlewares/media-upload';\nimport { parseResponseAndNormalizeError, parseAndThrowError } from './utils/response';\n/**\n * Default set of header values which should be sent with every request unless\n * explicitly provided through apiFetch options.\n *\n * @type {Record<string, string>}\n */\n\nconst DEFAULT_HEADERS = {\n  // The backend uses the Accept header as a condition for considering an\n  // incoming request as a REST request.\n  //\n  // See: https://core.trac.wordpress.org/ticket/44534\n  Accept: 'application/json, */*;q=0.1'\n};\n/**\n * Default set of fetch option values which should be sent with every request\n * unless explicitly provided through apiFetch options.\n *\n * @type {Object}\n */\n\nconst DEFAULT_OPTIONS = {\n  credentials: 'include'\n};\n/** @typedef {import('./types').APIFetchMiddleware} APIFetchMiddleware */\n\n/** @typedef {import('./types').APIFetchOptions} APIFetchOptions */\n\n/**\n * @type {import('./types').APIFetchMiddleware[]}\n */\n\nconst middlewares = [userLocaleMiddleware, namespaceEndpointMiddleware, httpV1Middleware, fetchAllMiddleware];\n/**\n * Register a middleware\n *\n * @param {import('./types').APIFetchMiddleware} middleware\n */\n\nfunction registerMiddleware(middleware) {\n  middlewares.unshift(middleware);\n}\n/**\n * Checks the status of a response, throwing the Response as an error if\n * it is outside the 200 range.\n *\n * @param {Response} response\n * @return {Response} The response if the status is in the 200 range.\n */\n\n\nconst checkStatus = response => {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  throw response;\n};\n/** @typedef {(options: import('./types').APIFetchOptions) => Promise<any>} FetchHandler*/\n\n/**\n * @type {FetchHandler}\n */\n\n\nconst defaultFetchHandler = nextOptions => {\n  const {\n    url,\n    path,\n    data,\n    parse = true,\n    ...remainingOptions\n  } = nextOptions;\n  let {\n    body,\n    headers\n  } = nextOptions; // Merge explicitly-provided headers with default values.\n\n  headers = { ...DEFAULT_HEADERS,\n    ...headers\n  }; // The `data` property is a shorthand for sending a JSON body.\n\n  if (data) {\n    body = JSON.stringify(data);\n    headers['Content-Type'] = 'application/json';\n  }\n\n  const responsePromise = window.fetch( // Fall back to explicitly passing `window.location` which is the behavior if `undefined` is passed.\n  url || path || window.location.href, { ...DEFAULT_OPTIONS,\n    ...remainingOptions,\n    body,\n    headers\n  });\n  return responsePromise.then(value => Promise.resolve(value).then(checkStatus).catch(response => parseAndThrowError(response, parse)).then(response => parseResponseAndNormalizeError(response, parse)), err => {\n    // Re-throw AbortError for the users to handle it themselves.\n    if (err && err.name === 'AbortError') {\n      throw err;\n    } // Otherwise, there is most likely no network connection.\n    // Unfortunately the message might depend on the browser.\n\n\n    throw {\n      code: 'fetch_error',\n      message: __('You are probably offline.')\n    };\n  });\n};\n/** @type {FetchHandler} */\n\n\nlet fetchHandler = defaultFetchHandler;\n/**\n * Defines a custom fetch handler for making the requests that will override\n * the default one using window.fetch\n *\n * @param {FetchHandler} newFetchHandler The new fetch handler\n */\n\nfunction setFetchHandler(newFetchHandler) {\n  fetchHandler = newFetchHandler;\n}\n/**\n * @template T\n * @param {import('./types').APIFetchOptions} options\n * @return {Promise<T>} A promise representing the request processed via the registered middlewares.\n */\n\n\nfunction apiFetch(options) {\n  // creates a nested function chain that calls all middlewares and finally the `fetchHandler`,\n  // converting `middlewares = [ m1, m2, m3 ]` into:\n  // ```\n  // opts1 => m1( opts1, opts2 => m2( opts2, opts3 => m3( opts3, fetchHandler ) ) );\n  // ```\n  const enhancedHandler = middlewares.reduceRight((\n  /** @type {FetchHandler} */\n  next, middleware) => {\n    return workingOptions => middleware(workingOptions, next);\n  }, fetchHandler);\n  return enhancedHandler(options).catch(error => {\n    if (error.code !== 'rest_cookie_invalid_nonce') {\n      return Promise.reject(error);\n    } // If the nonce is invalid, refresh it and try again.\n\n\n    return window // @ts-ignore\n    .fetch(apiFetch.nonceEndpoint).then(checkStatus).then(data => data.text()).then(text => {\n      // @ts-ignore\n      apiFetch.nonceMiddleware.nonce = text;\n      return apiFetch(options);\n    });\n  });\n}\n\napiFetch.use = registerMiddleware;\napiFetch.setFetchHandler = setFetchHandler;\napiFetch.createNonceMiddleware = createNonceMiddleware;\napiFetch.createPreloadingMiddleware = createPreloadingMiddleware;\napiFetch.createRootURLMiddleware = createRootURLMiddleware;\napiFetch.fetchAllMiddleware = fetchAllMiddleware;\napiFetch.mediaUploadMiddleware = mediaUploadMiddleware;\nexport default apiFetch;\n//# sourceMappingURL=index.js.map","import apiFetch from '@wordpress/api-fetch';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\n\napiFetch.fetchAllMiddleware = null;\n\napiFetch.use(apiFetch.createRootURLMiddleware(window?.parent?.scData?.root_url || window?.scData?.root_url));\n\nif (window?.scData?.nonce) {\n  // @ts-ignore\n  apiFetch.nonceMiddleware = apiFetch.createNonceMiddleware(window?.scData?.nonce);\n  // @ts-ignore\n  apiFetch.use(apiFetch.nonceMiddleware);\n}\n\nif (window?.scData?.nonce_endpoint) {\n  // @ts-ignore\n  apiFetch.nonceEndpoint = window?.scData?.nonce_endpoint;\n}\n\n// Add a timestamp so it can bypass cache rest api\napiFetch.use((options, next) => {\n  options.path = addQueryArgs(options.path, { t: Date.now() });\n  return next(options);\n});\n\nexport default apiFetch;\n\n/**\n * Calls the `json` function on the Response, throwing an error if the response\n * doesn't have a json function or if parsing the json itself fails.\n *\n * @param {Response} response\n * @return {Promise<any>} Parsed response.\n */\nexport const parseJsonAndNormalizeError = response => {\n  const invalidJsonError = {\n    code: 'invalid_json',\n    message: __('The response is not a valid JSON response.', 'surecart'),\n  };\n\n  if (response?.code && response?.message) {\n    throw response;\n  }\n\n  if (!response || !response.json) {\n    throw invalidJsonError;\n  }\n\n  return response.json().catch(() => {\n    throw invalidJsonError;\n  });\n};\n\nexport const handleNonceError = async response => {\n  // need to parse the error response since we are bypassing the apiFetch middleware.\n  const error = await parseJsonAndNormalizeError(response);\n\n  if (error.code !== 'rest_cookie_invalid_nonce') {\n    // console.error(error);\n    throw error;\n  }\n\n  // If the nonce is invalid, refresh it and try again.\n  return (\n    window\n      // @ts-ignore\n      .fetch(apiFetch.nonceEndpoint)\n      .then(response => {\n        if (response.status >= 200 && response.status < 300) {\n          return response;\n        }\n        throw response;\n      })\n      .then(data => data.text())\n      .then(text => {\n        // @ts-ignore\n        apiFetch.nonceMiddleware.nonce = text;\n      })\n  );\n};\n"],"mappings":"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"}