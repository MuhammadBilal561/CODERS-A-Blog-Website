{"version":3,"names":["scTabGroupCss","ScTabGroup","this","tabs","panels","componentDidLoad","syncTabsAndPanels","setAriaLabels","setActiveTab","getActiveTab","emitEvents","mutationObserver","MutationObserver","observe","el","attributes","childList","subtree","disconnectedCallback","disconnect","getAllTabs","getAllPanels","map","tab","panel","find","name","setAttribute","getAttribute","handleClick","event","target","closest","tabGroup","scrollBehavior","handleKeyDown","includes","key","activeEl","document","activeElement","tagName","toLowerCase","index","indexOf","length","Math","max","min","triggerFocus","preventScroll","preventDefault","options","Object","assign","activeTab","disabled","previousTab","active","scTabHide","emit","scTabShow","getAllChildren","slots","shadowRoot","querySelectorAll","tags","allSlots","Array","from","slot","_a","assignedElements","call","flatten","flat","reduce","all","concat","filter","_b","includeDisabled","render","h","part","class","onClick","e","onKeyDown","role","onSlotchange"],"sources":["./src/components/ui/tab-group/sc-tab-group.scss?tag=sc-tab-group&encapsulation=shadow","./src/components/ui/tab-group/sc-tab-group.tsx"],"sourcesContent":[":host {\n  display: block;\n  --sc-tabs-min-width: 225px;\n}\n\n$mobile-size: 750px;\n\n.tab-group {\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n  border: solid 1px transparent;\n  border-radius: 0;\n  flex-direction: row;\n\n  @media screen and (min-width: $mobile-size) {\n    flex-wrap: nowrap;\n  }\n\n  &__tabs {\n    display: flex;\n    flex-wrap: wrap;\n    flex: 0 0 auto;\n    flex-direction: column;\n    margin-bottom: var(--sc-spacing-xx-large);\n  }\n\n  &__nav-container {\n    order: 1;\n    flex: 1 0 100%;\n\n    @media screen and (min-width: $mobile-size) {\n      min-width: var(--sc-tabs-min-width);\n      flex: 0 1 auto;\n    }\n  }\n\n  &__body {\n    flex: 1 1 auto;\n    order: 2;\n\n    @media screen and (min-width: $mobile-size) {\n      padding: 0 var(--sc-spacing-xx-large);\n    }\n  }\n\n}\n\n::slotted(sc-tab) {\n  margin-bottom: var(--sc-spacing-xx-small);\n}\n","import { Component, h, Element, State, Event, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'sc-tab-group',\n  styleUrl: 'sc-tab-group.scss',\n  shadow: true,\n})\nexport class ScTabGroup {\n  @Element() el: HTMLScTabGroupElement;\n  @State() activeTab: HTMLScTabElement;\n\n  private tabs: HTMLScTabElement[] = [];\n  private panels: HTMLScTabPanelElement[] = [];\n\n  @Event() scTabHide: EventEmitter<string>;\n  @Event() scTabShow: EventEmitter<string>;\n\n  private mutationObserver: MutationObserver;\n\n  componentDidLoad() {\n    this.syncTabsAndPanels();\n    this.setAriaLabels();\n    this.setActiveTab(this.getActiveTab() || this.tabs[0], { emitEvents: false });\n\n    this.mutationObserver = new MutationObserver(() => {\n      this.syncTabsAndPanels();\n    });\n    this.mutationObserver.observe(this.el, { attributes: true, childList: true, subtree: true });\n  }\n\n  disconnectedCallback() {\n    this.mutationObserver.disconnect();\n  }\n\n  syncTabsAndPanels() {\n    this.tabs = this.getAllTabs();\n    this.panels = this.getAllPanels();\n  }\n\n  setAriaLabels() {\n    // Link each tab with its corresponding panel\n    this.tabs.map(tab => {\n      const panel = this.panels.find(el => el.name === tab.panel) as HTMLScTabPanelElement;\n      if (panel) {\n        tab.setAttribute('aria-controls', panel.getAttribute('id') as string);\n        panel.setAttribute('aria-labelledby', tab.getAttribute('id') as string);\n      }\n    });\n  }\n\n  handleClick(event: MouseEvent) {\n    const target = event.target as HTMLElement;\n    const tab = target.closest('sc-tab') as HTMLScTabElement;\n    const tabGroup = tab?.closest('sc-tab-group') as HTMLScTabGroupElement;\n\n    // Ensure the target tab is in this tab group\n    if (tabGroup !== this.el) {\n      return;\n    }\n\n    if (tab) {\n      this.setActiveTab(tab, { scrollBehavior: 'smooth' });\n    }\n  }\n\n  handleKeyDown(event: KeyboardEvent) {\n    const target = event.target as HTMLElement;\n    const tab = target.closest('sc-tab') as HTMLScTabElement;\n    const tabGroup = tab?.closest('sc-tab-group');\n\n    // Ensure the target tab is in this tab group\n    if (tabGroup !== this.el) {\n      return true;\n    }\n\n    // Activate a tab\n    if (['Enter', ' '].includes(event.key)) {\n      if (tab) {\n        this.setActiveTab(tab, { scrollBehavior: 'smooth' });\n      }\n    }\n\n    // Move focus left or right\n    if (['ArrowUp', 'ArrowDown', 'Home', 'End'].includes(event.key)) {\n      const activeEl = document.activeElement as HTMLScTabElement;\n\n      if (activeEl && activeEl.tagName.toLowerCase() === 'sc-tab') {\n        let index = this.tabs.indexOf(activeEl);\n\n        if (event.key === 'Home') {\n          index = 0;\n        } else if (event.key === 'End') {\n          index = this.tabs.length - 1;\n        } else if (event.key === 'ArrowUp') {\n          index = Math.max(0, index - 1);\n        } else if (event.key === 'ArrowDown') {\n          index = Math.min(this.tabs.length - 1, index + 1);\n        }\n\n        this.tabs[index].triggerFocus({ preventScroll: true });\n\n        event.preventDefault();\n      }\n    }\n  }\n\n  /** Handle the active tabl selection */\n  setActiveTab(tab: HTMLScTabElement, options?: { emitEvents?: boolean; scrollBehavior?: 'auto' | 'smooth' }) {\n    options = Object.assign(\n      {\n        emitEvents: true,\n        scrollBehavior: 'auto',\n      },\n      options,\n    );\n\n    if (tab && tab !== this.activeTab && !tab.disabled) {\n      const previousTab = this.activeTab;\n      this.activeTab = tab;\n\n      this.tabs.map(el => (el.active = el === this.activeTab));\n      this.panels.map(el => (el.active = el.name === this.activeTab.panel));\n\n      // Emit events\n      if (options.emitEvents) {\n        if (previousTab) {\n          this.scTabHide.emit(previousTab.panel);\n        }\n        this.scTabShow.emit(this.activeTab.panel);\n      }\n    }\n  }\n\n  getActiveTab() {\n    const tabs = this.getAllTabs();\n    return tabs.find(el => el.active);\n  }\n\n  getAllChildren() {\n    const slots = this.el.shadowRoot.querySelectorAll('slot') as NodeListOf<HTMLSlotElement>;\n    const tags = ['sc-tab', 'sc-tab-panel'];\n    const allSlots = Array.from(slots)\n      .map(slot => slot?.assignedElements?.({ flatten: true }))\n      .flat();\n    return allSlots\n      .reduce((all: HTMLElement[], el: HTMLElement) => all.concat(el, [...(el?.querySelectorAll?.('*') || [])] as HTMLElement[]), [])\n      .filter((el: HTMLElement) => tags.includes(el?.tagName?.toLowerCase?.())) as HTMLElement[];\n  }\n\n  /** Get all child tabs */\n  getAllTabs(includeDisabled = false) {\n    return this.getAllChildren().filter((el: any) => {\n      return includeDisabled ? el.tagName.toLowerCase() === 'sc-tab' : el.tagName.toLowerCase() === 'sc-tab' && !el.disabled;\n    }) as HTMLScTabElement[];\n  }\n\n  /** Get all child panels */\n  getAllPanels() {\n    return this.getAllChildren().filter((el: any) => el.tagName.toLowerCase() === 'sc-tab-panel') as [HTMLScTabPanelElement];\n  }\n\n  render() {\n    return (\n      <div\n        part=\"base\"\n        class={{\n          'tab-group': true,\n        }}\n        onClick={e => this.handleClick(e)}\n        onKeyDown={e => this.handleKeyDown(e)}\n      >\n        <div class=\"tab-group__nav-container\" part=\"nav\">\n          <div class=\"tab-group__nav\">\n            <div part=\"tabs\" class=\"tab-group__tabs\" role=\"tablist\">\n              <slot onSlotchange={() => this.syncTabsAndPanels()} name=\"nav\"></slot>\n            </div>\n          </div>\n        </div>\n        <div part=\"body\" class=\"tab-group__body\">\n          <slot onSlotchange={() => this.syncTabsAndPanels()} />\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"oDAAA,MAAMA,EAAgB,qsB,MCOTC,EAAU,M,mGAIbC,KAAAC,KAA2B,GAC3BD,KAAAE,OAAkC,G,yBAO1CC,mBACEH,KAAKI,oBACLJ,KAAKK,gBACLL,KAAKM,aAAaN,KAAKO,gBAAkBP,KAAKC,KAAK,GAAI,CAAEO,WAAY,QAErER,KAAKS,iBAAmB,IAAIC,kBAAiB,KAC3CV,KAAKI,mBAAmB,IAE1BJ,KAAKS,iBAAiBE,QAAQX,KAAKY,GAAI,CAAEC,WAAY,KAAMC,UAAW,KAAMC,QAAS,M,CAGvFC,uBACEhB,KAAKS,iBAAiBQ,Y,CAGxBb,oBACEJ,KAAKC,KAAOD,KAAKkB,aACjBlB,KAAKE,OAASF,KAAKmB,c,CAGrBd,gBAEEL,KAAKC,KAAKmB,KAAIC,IACZ,MAAMC,EAAQtB,KAAKE,OAAOqB,MAAKX,GAAMA,EAAGY,OAASH,EAAIC,QACrD,GAAIA,EAAO,CACTD,EAAII,aAAa,gBAAiBH,EAAMI,aAAa,OACrDJ,EAAMG,aAAa,kBAAmBJ,EAAIK,aAAa,M,KAK7DC,YAAYC,GACV,MAAMC,EAASD,EAAMC,OACrB,MAAMR,EAAMQ,EAAOC,QAAQ,UAC3B,MAAMC,EAAWV,IAAG,MAAHA,SAAG,SAAHA,EAAKS,QAAQ,gBAG9B,GAAIC,IAAa/B,KAAKY,GAAI,CACxB,M,CAGF,GAAIS,EAAK,CACPrB,KAAKM,aAAae,EAAK,CAAEW,eAAgB,U,EAI7CC,cAAcL,GACZ,MAAMC,EAASD,EAAMC,OACrB,MAAMR,EAAMQ,EAAOC,QAAQ,UAC3B,MAAMC,EAAWV,IAAG,MAAHA,SAAG,SAAHA,EAAKS,QAAQ,gBAG9B,GAAIC,IAAa/B,KAAKY,GAAI,CACxB,OAAO,I,CAIT,GAAI,CAAC,QAAS,KAAKsB,SAASN,EAAMO,KAAM,CACtC,GAAId,EAAK,CACPrB,KAAKM,aAAae,EAAK,CAAEW,eAAgB,U,EAK7C,GAAI,CAAC,UAAW,YAAa,OAAQ,OAAOE,SAASN,EAAMO,KAAM,CAC/D,MAAMC,EAAWC,SAASC,cAE1B,GAAIF,GAAYA,EAASG,QAAQC,gBAAkB,SAAU,CAC3D,IAAIC,EAAQzC,KAAKC,KAAKyC,QAAQN,GAE9B,GAAIR,EAAMO,MAAQ,OAAQ,CACxBM,EAAQ,C,MACH,GAAIb,EAAMO,MAAQ,MAAO,CAC9BM,EAAQzC,KAAKC,KAAK0C,OAAS,C,MACtB,GAAIf,EAAMO,MAAQ,UAAW,CAClCM,EAAQG,KAAKC,IAAI,EAAGJ,EAAQ,E,MACvB,GAAIb,EAAMO,MAAQ,YAAa,CACpCM,EAAQG,KAAKE,IAAI9C,KAAKC,KAAK0C,OAAS,EAAGF,EAAQ,E,CAGjDzC,KAAKC,KAAKwC,GAAOM,aAAa,CAAEC,cAAe,OAE/CpB,EAAMqB,gB,GAMZ3C,aAAae,EAAuB6B,GAClCA,EAAUC,OAAOC,OACf,CACE5C,WAAY,KACZwB,eAAgB,QAElBkB,GAGF,GAAI7B,GAAOA,IAAQrB,KAAKqD,YAAchC,EAAIiC,SAAU,CAClD,MAAMC,EAAcvD,KAAKqD,UACzBrD,KAAKqD,UAAYhC,EAEjBrB,KAAKC,KAAKmB,KAAIR,GAAOA,EAAG4C,OAAS5C,IAAOZ,KAAKqD,YAC7CrD,KAAKE,OAAOkB,KAAIR,GAAOA,EAAG4C,OAAS5C,EAAGY,OAASxB,KAAKqD,UAAU/B,QAG9D,GAAI4B,EAAQ1C,WAAY,CACtB,GAAI+C,EAAa,CACfvD,KAAKyD,UAAUC,KAAKH,EAAYjC,M,CAElCtB,KAAK2D,UAAUD,KAAK1D,KAAKqD,UAAU/B,M,GAKzCf,eACE,MAAMN,EAAOD,KAAKkB,aAClB,OAAOjB,EAAKsB,MAAKX,GAAMA,EAAG4C,Q,CAG5BI,iBACE,MAAMC,EAAQ7D,KAAKY,GAAGkD,WAAWC,iBAAiB,QAClD,MAAMC,EAAO,CAAC,SAAU,gBACxB,MAAMC,EAAWC,MAAMC,KAAKN,GACzBzC,KAAIgD,IAAI,IAAAC,EAAI,OAAAA,EAAAD,IAAI,MAAJA,SAAI,SAAJA,EAAME,oBAAgB,MAAAD,SAAA,SAAAA,EAAAE,KAAAH,EAAG,CAAEI,QAAS,MAAO,IACvDC,OACH,OAAOR,EACJS,QAAO,CAACC,EAAoB/D,KAAe,IAAAyD,EAAK,OAAAM,EAAIC,OAAOhE,EAAI,MAAKyD,EAAAzD,IAAE,MAAFA,SAAE,SAAFA,EAAImD,oBAAgB,MAAAM,SAAA,SAAAA,EAAAE,KAAA3D,EAAG,OAAQ,IAAsB,GAAE,IAC3HiE,QAAQjE,IAAe,IAAAyD,EAAAS,EAAK,OAAAd,EAAK9B,UAAS4C,GAAAT,EAAAzD,IAAE,MAAFA,SAAE,SAAFA,EAAI2B,WAAO,MAAA8B,SAAA,SAAAA,EAAE7B,eAAW,MAAAsC,SAAA,SAAAA,EAAAP,KAAAF,GAAK,G,CAI5EnD,WAAW6D,EAAkB,OAC3B,OAAO/E,KAAK4D,iBAAiBiB,QAAQjE,GAC5BmE,EAAkBnE,EAAG2B,QAAQC,gBAAkB,SAAW5B,EAAG2B,QAAQC,gBAAkB,WAAa5B,EAAG0C,U,CAKlHnC,eACE,OAAOnB,KAAK4D,iBAAiBiB,QAAQjE,GAAYA,EAAG2B,QAAQC,gBAAkB,gB,CAGhFwC,SACE,OACEC,EAAA,OACEC,KAAK,OACLC,MAAO,CACL,YAAa,MAEfC,QAASC,GAAKrF,KAAK2B,YAAY0D,GAC/BC,UAAWD,GAAKrF,KAAKiC,cAAcoD,IAEnCJ,EAAA,OAAKE,MAAM,2BAA2BD,KAAK,OACzCD,EAAA,OAAKE,MAAM,kBACTF,EAAA,OAAKC,KAAK,OAAOC,MAAM,kBAAkBI,KAAK,WAC5CN,EAAA,QAAMO,aAAc,IAAMxF,KAAKI,oBAAqBoB,KAAK,WAI/DyD,EAAA,OAAKC,KAAK,OAAOC,MAAM,mBACrBF,EAAA,QAAMO,aAAc,IAAMxF,KAAKI,uB"}