{"version":3,"names":["domReady","callback","document","readyState","addEventListener","introText","createElement","id","className","textContent","wp","i18n","__","setAttribute","body","appendChild","addContainer","ariaLive","container","clear","regions","getElementsByClassName","getElementById","i","length","previousMessage","filterMessage","message","replace","setup","containerAssertive","containerPolite","addIntroText","speak","removeAttribute"],"sources":["../../node_modules/@wordpress/dom-ready/build-module/index.js","../../node_modules/@wordpress/a11y/build-module/add-intro-text.js","../../node_modules/@wordpress/a11y/build-module/add-container.js","../../node_modules/@wordpress/a11y/build-module/clear.js","../../node_modules/@wordpress/a11y/build-module/filter-message.js","../../node_modules/@wordpress/a11y/build-module/index.js"],"sourcesContent":["/**\n * @typedef {() => void} Callback\n *\n * TODO: Remove this typedef and inline `() => void` type.\n *\n * This typedef is used so that a descriptive type is provided in our\n * automatically generated documentation.\n *\n * An in-line type `() => void` would be preferable, but the generated\n * documentation is `null` in that case.\n *\n * @see https://github.com/WordPress/gutenberg/issues/18045\n */\n\n/**\n * Specify a function to execute when the DOM is fully loaded.\n *\n * @param {Callback} callback A function to execute after the DOM is ready.\n *\n * @example\n * ```js\n * import domReady from '@wordpress/dom-ready';\n *\n * domReady( function() {\n * \t//do something after DOM loads.\n * } );\n * ```\n *\n * @return {void}\n */\nexport default function domReady(callback) {\n  if (typeof document === 'undefined') {\n    return;\n  }\n  if (document.readyState === 'complete' ||\n  // DOMContentLoaded + Images/Styles/etc loaded, so we call directly.\n  document.readyState === 'interactive' // DOMContentLoaded fires at this point, so we call directly.\n  ) {\n    return void callback();\n  }\n\n  // DOMContentLoaded has not fired yet, delay callback until then.\n  document.addEventListener('DOMContentLoaded', callback);\n}\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Build the explanatory text to be placed before the aria live regions.\n *\n * This text is initially hidden from assistive technologies by using a `hidden`\n * HTML attribute which is then removed once a message fills the aria-live regions.\n *\n * @return {HTMLParagraphElement} The explanatory text HTML element.\n */\nexport default function addIntroText() {\n  const introText = document.createElement('p');\n  introText.id = 'a11y-speak-intro-text';\n  introText.className = 'a11y-speak-intro-text';\n  introText.textContent = __('Notifications');\n  introText.setAttribute('style', 'position: absolute;' + 'margin: -1px;' + 'padding: 0;' + 'height: 1px;' + 'width: 1px;' + 'overflow: hidden;' + 'clip: rect(1px, 1px, 1px, 1px);' + '-webkit-clip-path: inset(50%);' + 'clip-path: inset(50%);' + 'border: 0;' + 'word-wrap: normal !important;');\n  introText.setAttribute('hidden', 'hidden');\n  const {\n    body\n  } = document;\n  if (body) {\n    body.appendChild(introText);\n  }\n  return introText;\n}\n//# sourceMappingURL=add-intro-text.js.map","/**\n * Build the live regions markup.\n *\n * @param {string} [ariaLive] Value for the 'aria-live' attribute; default: 'polite'.\n *\n * @return {HTMLDivElement} The ARIA live region HTML element.\n */\nexport default function addContainer(ariaLive = 'polite') {\n  const container = document.createElement('div');\n  container.id = `a11y-speak-${ariaLive}`;\n  container.className = 'a11y-speak-region';\n  container.setAttribute('style', 'position: absolute;' + 'margin: -1px;' + 'padding: 0;' + 'height: 1px;' + 'width: 1px;' + 'overflow: hidden;' + 'clip: rect(1px, 1px, 1px, 1px);' + '-webkit-clip-path: inset(50%);' + 'clip-path: inset(50%);' + 'border: 0;' + 'word-wrap: normal !important;');\n  container.setAttribute('aria-live', ariaLive);\n  container.setAttribute('aria-relevant', 'additions text');\n  container.setAttribute('aria-atomic', 'true');\n  const {\n    body\n  } = document;\n  if (body) {\n    body.appendChild(container);\n  }\n  return container;\n}\n//# sourceMappingURL=add-container.js.map","/**\n * Clears the a11y-speak-region elements and hides the explanatory text.\n */\nexport default function clear() {\n  const regions = document.getElementsByClassName('a11y-speak-region');\n  const introText = document.getElementById('a11y-speak-intro-text');\n  for (let i = 0; i < regions.length; i++) {\n    regions[i].textContent = '';\n  }\n\n  // Make sure the explanatory text is hidden from assistive technologies.\n  if (introText) {\n    introText.setAttribute('hidden', 'hidden');\n  }\n}\n//# sourceMappingURL=clear.js.map","let previousMessage = '';\n\n/**\n * Filter the message to be announced to the screenreader.\n *\n * @param {string} message The message to be announced.\n *\n * @return {string} The filtered message.\n */\nexport default function filterMessage(message) {\n  /*\n   * Strip HTML tags (if any) from the message string. Ideally, messages should\n   * be simple strings, carefully crafted for specific use with A11ySpeak.\n   * When re-using already existing strings this will ensure simple HTML to be\n   * stripped out and replaced with a space. Browsers will collapse multiple\n   * spaces natively.\n   */\n  message = message.replace(/<[^<>]+>/g, ' ');\n\n  /*\n   * Safari + VoiceOver don't announce repeated, identical strings. We use\n   * a `no-break space` to force them to think identical strings are different.\n   */\n  if (previousMessage === message) {\n    message += '\\u00A0';\n  }\n  previousMessage = message;\n  return message;\n}\n//# sourceMappingURL=filter-message.js.map","/**\n * WordPress dependencies\n */\nimport domReady from '@wordpress/dom-ready';\n\n/**\n * Internal dependencies\n */\nimport addIntroText from './add-intro-text';\nimport addContainer from './add-container';\nimport clear from './clear';\nimport filterMessage from './filter-message';\n\n/**\n * Create the live regions.\n */\nexport function setup() {\n  const introText = document.getElementById('a11y-speak-intro-text');\n  const containerAssertive = document.getElementById('a11y-speak-assertive');\n  const containerPolite = document.getElementById('a11y-speak-polite');\n  if (introText === null) {\n    addIntroText();\n  }\n  if (containerAssertive === null) {\n    addContainer('assertive');\n  }\n  if (containerPolite === null) {\n    addContainer('polite');\n  }\n}\n\n/**\n * Run setup on domReady.\n */\ndomReady(setup);\n\n/**\n * Allows you to easily announce dynamic interface updates to screen readers using ARIA live regions.\n * This module is inspired by the `speak` function in `wp-a11y.js`.\n *\n * @param {string} message    The message to be announced by assistive technologies.\n * @param {string} [ariaLive] The politeness level for aria-live; default: 'polite'.\n *\n * @example\n * ```js\n * import { speak } from '@wordpress/a11y';\n *\n * // For polite messages that shouldn't interrupt what screen readers are currently announcing.\n * speak( 'The message you want to send to the ARIA live region' );\n *\n * // For assertive messages that should interrupt what screen readers are currently announcing.\n * speak( 'The message you want to send to the ARIA live region', 'assertive' );\n * ```\n */\nexport function speak(message, ariaLive) {\n  /*\n   * Clear previous messages to allow repeated strings being read out and hide\n   * the explanatory text from assistive technologies.\n   */\n  clear();\n  message = filterMessage(message);\n  const introText = document.getElementById('a11y-speak-intro-text');\n  const containerAssertive = document.getElementById('a11y-speak-assertive');\n  const containerPolite = document.getElementById('a11y-speak-polite');\n  if (containerAssertive && ariaLive === 'assertive') {\n    containerAssertive.textContent = message;\n  } else if (containerPolite) {\n    containerPolite.textContent = message;\n  }\n\n  /*\n   * Make the explanatory text available to assistive technologies by removing\n   * the 'hidden' HTML attribute.\n   */\n  if (introText) {\n    introText.removeAttribute('hidden');\n  }\n}\n//# sourceMappingURL=index.js.map"],"mappings":"AA8Be,SAASA,EAASC,GAC/B,UAAWC,WAAa,YAAa,CACnC,MACJ,CACE,GAAIA,SAASC,aAAe,YAE5BD,SAASC,aAAe,cACtB,CACA,YAAYF,GAChB,CAGEC,SAASE,iBAAiB,mBAAoBH,EAChD,C,aC7BA,MAAAI,EAAAH,SAAAI,cAAA,KACAD,EAAAE,GAAA,wBACAF,EAAAG,UAAA,wBACAH,EAAAI,YAA0BC,GAAAC,KAAAC,GAAE,iBAC5BP,EAAAQ,aAAA,uPACAR,EAAAQ,aAAA,mBACA,MAAAC,KACAA,GACAZ,SACA,GAAAY,EAAA,CACAA,EAAAC,YAAAV,EACA,CACA,OAAAA,CACA,CCpBe,SAASW,EAAaC,EAAW,UAC9C,MAAMC,EAAYhB,SAASI,cAAc,OACzCY,EAAUX,GAAK,cAAcU,IAC7BC,EAAUV,UAAY,oBACtBU,EAAUL,aAAa,QAAS,sBAAwB,gBAAkB,cAAgB,eAAiB,cAAgB,oBAAsB,kCAAoC,iCAAmC,yBAA2B,aAAe,iCAClQK,EAAUL,aAAa,YAAaI,GACpCC,EAAUL,aAAa,gBAAiB,kBACxCK,EAAUL,aAAa,cAAe,QACtC,MAAMC,KACJA,GACEZ,SACJ,GAAIY,EAAM,CACRA,EAAKC,YAAYG,EACrB,CACE,OAAOA,CACT,CCnBe,SAASC,IACtB,MAAMC,EAAUlB,SAASmB,uBAAuB,qBAChD,MAAMhB,EAAYH,SAASoB,eAAe,yBAC1C,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAQI,OAAQD,IAAK,CACvCH,EAAQG,GAAGd,YAAc,EAC7B,CAGE,GAAIJ,EAAW,CACbA,EAAUQ,aAAa,SAAU,SACrC,CACA,CCdA,IAAIY,EAAkB,GASP,SAASC,EAAcC,GAQpCA,EAAUA,EAAQC,QAAQ,YAAa,KAMvC,GAAIH,IAAoBE,EAAS,CAC/BA,GAAW,GACf,CACEF,EAAkBE,EAClB,OAAOA,CACT,CCZO,SAASE,IACd,MAAMxB,EAAYH,SAASoB,eAAe,yBAC1C,MAAMQ,EAAqB5B,SAASoB,eAAe,wBACnD,MAAMS,EAAkB7B,SAASoB,eAAe,qBAChD,GAAIjB,IAAc,KAAM,CACtB2B,GACJ,CACE,GAAIF,IAAuB,KAAM,CAC/Bd,EAAa,YACjB,CACE,GAAIe,IAAoB,KAAM,CAC5Bf,EAAa,SACjB,CACA,CAKAhB,EAAS6B,GAoBF,SAASI,EAAMN,EAASV,GAK7BE,IACAQ,EAAUD,EAAcC,GACxB,MAAMtB,EAAYH,SAASoB,eAAe,yBAC1C,MAAMQ,EAAqB5B,SAASoB,eAAe,wBACnD,MAAMS,EAAkB7B,SAASoB,eAAe,qBAChD,GAAIQ,GAAsBb,IAAa,YAAa,CAClDa,EAAmBrB,YAAckB,CACrC,MAAS,GAAII,EAAiB,CAC1BA,EAAgBtB,YAAckB,CAClC,CAME,GAAItB,EAAW,CACbA,EAAU6B,gBAAgB,SAC9B,CACA,Q"}