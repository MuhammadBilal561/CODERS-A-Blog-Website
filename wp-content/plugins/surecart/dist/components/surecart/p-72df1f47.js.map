{"version":3,"names":["window","addEventListener","e","fbq","eventDetail","detail","search_string","searchString","content_ids","searchResultIds","_a","searchCollections","length","content_category","join","product","id","_b","product_collections","data","map","collection","name","content_name","_c","variant_options","content_type","contents","quantity","currency","_d","price","value","maybeConvertAmount","_e","amount","_f","trackEvent","search_term","items","item_id","item_name","discount","discount_amount","_g","_h","item_variant","option","_k","_j","item_category","_m","_l","collectionId","item_list_id","item_list_name","pageTitle","products"],"sources":["./src/store/product/facebook.ts","./src/store/product/google.ts"],"sourcesContent":["import { maybeConvertAmount } from '../../functions/currency';\nimport { ProductsSearchedParams } from 'src/types';\n\n/**\n * Handle search event.\n */\nwindow.addEventListener('scSearched', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const eventDetail: ProductsSearchedParams = e.detail;\n\n  window.fbq('track', 'Search', {\n    search_string: eventDetail.searchString,\n    content_ids: eventDetail.searchResultIds,\n    ...(!!eventDetail?.searchCollections?.length ? { content_category: eventDetail.searchCollections.join(',') } : {}),\n  });\n});\n\n/**\n * Handle view content event.\n */\nwindow.addEventListener('scProductViewed', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const product = e.detail;\n\n  window.fbq('track', 'ViewContent', {\n    content_ids: [product.id],\n    content_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n    content_name: product?.name + (product?.variant_options?.length ? ` - ${product?.variant_options.join(' / ')}` : ''),\n    content_type: 'product',\n    contents: [\n      {\n        id: product.id,\n        quantity: 1,\n      },\n    ],\n    currency: product?.price?.currency,\n    value: maybeConvertAmount(product.price?.amount || 0, product.price?.currency || 'USD'),\n  });\n});\n","import { maybeConvertAmount } from '../../functions/currency';\nimport { ProductsViewedParams } from 'src/types';\nimport { __ } from '@wordpress/i18n';\nimport { trackEvent } from '../../functions/google';\n/**\n * Handle the search event.\n */\n\nwindow.addEventListener('scSearched', (e: CustomEvent) => {\n  trackEvent('search', {\n    search_term: e.detail?.searchString,\n  });\n});\n\n/**\n * Handle view item event.\n */\nwindow.addEventListener('scProductViewed', (e: CustomEvent) => {\n  const product = e.detail;\n  trackEvent('view_item', {\n    value: maybeConvertAmount(product.price?.amount || 0, product.price?.currency || 'USD'),\n    currency: product.price?.currency,\n    items: [\n      {\n        item_id: product?.id,\n        item_name: product?.name,\n        currency: product?.price?.currency,\n        discount: product?.discount_amount ? maybeConvertAmount(product?.discount_amount, product?.price?.currency) : 0,\n        price: maybeConvertAmount(product?.price?.amount, product?.price?.currency),\n        quantity: product?.quantity || 1,\n        ...(product?.variant_options?.length\n          ? {\n              item_variant: product?.variant_options.map(option => option.name).join(' / '),\n            }\n          : {}),\n        ...(product?.product_collections?.data?.length\n          ? {\n              item_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n            }\n          : {}),\n      },\n    ],\n  });\n});\n\n/**\n * Handle view items event.\n */\nwindow.addEventListener('scProductsViewed', (e: CustomEvent) => {\n  const eventDetail: ProductsViewedParams = e.detail;\n  trackEvent('view_item_list', {\n    ...(eventDetail?.collectionId ? { item_list_id: eventDetail.collectionId } : {}),\n    item_list_name: eventDetail.pageTitle,\n    items: eventDetail?.products?.map(product => ({\n      item_id: product?.id,\n      item_name: product?.name,\n      ...(product?.product_collections?.data?.length\n        ? {\n            item_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n          }\n        : {}),\n      ...(eventDetail?.collectionId ? { item_list_id: eventDetail.collectionId } : {}),\n      item_list_name: eventDetail.pageTitle,\n    })),\n  });\n});\n"],"mappings":"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"}