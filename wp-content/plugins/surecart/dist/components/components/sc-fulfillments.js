import{proxyCustomElement,HTMLElement,h,Host}from"@stencil/core/internal/client";import{a as apiFetch}from"./fetch.js";import{d as defineCustomElement$d}from"./sc-alert2.js";import{d as defineCustomElement$c}from"./sc-card2.js";import{d as defineCustomElement$b}from"./sc-dashboard-module2.js";import{d as defineCustomElement$a}from"./sc-flex2.js";import{d as defineCustomElement$9}from"./sc-format-number2.js";import{d as defineCustomElement$8}from"./sc-fulfillment-shipping-status-badge2.js";import{d as defineCustomElement$7}from"./sc-icon2.js";import{d as defineCustomElement$6}from"./sc-skeleton2.js";import{d as defineCustomElement$5}from"./sc-spacing2.js";import{d as defineCustomElement$4}from"./sc-stacked-list2.js";import{d as defineCustomElement$3}from"./sc-stacked-list-row2.js";import{d as defineCustomElement$2}from"./sc-tag2.js";import{a as addQueryArgs}from"./add-query-args.js";const scFulfillmentsCss=".fulfillment{display:grid;gap:var(--sc-spacing-x-large)}.fulfillment__number{font-weight:bold}.fulfillment__header{display:flex;align-items:center;gap:var(--sc-spacing-medium)}sc-card{--sc-card-padding:var(--sc-spacing-x-large)}.trackings{display:flex;gap:0.75em;color:var(--sc-line-item-title-color, var(--sc-input-label-color))}.trackings__title{line-height:var(--sc-line-height-dense);font-weight:var(--sc-font-weight-bold)}.trackings sc-icon{opacity:0.5;font-size:22px}.line_items{display:grid;gap:var(--sc-spacing-large)}.line_item__info{display:flex;gap:var(--sc-spacing-medium);align-items:center}.line_item__image img{width:var(--sc-product-line-item-image-size, 4em);height:var(--sc-product-line-item-image-size, 4em);object-fit:cover;border-radius:4px;border:solid 1px var(--sc-input-border-color, var(--sc-input-border));display:block;box-shadow:var(--sc-input-box-shadow)}",ScFulfillments$1=proxyCustomElement(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.orderId=void 0,this.heading=void 0,this.fulfillments=void 0,this.loading=void 0,this.busy=void 0,this.error=void 0}componentDidLoad(){this.fetch()}async fetch(){try{this.busy=!0,this.fulfillments=await apiFetch({path:addQueryArgs("surecart/v1/fulfillments",{expand:["trackings","fulfillment_items","fulfillment_item.line_item","line_item.price","price.product"],order_ids:[this.orderId],shipment_status:["shipped","delivered"]})})}catch(e){console.error(this.error),this.error=(null==e?void 0:e.message)||wp.i18n.__("Something went wrong","surecart")}finally{this.busy=!1}}renderLoading(){return h("sc-flex",{flexDirection:"column",style:{gap:"1em"}},h("sc-skeleton",{style:{width:"20%",display:"inline-block"}}),h("sc-skeleton",{style:{width:"60%",display:"inline-block"}}),h("sc-skeleton",{style:{width:"40%",display:"inline-block"}}))}render(){var e,s;return this.loading||!(null===(e=this.fulfillments)||void 0===e?void 0:e.length)?h(Host,{style:{display:"none"}}):h("sc-spacing",{style:{"--spacing":"var(--sc-spacing-large)"}},h("sc-dashboard-module",{error:this.error},h("span",{slot:"heading"},this.heading||wp.i18n._n("Shipment","Shipments",null===(s=this.fulfillments)||void 0===s?void 0:s.length,"surecart")),this.fulfillments.map((e=>{var s,t,i,l,n,o;return h("sc-card",{noPadding:!0},h("sc-stacked-list",null,h("sc-stacked-list-row",null,h("div",{class:"fulfillment__header"},h("sc-fulfillment-shipping-status-badge",{status:e.shipment_status}),h("div",{class:"fulfillment__number"},"#",null==e?void 0:e.number))),!!(null===(t=null===(s=null==e?void 0:e.trackings)||void 0===s?void 0:s.data)||void 0===t?void 0:t.length)&&h("sc-stacked-list-row",null,h("div",{class:"trackings"},h("sc-icon",{name:"truck"}),h("div",{class:"trackings__details"},h("div",{class:"trackings__title"},wp.i18n._n("Tracking number","Tracking numbers",null===(l=null===(i=null==e?void 0:e.trackings)||void 0===i?void 0:i.data)||void 0===l?void 0:l.length,"surecart")),h("div",{class:"trackings__list"},((null===(n=null==e?void 0:e.trackings)||void 0===n?void 0:n.data)||[]).map((({number:e,url:s})=>h("a",{href:s,target:"_blank"},e))))))),((null===(o=null==e?void 0:e.fulfillment_items)||void 0===o?void 0:o.data)||[]).map((({id:e,line_item:s,quantity:t})=>{var i,l,n,o,r,a,d,c,m,u,f,p;return h("sc-stacked-list-row",{key:e,style:{"--columns":"2"}},h("div",null,h("div",{class:"line_item__info"},h("div",{class:"line_item__image"},!!(null===(l=null===(i=null==s?void 0:s.price)||void 0===i?void 0:i.product)||void 0===l?void 0:l.image_url)&&h("img",{src:null===(o=null===(n=null==s?void 0:s.price)||void 0===n?void 0:n.product)||void 0===o?void 0:o.image_url})),h("div",{class:"line_item__text"},h("div",null,null===(a=null===(r=null==s?void 0:s.price)||void 0===r?void 0:r.product)||void 0===a?void 0:a.name),h("div",null,!!(null===(c=null===(d=null==s?void 0:s.price)||void 0===d?void 0:d.product)||void 0===c?void 0:c.weight)&&h("sc-format-number",{type:"unit",value:null===(u=null===(m=null==s?void 0:s.price)||void 0===m?void 0:m.product)||void 0===u?void 0:u.weight,unit:null===(p=null===(f=null==s?void 0:s.price)||void 0===f?void 0:f.product)||void 0===p?void 0:p.weight_unit}))))),h("span",null,wp.i18n.sprintf(wp.i18n.__("Qty: %d","surecart"),t||0)))}))))}))))}get el(){return this}static get style(){return scFulfillmentsCss}},[1,"sc-fulfillments",{orderId:[1,"order-id"],heading:[1],fulfillments:[32],loading:[32],busy:[32],error:[32]}]);function defineCustomElement$1(){"undefined"!=typeof customElements&&["sc-fulfillments","sc-alert","sc-card","sc-dashboard-module","sc-flex","sc-format-number","sc-fulfillment-shipping-status-badge","sc-icon","sc-skeleton","sc-spacing","sc-stacked-list","sc-stacked-list-row","sc-tag"].forEach((e=>{switch(e){case"sc-fulfillments":customElements.get(e)||customElements.define(e,ScFulfillments$1);break;case"sc-alert":customElements.get(e)||defineCustomElement$d();break;case"sc-card":customElements.get(e)||defineCustomElement$c();break;case"sc-dashboard-module":customElements.get(e)||defineCustomElement$b();break;case"sc-flex":customElements.get(e)||defineCustomElement$a();break;case"sc-format-number":customElements.get(e)||defineCustomElement$9();break;case"sc-fulfillment-shipping-status-badge":customElements.get(e)||defineCustomElement$8();break;case"sc-icon":customElements.get(e)||defineCustomElement$7();break;case"sc-skeleton":customElements.get(e)||defineCustomElement$6();break;case"sc-spacing":customElements.get(e)||defineCustomElement$5();break;case"sc-stacked-list":customElements.get(e)||defineCustomElement$4();break;case"sc-stacked-list-row":customElements.get(e)||defineCustomElement$3();break;case"sc-tag":customElements.get(e)||defineCustomElement$2()}}))}const ScFulfillments=ScFulfillments$1,defineCustomElement=defineCustomElement$1;export{ScFulfillments,defineCustomElement};