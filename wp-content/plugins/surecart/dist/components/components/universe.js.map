{"file":"universe.js","mappings":"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","names":[],"sources":["../../node_modules/stencil-wormhole/dist/esm/universe.js"],"sourcesContent":["import { getElement, getRenderingRef } from \"@stencil/core\";\nvar multiverse = new Map();\nvar updateConsumer = function (_a, state) {\n    var fields = _a.fields, updater = _a.updater;\n    fields.forEach(function (field) { updater(field, state[field]); });\n};\nexport var Universe = {\n    create: function (creator, initialState) {\n        var el = getElement(creator);\n        var wormholes = new Map();\n        var universe = { wormholes: wormholes, state: initialState };\n        multiverse.set(creator, universe);\n        var connectedCallback = creator.connectedCallback;\n        creator.connectedCallback = function () {\n            multiverse.set(creator, universe);\n            if (connectedCallback) {\n                connectedCallback.call(creator);\n            }\n        };\n        var disconnectedCallback = creator.disconnectedCallback;\n        creator.disconnectedCallback = function () {\n            multiverse.delete(creator);\n            if (disconnectedCallback) {\n                disconnectedCallback.call(creator);\n            }\n        };\n        el.addEventListener('openWormhole', function (event) {\n            event.stopPropagation();\n            var _a = event.detail, consumer = _a.consumer, onOpen = _a.onOpen;\n            if (wormholes.has(consumer))\n                return;\n            if (typeof consumer !== 'symbol') {\n                var connectedCallback_1 = consumer.connectedCallback, disconnectedCallback_1 = consumer.disconnectedCallback;\n                consumer.connectedCallback = function () {\n                    wormholes.set(consumer, event.detail);\n                    if (connectedCallback_1) {\n                        connectedCallback_1.call(consumer);\n                    }\n                };\n                consumer.disconnectedCallback = function () {\n                    wormholes.delete(consumer);\n                    if (disconnectedCallback_1) {\n                        disconnectedCallback_1.call(consumer);\n                    }\n                };\n            }\n            wormholes.set(consumer, event.detail);\n            updateConsumer(event.detail, universe.state);\n            onOpen === null || onOpen === void 0 ? void 0 : onOpen.resolve(function () { wormholes.delete(consumer); });\n        });\n        el.addEventListener('closeWormhole', function (event) {\n            var consumer = event.detail;\n            wormholes.delete(consumer);\n        });\n    },\n    Provider: function (_a, children) {\n        var state = _a.state;\n        var creator = getRenderingRef();\n        if (multiverse.has(creator)) {\n            var universe = multiverse.get(creator);\n            universe.state = state;\n            universe.wormholes.forEach(function (opening) { updateConsumer(opening, state); });\n        }\n        return children;\n    }\n};\n"],"version":3}