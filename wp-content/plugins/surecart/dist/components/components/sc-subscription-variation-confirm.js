import{proxyCustomElement,HTMLElement,h}from"@stencil/core/internal/client";import{g as getVariantFromValues}from"./util.js";import{d as defineCustomElement$h}from"./sc-alert2.js";import{d as defineCustomElement$g}from"./sc-block-ui2.js";import{d as defineCustomElement$f}from"./sc-button2.js";import{d as defineCustomElement$e}from"./sc-card2.js";import{d as defineCustomElement$d}from"./sc-dashboard-module2.js";import{d as defineCustomElement$c}from"./dropdown.js";import{d as defineCustomElement$b}from"./sc-form2.js";import{d as defineCustomElement$a}from"./sc-form-control2.js";import{d as defineCustomElement$9}from"./sc-icon2.js";import{d as defineCustomElement$8}from"./sc-input2.js";import{d as defineCustomElement$7}from"./sc-menu2.js";import{d as defineCustomElement$6}from"./sc-menu-item2.js";import{d as defineCustomElement$5}from"./sc-menu-label2.js";import{d as defineCustomElement$4}from"./sc-select2.js";import{d as defineCustomElement$3}from"./sc-spinner2.js";import{d as defineCustomElement$2}from"./sc-visually-hidden2.js";import{a as addQueryArgs}from"./add-query-args.js";const scSubscriptionVariationConfirmCss=":host{display:block}.sc-product-variation-choice-wrap{display:flex;flex-direction:column;gap:var(--sc-variation-gap, 12px)}",ScSubscriptionVariationConfirm$1=proxyCustomElement(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.heading=void 0,this.product=void 0,this.price=void 0,this.subscription=void 0,this.busy=!1,this.variantValues=[],this.handleSubmit=this.handleSubmit.bind(this)}componentWillLoad(){var e;this.variantValues=null===(e=this.subscription)||void 0===e?void 0:e.variant_options}async handleSubmit(){var e,t,s,i;this.busy=!0;const n=getVariantFromValues({variants:null===(t=null===(e=this.product)||void 0===e?void 0:e.variants)||void 0===t?void 0:t.data,values:this.variantValues});return(null===(s=this.price)||void 0===s?void 0:s.ad_hoc)?window.location.assign(addQueryArgs(window.location.href,{action:"confirm_amount",price_id:null===(i=this.price)||void 0===i?void 0:i.id,variant:null==n?void 0:n.id})):window.location.assign(addQueryArgs(window.location.href,{action:"confirm",variant:null==n?void 0:n.id}))}buttonText(){var e,t,s,i;return(null===(e=this.price)||void 0===e?void 0:e.ad_hoc)?(null===(t=this.price)||void 0===t?void 0:t.id)===(null===(i=null===(s=this.subscription)||void 0===s?void 0:s.price)||void 0===i?void 0:i.id)?wp.i18n.__("Update Amount","surecart"):wp.i18n.__("Choose Amount","surecart"):wp.i18n.__("Next","surecart")}render(){var e,t;return h("sc-dashboard-module",{heading:this.heading||wp.i18n.__("Enter An Amount","surecart"),class:"subscription-switch"},h("sc-card",null,h("sc-form",{onScSubmit:this.handleSubmit},h("div",{class:"sc-product-variation-choice-wrap"},((null===(t=null===(e=this.product)||void 0===e?void 0:e.variant_options)||void 0===t?void 0:t.data)||[]).map((({name:e,values:t,id:s},i)=>{var n,o;return h("sc-select",{exportparts:"base:select__base, input, form-control, label, help-text, trigger, panel, caret, menu__base, spinner__base, empty",part:"name__input",value:(null===(o=null===(n=this.subscription)||void 0===n?void 0:n.variant_options)||void 0===o?void 0:o[i])||"",onScChange:e=>{this.variantValues[i]=e.detail.value},label:e,choices:null==t?void 0:t.map((e=>({label:e,value:e}))),unselect:!1,key:s})}))),h("sc-button",{type:"primary",full:!0,submit:!0,loading:this.busy},this.buttonText()," ",h("sc-icon",{name:"arrow-right",slot:"suffix"})))),this.busy&&h("sc-block-ui",{style:{zIndex:"9"}}))}static get style(){return scSubscriptionVariationConfirmCss}},[0,"sc-subscription-variation-confirm",{heading:[1],product:[16],price:[16],subscription:[16],busy:[32],variantValues:[32]}]);function defineCustomElement$1(){"undefined"!=typeof customElements&&["sc-subscription-variation-confirm","sc-alert","sc-block-ui","sc-button","sc-card","sc-dashboard-module","sc-dropdown","sc-form","sc-form-control","sc-icon","sc-input","sc-menu","sc-menu-item","sc-menu-label","sc-select","sc-spinner","sc-visually-hidden"].forEach((e=>{switch(e){case"sc-subscription-variation-confirm":customElements.get(e)||customElements.define(e,ScSubscriptionVariationConfirm$1);break;case"sc-alert":customElements.get(e)||defineCustomElement$h();break;case"sc-block-ui":customElements.get(e)||defineCustomElement$g();break;case"sc-button":customElements.get(e)||defineCustomElement$f();break;case"sc-card":customElements.get(e)||defineCustomElement$e();break;case"sc-dashboard-module":customElements.get(e)||defineCustomElement$d();break;case"sc-dropdown":customElements.get(e)||defineCustomElement$c();break;case"sc-form":customElements.get(e)||defineCustomElement$b();break;case"sc-form-control":customElements.get(e)||defineCustomElement$a();break;case"sc-icon":customElements.get(e)||defineCustomElement$9();break;case"sc-input":customElements.get(e)||defineCustomElement$8();break;case"sc-menu":customElements.get(e)||defineCustomElement$7();break;case"sc-menu-item":customElements.get(e)||defineCustomElement$6();break;case"sc-menu-label":customElements.get(e)||defineCustomElement$5();break;case"sc-select":customElements.get(e)||defineCustomElement$4();break;case"sc-spinner":customElements.get(e)||defineCustomElement$3();break;case"sc-visually-hidden":customElements.get(e)||defineCustomElement$2()}}))}const ScSubscriptionVariationConfirm=ScSubscriptionVariationConfirm$1,defineCustomElement=defineCustomElement$1;export{ScSubscriptionVariationConfirm,defineCustomElement};