import{proxyCustomElement,HTMLElement,h}from"@stencil/core/internal/client";import{s as state,o as onChange}from"./mutations2.js";import{s as shippingAddressRequired}from"./getters2.js";import{d as defineCustomElement$v}from"./sc-address2.js";import{d as defineCustomElement$u}from"./sc-block-ui2.js";import{d as defineCustomElement$t}from"./sc-button2.js";import{d as defineCustomElement$s}from"./sc-checkbox2.js";import{d as defineCustomElement$r}from"./sc-choice2.js";import{d as defineCustomElement$q}from"./sc-compact-address2.js";import{d as defineCustomElement$p}from"./sc-divider2.js";import{d as defineCustomElement$o}from"./dropdown.js";import{d as defineCustomElement$n}from"./sc-form-control2.js";import{d as defineCustomElement$m}from"./sc-format-number2.js";import{d as defineCustomElement$l}from"./sc-icon2.js";import{d as defineCustomElement$k}from"./sc-input2.js";import{d as defineCustomElement$j}from"./sc-line-item2.js";import{d as defineCustomElement$i}from"./sc-line-item-shipping2.js";import{d as defineCustomElement$h}from"./sc-line-item-tax2.js";import{d as defineCustomElement$g}from"./sc-menu2.js";import{d as defineCustomElement$f}from"./sc-menu-item2.js";import{d as defineCustomElement$e}from"./sc-menu-label2.js";import{d as defineCustomElement$d}from"./sc-order-billing-address2.js";import{d as defineCustomElement$c}from"./sc-order-bump2.js";import{d as defineCustomElement$b}from"./sc-order-bumps2.js";import{d as defineCustomElement$a}from"./sc-order-shipping-address2.js";import{d as defineCustomElement$9}from"./sc-order-tax-id-input2.js";import{d as defineCustomElement$8}from"./sc-radio2.js";import{d as defineCustomElement$7}from"./sc-radio-group2.js";import{d as defineCustomElement$6}from"./sc-select2.js";import{d as defineCustomElement$5}from"./sc-shipping-choices2.js";import{d as defineCustomElement$4}from"./sc-skeleton2.js";import{d as defineCustomElement$3}from"./sc-spinner2.js";import{d as defineCustomElement$2}from"./sc-tax-id-input2.js";import{d as defineCustomElement$1}from"./sc-visually-hidden2.js";const ScFormComponentsValidator=proxyCustomElement(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.disabled=void 0,this.taxProtocol=void 0,this.hasAddress=void 0,this.hasTaxIDField=void 0,this.hasBumpsField=void 0,this.hasTaxLine=void 0,this.hasBumpLine=void 0,this.hasShippingChoices=void 0,this.hasShippingAmount=void 0}handleOrderChange(){var e,s,t,i,n,o,m;this.disabled||(shippingAddressRequired()&&this.addAddressField(),(null===(t=null===(s=null===(e=state.checkout)||void 0===e?void 0:e.recommended_bumps)||void 0===s?void 0:s.data)||void 0===t?void 0:t.length)&&this.addBumps(),(null===(i=state.checkout)||void 0===i?void 0:i.tax_amount)&&this.addTaxLine(),(null===(n=state.checkout)||void 0===n?void 0:n.shipping_enabled)&&(null===(o=state.checkout)||void 0===o?void 0:o.selected_shipping_choice_required)&&this.addShippingChoices(),(null===(m=state.checkout)||void 0===m?void 0:m.shipping_amount)&&this.addShippingAmount())}handleHasAddressChange(){this.hasAddress&&this.handleShippingAddressRequired()}componentWillLoad(){var e,s;this.hasAddress=!!this.el.querySelector("sc-order-shipping-address"),this.hasTaxIDField=!!this.el.querySelector("sc-order-tax-id-input"),this.hasBumpsField=!!this.el.querySelector("sc-order-bumps"),this.hasTaxLine=!!this.el.querySelector("sc-line-item-tax"),this.hasShippingChoices=!!this.el.querySelector("sc-shipping-choices"),this.hasShippingAmount=!!this.el.querySelector("sc-line-item-shipping"),(null===(e=this.taxProtocol)||void 0===e?void 0:e.tax_enabled)&&(this.addAddressField(),(null===(s=this.taxProtocol)||void 0===s?void 0:s.eu_vat_required)&&this.addTaxIDField()),this.handleOrderChange(),this.removeCheckoutListener=onChange("checkout",(()=>this.handleOrderChange())),this.removePaymentRequiresShippingListener=onChange("paymentMethodRequiresShipping",(()=>this.handleOrderChange()))}disconnectedCallback(){this.removeCheckoutListener(),this.removePaymentRequiresShippingListener()}handleShippingAddressRequired(){var e;if(!(null===(e=state.checkout)||void 0===e?void 0:e.shipping_address_required))return;const s=this.el.querySelector("sc-order-shipping-address");if(!s)return;s.required=!0;const t=this.el.querySelector("sc-customer-name");t?t.required=!0:(s.requireName=!0,s.showName=!0)}addAddressField(){if(this.hasAddress)return;const e=this.el.querySelector("sc-payment"),s=document.createElement("sc-order-shipping-address");s.label=wp.i18n.__("Shipping Address","surecart");const t=document.createElement("sc-order-billing-address");t.label=wp.i18n.__("Billing Address","surecart"),e.parentNode.insertBefore(s,e),e.parentNode.insertBefore(t,e),this.hasAddress=!0}addTaxIDField(){if(this.hasTaxIDField)return;const e=this.el.querySelector("sc-payment"),s=document.createElement("sc-order-tax-id-input");e.parentNode.insertBefore(s,e),this.hasTaxIDField=!0}addBumps(){if(this.hasBumpsField)return;const e=this.el.querySelector("sc-order-billing-address")||this.el.querySelector("sc-payment"),s=document.createElement("sc-order-bumps");null==e||e.parentNode.insertBefore(s,e.nextSibling),this.hasBumpsField=!0}addTaxLine(){var e;if(this.hasTaxLine)return;const s=this.el.querySelector("sc-line-item-total[total=total]"),t=document.createElement("sc-line-item-tax");s&&("SC-DIVIDER"===(null===(e=null==s?void 0:s.previousElementSibling)||void 0===e?void 0:e.tagName)?s.parentNode.insertBefore(t,s.previousElementSibling):s.parentNode.insertBefore(t,s),this.hasTaxLine=!0)}addShippingChoices(){if(this.hasShippingChoices)return;const e=this.el.querySelector("sc-payment"),s=document.createElement("sc-shipping-choices");e.parentNode.insertBefore(s,e),this.hasShippingChoices=!0}addShippingAmount(){var e;if(this.hasShippingAmount)return;let s=this.el.querySelector("sc-line-item-tax");const t=this.el.querySelector("sc-line-item-total[total=total]");if(!t)return;s||(s="SC-DIVIDER"===(null===(e=null==t?void 0:t.previousElementSibling)||void 0===e?void 0:e.tagName)?t.previousElementSibling:t);const i=document.createElement("sc-line-item-shipping");s.parentNode.insertBefore(i,s),this.hasShippingAmount=!0}render(){return h("slot",null)}get el(){return this}static get watchers(){return{hasAddress:["handleHasAddressChange"]}}},[1,"sc-form-components-validator",{disabled:[4],taxProtocol:[16],hasAddress:[32],hasTaxIDField:[32],hasBumpsField:[32],hasTaxLine:[32],hasBumpLine:[32],hasShippingChoices:[32],hasShippingAmount:[32]}]);function defineCustomElement(){"undefined"!=typeof customElements&&["sc-form-components-validator","sc-address","sc-block-ui","sc-button","sc-checkbox","sc-choice","sc-compact-address","sc-divider","sc-dropdown","sc-form-control","sc-format-number","sc-icon","sc-input","sc-line-item","sc-line-item-shipping","sc-line-item-tax","sc-menu","sc-menu-item","sc-menu-label","sc-order-billing-address","sc-order-bump","sc-order-bumps","sc-order-shipping-address","sc-order-tax-id-input","sc-radio","sc-radio-group","sc-select","sc-shipping-choices","sc-skeleton","sc-spinner","sc-tax-id-input","sc-visually-hidden"].forEach((e=>{switch(e){case"sc-form-components-validator":customElements.get(e)||customElements.define(e,ScFormComponentsValidator);break;case"sc-address":customElements.get(e)||defineCustomElement$v();break;case"sc-block-ui":customElements.get(e)||defineCustomElement$u();break;case"sc-button":customElements.get(e)||defineCustomElement$t();break;case"sc-checkbox":customElements.get(e)||defineCustomElement$s();break;case"sc-choice":customElements.get(e)||defineCustomElement$r();break;case"sc-compact-address":customElements.get(e)||defineCustomElement$q();break;case"sc-divider":customElements.get(e)||defineCustomElement$p();break;case"sc-dropdown":customElements.get(e)||defineCustomElement$o();break;case"sc-form-control":customElements.get(e)||defineCustomElement$n();break;case"sc-format-number":customElements.get(e)||defineCustomElement$m();break;case"sc-icon":customElements.get(e)||defineCustomElement$l();break;case"sc-input":customElements.get(e)||defineCustomElement$k();break;case"sc-line-item":customElements.get(e)||defineCustomElement$j();break;case"sc-line-item-shipping":customElements.get(e)||defineCustomElement$i();break;case"sc-line-item-tax":customElements.get(e)||defineCustomElement$h();break;case"sc-menu":customElements.get(e)||defineCustomElement$g();break;case"sc-menu-item":customElements.get(e)||defineCustomElement$f();break;case"sc-menu-label":customElements.get(e)||defineCustomElement$e();break;case"sc-order-billing-address":customElements.get(e)||defineCustomElement$d();break;case"sc-order-bump":customElements.get(e)||defineCustomElement$c();break;case"sc-order-bumps":customElements.get(e)||defineCustomElement$b();break;case"sc-order-shipping-address":customElements.get(e)||defineCustomElement$a();break;case"sc-order-tax-id-input":customElements.get(e)||defineCustomElement$9();break;case"sc-radio":customElements.get(e)||defineCustomElement$8();break;case"sc-radio-group":customElements.get(e)||defineCustomElement$7();break;case"sc-select":customElements.get(e)||defineCustomElement$6();break;case"sc-shipping-choices":customElements.get(e)||defineCustomElement$5();break;case"sc-skeleton":customElements.get(e)||defineCustomElement$4();break;case"sc-spinner":customElements.get(e)||defineCustomElement$3();break;case"sc-tax-id-input":customElements.get(e)||defineCustomElement$2();break;case"sc-visually-hidden":customElements.get(e)||defineCustomElement$1()}}))}export{ScFormComponentsValidator as S,defineCustomElement as d};