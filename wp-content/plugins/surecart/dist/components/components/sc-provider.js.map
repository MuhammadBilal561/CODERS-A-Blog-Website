{"file":"sc-provider.js","mappings":";;MASaA,YAAU;;;;;;qBAEY,EAAE;;EAGnC,YAAY,CAAC,UAAU;IACrB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,IAAI,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;GAC1D;EAID,MAAM,aAAa,CAAC,KAAoB;IACtC,KAAK,CAAC,eAAe,EAAE,CAAC;IACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAC/D,MAAM,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IACzC,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACnD,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;IACnH,IAAI,CAAC,SAAS,GAAG,YAAY,CAAC;GAC/B;EAED,oBAAoB;IAClB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;GAClE;EAED,MAAM;IACJ,OAAO,eAAQ,CAAC;GACjB;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["ScProvider"],"sources":["./src/components/context/provider/sc-provider.tsx"],"sourcesContent":["import { Component, Event, EventEmitter, h, Listen, Prop, State, Watch } from '@stencil/core';\n\ninterface ConsumerEvent extends Event {\n  detail: Function;\n}\n\n@Component({\n  tag: 'sc-provider',\n})\nexport class ScProvider {\n  @Prop() STENCIL_CONTEXT: { [key: string]: any };\n  @State() consumers: Function[] = [];\n\n  @Watch('STENCIL_CONTEXT')\n  watchContext(newContext) {\n    this.consumers.forEach(consumer => consumer(newContext));\n  }\n  @Event({ eventName: 'mountConsumer' }) mountEmitter: EventEmitter;\n\n  @Listen('mountConsumer')\n  async mountConsumer(event: ConsumerEvent) {\n    event.stopPropagation();\n    this.consumers = this.consumers.slice().concat([event.detail]);\n    await event.detail(this.STENCIL_CONTEXT);\n    const index = this.consumers.indexOf(event.detail);\n    const newConsumers = this.consumers.slice(0, index).concat(this.consumers.slice(index + 1, this.consumers.length));\n    this.consumers = newConsumers;\n  }\n\n  disconnectedCallback() {\n    this.consumers.map(consumer => this.mountEmitter.emit(consumer));\n  }\n\n  render() {\n    return <slot />;\n  }\n}\n"],"version":3}