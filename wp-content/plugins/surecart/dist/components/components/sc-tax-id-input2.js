import{proxyCustomElement,HTMLElement,createEvent,h,Fragment}from"@stencil/core/internal/client";import{s as speak}from"./index2.js";import{z as zones}from"./tax.js";import{d as defineCustomElement$9}from"./sc-button2.js";import{d as defineCustomElement$8}from"./dropdown.js";import{d as defineCustomElement$7}from"./sc-form-control2.js";import{d as defineCustomElement$6}from"./sc-icon2.js";import{d as defineCustomElement$5}from"./sc-input2.js";import{d as defineCustomElement$4}from"./sc-menu2.js";import{d as defineCustomElement$3}from"./sc-menu-item2.js";import{d as defineCustomElement$2}from"./sc-spinner2.js";import{d as defineCustomElement$1}from"./sc-visually-hidden2.js";const scTaxIdInputCss=":host{display:block;z-index:3;position:relative}",ScTaxIdInput=proxyCustomElement(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.scChange=createEvent(this,"scChange",7),this.scInput=createEvent(this,"scInput",7),this.scInputType=createEvent(this,"scInputType",7),this.scSetState=createEvent(this,"scSetState",7),this.country=void 0,this.show=!1,this.type="other",this.number=null,this.status="unknown",this.loading=void 0,this.help=void 0,this.otherLabel=wp.i18n.__("Tax ID","surecart"),this.caGstLabel=wp.i18n.__("GST Number","surecart"),this.auAbnLabel=wp.i18n.__("ABN Number","surecart"),this.gbVatLabel=wp.i18n.__("UK VAT","surecart"),this.euVatLabel=wp.i18n.__("EU VAT","surecart"),this.taxIdTypes=[],this.required=!1}async reportValidity(){return this.input.reportValidity()}onLabelChange(){zones.ca_gst.label=this.caGstLabel||zones.ca_gst.label,zones.au_abn.label=this.auAbnLabel||zones.au_abn.label,zones.gb_vat.label=this.gbVatLabel||zones.gb_vat.label,zones.eu_vat.label=this.euVatLabel||zones.eu_vat.label,zones.other.label=this.otherLabel||zones.other.label}componentWillLoad(){this.onLabelChange()}renderStatus(){return"valid"===this.status?h("sc-icon",{name:"check",slot:"prefix",style:{color:"var(--sc-color-success-500)"}}):"invalid"===this.status?h("sc-icon",{name:"x",slot:"prefix",style:{color:"var(--sc-color-danger-500)"}}):void 0}filteredZones(){return this.taxIdTypes.length?Object.keys(zones).filter((e=>this.taxIdTypes.includes(e))).reduce(((e,t)=>(e[t]=zones[t],e)),{}):zones}onTaxIdTypesChange(){this.taxIdTypes.length&&(this.type=this.taxIdTypes.includes("other")?"other":this.taxIdTypes[0])}getZoneLabel(){var e,t;const s=this.filteredZones()||{};return(null===(e=null==s?void 0:s[(null==this?void 0:this.type)||"other"])||void 0===e?void 0:e.label)||(null===(t=null==s?void 0:s[Object.keys(s)[0]])||void 0===t?void 0:t.label)}render(){var e,t,s,n,a;return h(Fragment,null,h("sc-input",{name:"tax_identifier.number_type",required:this.required,value:this.type,style:{display:"none"}}),h("sc-input",{ref:e=>this.input=e,label:this.getZoneLabel(),"aria-label":wp.i18n.__("Tax ID","surecart"),placeholder:wp.i18n.__("Enter Tax ID","surecart"),name:"tax_identifier.number",value:this.number,onScInput:e=>{e.stopImmediatePropagation(),this.scInput.emit({number:e.target.value,number_type:this.type||"other"})},onScChange:e=>{e.stopImmediatePropagation(),this.scChange.emit({number:e.target.value,number_type:this.type||"other"})},help:this.help,required:this.required},this.loading&&"eu_vat"===this.type?h("sc-spinner",{slot:"prefix",style:{"--spinner-size":"10px"}}):this.renderStatus(),1===(null===(e=Object.keys(this.filteredZones()||{}))||void 0===e?void 0:e.length)?h("span",{slot:"suffix"},null===(s=null===(t=Object.values(this.filteredZones()||{}))||void 0===t?void 0:t[0])||void 0===s?void 0:s.label_small):h("sc-dropdown",{slot:"suffix",position:"bottom-right",role:"select","aria-multiselectable":"false","aria-label":wp.i18n.__("Select number type","surecart")},h("sc-button",{type:"text",slot:"trigger",caret:!0,loading:!1,style:{color:"var(--sc-input-label-color)"},tabindex:"0"},null===(a=null===(n=this.filteredZones())||void 0===n?void 0:n[(null==this?void 0:this.type)||"other"])||void 0===a?void 0:a.label_small),h("sc-menu",null,Object.keys(this.filteredZones()||{}).map((e=>h("sc-menu-item",{role:"option",onClick:()=>{this.scInput.emit({number:this.number,number_type:e}),this.scChange.emit({number:this.number,number_type:e}),this.type=e},onKeyDown:t=>{var s;"Enter"===t.key&&(this.scInput.emit({number:this.number,number_type:e}),this.scChange.emit({number:this.number,number_type:e}),this.type=e,null===(s=this.input)||void 0===s||s.triggerFocus(),speak(wp.i18n.sprintf(wp.i18n.__("%s selected","surecart"),zones[e].label_small,"assertive")))},checked:this.type===e,"aria-selected":this.type===e?"true":"false","aria-label":zones[e].label_small},zones[e].label_small)))))))}static get watchers(){return{otherLabel:["onLabelChange"],caGstLabel:["onLabelChange"],auAbnLabel:["onLabelChange"],gbVatLabel:["onLabelChange"],euVatLabel:["onLabelChange"],taxIdTypes:["onTaxIdTypesChange"]}}static get style(){return scTaxIdInputCss}},[1,"sc-tax-id-input",{country:[1],show:[4],type:[1025],number:[1],status:[1],loading:[4],help:[1],otherLabel:[1,"other-label"],caGstLabel:[1,"ca-gst-label"],auAbnLabel:[1,"au-abn-label"],gbVatLabel:[1,"gb-vat-label"],euVatLabel:[1,"eu-vat-label"],taxIdTypes:[16],required:[516],reportValidity:[64]}]);function defineCustomElement(){"undefined"!=typeof customElements&&["sc-tax-id-input","sc-button","sc-dropdown","sc-form-control","sc-icon","sc-input","sc-menu","sc-menu-item","sc-spinner","sc-visually-hidden"].forEach((e=>{switch(e){case"sc-tax-id-input":customElements.get(e)||customElements.define(e,ScTaxIdInput);break;case"sc-button":customElements.get(e)||defineCustomElement$9();break;case"sc-dropdown":customElements.get(e)||defineCustomElement$8();break;case"sc-form-control":customElements.get(e)||defineCustomElement$7();break;case"sc-icon":customElements.get(e)||defineCustomElement$6();break;case"sc-input":customElements.get(e)||defineCustomElement$5();break;case"sc-menu":customElements.get(e)||defineCustomElement$4();break;case"sc-menu-item":customElements.get(e)||defineCustomElement$3();break;case"sc-spinner":customElements.get(e)||defineCustomElement$2();break;case"sc-visually-hidden":customElements.get(e)||defineCustomElement$1()}}))}export{ScTaxIdInput as S,defineCustomElement as d};