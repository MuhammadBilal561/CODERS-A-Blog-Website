function validateNamespace(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}function validateHookName(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}function createAddHook(e,t){return function(o,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const s=e[t];if(!validateHookName(o))return;if(!validateNamespace(r))return;if("function"!=typeof n)return void console.error("The hook callback must be a function.");if("number"!=typeof i)return void console.error("If specified, the hook priority must be a number.");const c={callback:n,priority:i,namespace:r};if(s[o]){const e=s[o].handlers;let t;for(t=e.length;t>0&&!(i>=e[t-1].priority);t--);t===e.length?e[t]=c:e.splice(t,0,c),s.__current.forEach((e=>{e.name===o&&e.currentIndex>=t&&e.currentIndex++}))}else s[o]={handlers:[c],runs:0};"hookAdded"!==o&&e.doAction("hookAdded",o,r,n,i)}}function createRemoveHook(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r,n){const i=e[t];if(!validateHookName(r))return;if(!o&&!validateNamespace(n))return;if(!i[r])return 0;let s=0;if(o)s=i[r].handlers.length,i[r]={runs:i[r].runs,handlers:[]};else{const e=i[r].handlers;for(let t=e.length-1;t>=0;t--)e[t].namespace===n&&(e.splice(t,1),s++,i.__current.forEach((e=>{e.name===r&&e.currentIndex>=t&&e.currentIndex--})))}return"hookRemoved"!==r&&e.doAction("hookRemoved",r,n),s}}function createHasHook(e,t){return function(o,r){const n=e[t];return void 0!==r?o in n&&n[o].handlers.some((e=>e.namespace===r)):o in n}}function createRunHook(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){const n=e[t];n[r]||(n[r]={handlers:[],runs:0}),n[r].runs++;const i=n[r].handlers;for(var s=arguments.length,c=new Array(s>1?s-1:0),a=1;a<s;a++)c[a-1]=arguments[a];if(!i||!i.length)return o?c[0]:void 0;const l={name:r,currentIndex:0};for(n.__current.push(l);l.currentIndex<i.length;){const e=i[l.currentIndex].callback.apply(null,c);o&&(c[0]=e),l.currentIndex++}return n.__current.pop(),o?c[0]:void 0}}function createCurrentHook(e,t){return function(){var o,r;const n=e[t];return null!==(o=null===(r=n.__current[n.__current.length-1])||void 0===r?void 0:r.name)&&void 0!==o?o:null}}function createDoingHook(e,t){return function(o){const r=e[t];return void 0===o?void 0!==r.__current[0]:!!r.__current[0]&&o===r.__current[0].name}}function createDidHook(e,t){return function(o){const r=e[t];if(validateHookName(o))return r[o]&&r[o].runs?r[o].runs:0}}class _Hooks{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=createAddHook(this,"actions"),this.addFilter=createAddHook(this,"filters"),this.removeAction=createRemoveHook(this,"actions"),this.removeFilter=createRemoveHook(this,"filters"),this.hasAction=createHasHook(this,"actions"),this.hasFilter=createHasHook(this,"filters"),this.removeAllActions=createRemoveHook(this,"actions",!0),this.removeAllFilters=createRemoveHook(this,"filters",!0),this.doAction=createRunHook(this,"actions"),this.applyFilters=createRunHook(this,"filters",!0),this.currentAction=createCurrentHook(this,"actions"),this.currentFilter=createCurrentHook(this,"filters"),this.doingAction=createDoingHook(this,"actions"),this.doingFilter=createDoingHook(this,"filters"),this.didAction=createDidHook(this,"actions"),this.didFilter=createDidHook(this,"filters")}}function createHooks(){return new _Hooks}const defaultHooks=createHooks(),{addAction:addAction,addFilter:addFilter,removeAction:removeAction,removeFilter:removeFilter,hasAction:hasAction,hasFilter:hasFilter,removeAllActions:removeAllActions,removeAllFilters:removeAllFilters,doAction:doAction,applyFilters:applyFilters,currentAction:currentAction,currentFilter:currentFilter,doingAction:doingAction,doingFilter:doingFilter,didAction:didAction,didFilter:didFilter,actions:actions,filters:filters}=defaultHooks;export{applyFilters as a};