{"file":"utils-a086ed6e.js","mappings":"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","names":[],"sources":["./src/store/utils.ts"],"sourcesContent":["import { Product } from '../types';\n\nconst isObject = item => item && typeof item === 'object' && !Array.isArray(item);\n\nexport const getSerializedState = () => {\n  const storeTag = document.querySelector(`script[type=\"application/json\"]#sc-store-data`);\n  if (!storeTag) return {};\n  try {\n    const state = JSON.parse(storeTag.textContent);\n    if (isObject(state)) return state;\n    throw Error('Parsed state is not an object');\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.log(e);\n  }\n  return {};\n};\n\n/**\n * Is this variant option sold out.\n */\nexport const isProductVariantOptionSoldOut = (optionNumber, option, variantValues, product: Product) => {\n  // product stock is not enabled or out of stock purchases are allowed.\n  if (!product?.stock_enabled || product?.allow_out_of_stock_purchases) return false;\n\n  // if this is option 1, check to see if there are any variants with this option.\n  if (optionNumber === 1) {\n    const items = (product.variants?.data || []).filter?.(variant => variant.option_1 === option);\n    const highestStock = Math.max(...items.map(item => item.available_stock));\n    return highestStock <= 0;\n  }\n\n  // if this is option 2, check to see if there are any variants with this option and option 1\n  if (optionNumber === 2) {\n    const items = (product.variants?.data || []).filter(variant => variant?.option_1 === variantValues.option_1 && variant.option_2 === option);\n    const highestStock = Math.max(...items.map(item => item.available_stock));\n    return highestStock <= 0;\n  }\n\n  // if this is option 4, check to see if there are any variants with all the options.\n  const items = (product.variants?.data || []).filter(\n    variant => variant?.option_1 === variantValues.option_1 && variant?.option_2 === variantValues.option_2 && variant.option_3 === option,\n  );\n  const highestStock = Math.max(...items.map(item => item.available_stock));\n  return highestStock <= 0;\n};\n\n/**\n * Is this variant option missing/unavailable?\n */\nexport const isProductVariantOptionMissing = (optionNumber: number, option: string, variantValues, product: Product) => {\n  // if this is option 1, check to see if there are any variants with this option.\n  if (optionNumber === 1) {\n    return !(product?.variants?.data || []).some(variant => variant.option_1 === option);\n  }\n\n  // if this is option 2, check to see if there are any variants with this option and option 1\n  if (optionNumber === 2) {\n    return !(product?.variants?.data || []).some(variant => variant?.option_1 === variantValues.option_1 && variant.option_2 === option);\n  }\n\n  // if this is option 3, check to see if there are any variants with all the options.\n  return !(product?.variants?.data || []).some(\n    variant => variant?.option_1 === variantValues.option_1 && variant?.option_2 === variantValues.option_2 && variant.option_3 === option,\n  );\n};\n"],"version":3}