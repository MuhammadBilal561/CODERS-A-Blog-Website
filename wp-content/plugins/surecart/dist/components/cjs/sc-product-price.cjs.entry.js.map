{"file":"sc-product-price.entry.cjs.js","mappings":"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","names":["state","h","getUpsellDiscountAmount","getUpsellScratchAmount","Host"],"sources":["./src/components/controllers/product/sc-product-price/sc-product-price.scss?tag=sc-product-price&encapsulation=shadow","./src/components/controllers/product/sc-product-price/sc-product-price.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","/**\n * External dependencies.\n */\nimport { Component, h, Prop, Host } from '@stencil/core';\nimport { __, _n } from '@wordpress/i18n';\n\n/**\n * Internal dependencies.\n */\nimport { state } from '@store/product';\nimport { Price, Variant } from '../../../../types';\nimport { getDiscountedAmount as getUpsellDiscountAmount, getScratchAmount as getUpsellScratchAmount } from '@store/upsell/getters';\n\n@Component({\n  tag: 'sc-product-price',\n  styleUrl: 'sc-product-price.scss',\n  shadow: true,\n})\nexport class ScProductPrice {\n  /** The product's prices. */\n  @Prop() prices: Price[];\n\n  /** The sale text */\n  @Prop() saleText: string;\n\n  /** The product id */\n  @Prop() productId: string;\n\n  renderRange() {\n    if (state[this.productId]?.prices?.length === 1) {\n      return this.renderPrice(state[this.productId]?.prices[0]);\n    }\n    return <sc-price-range prices={state[this.productId]?.prices} />;\n  }\n\n  renderVariantPrice(selectedVariant: Variant) {\n    const variant = state[this.productId]?.variants?.find(variant => variant?.id === selectedVariant?.id);\n    return this.renderPrice(state[this.productId].selectedPrice, variant?.amount);\n  }\n\n  renderPrice(price: Price, variantAmount?: number) {\n    const originalAmount = variantAmount ?? price?.amount ?? 0;\n\n    const amount = getUpsellDiscountAmount(originalAmount);\n    const scratch_amount = getUpsellScratchAmount(price?.scratch_amount);\n\n    return (\n      <sc-price\n        currency={price?.currency}\n        amount={amount}\n        scratchAmount={scratch_amount}\n        saleText={this.saleText}\n        adHoc={price?.ad_hoc}\n        trialDurationDays={price?.trial_duration_days}\n        setupFeeAmount={price?.setup_fee_enabled ? price?.setup_fee_amount : null}\n        setupFeeName={price?.setup_fee_enabled ? price?.setup_fee_name : null}\n        recurringPeriodCount={price?.recurring_period_count}\n        recurringInterval={price?.recurring_interval}\n        recurringIntervalCount={price?.recurring_interval_count}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <Host role=\"paragraph\">\n        {(() => {\n          if (state[this.productId]?.selectedVariant) {\n            return this.renderVariantPrice(state[this.productId]?.selectedVariant);\n          }\n\n          if (state[this.productId]?.selectedPrice) {\n            return this.renderPrice(state[this.productId].selectedPrice);\n          }\n\n          if (state[this.productId]?.prices?.length) {\n            return this.renderRange();\n          }\n\n          return <slot />;\n        })()}\n      </Host>\n    );\n  }\n}\n"],"version":3}