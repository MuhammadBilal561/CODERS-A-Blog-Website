{"file":"google-55083ae7.js","mappings":"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","names":["maybeConvertAmount","trackEvent"],"sources":["./src/store/product/facebook.ts","./src/store/product/google.ts"],"sourcesContent":["import { maybeConvertAmount } from '../../functions/currency';\nimport { ProductsSearchedParams } from 'src/types';\n\n/**\n * Handle search event.\n */\nwindow.addEventListener('scSearched', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const eventDetail: ProductsSearchedParams = e.detail;\n\n  window.fbq('track', 'Search', {\n    search_string: eventDetail.searchString,\n    content_ids: eventDetail.searchResultIds,\n    ...(!!eventDetail?.searchCollections?.length ? { content_category: eventDetail.searchCollections.join(',') } : {}),\n  });\n});\n\n/**\n * Handle view content event.\n */\nwindow.addEventListener('scProductViewed', function (e: CustomEvent) {\n  if (!window?.fbq) return;\n\n  const product = e.detail;\n\n  window.fbq('track', 'ViewContent', {\n    content_ids: [product.id],\n    content_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n    content_name: product?.name + (product?.variant_options?.length ? ` - ${product?.variant_options.join(' / ')}` : ''),\n    content_type: 'product',\n    contents: [\n      {\n        id: product.id,\n        quantity: 1,\n      },\n    ],\n    currency: product?.price?.currency,\n    value: maybeConvertAmount(product.price?.amount || 0, product.price?.currency || 'USD'),\n  });\n});\n","import { maybeConvertAmount } from '../../functions/currency';\nimport { ProductsViewedParams } from 'src/types';\nimport { __ } from '@wordpress/i18n';\nimport { trackEvent } from '../../functions/google';\n/**\n * Handle the search event.\n */\n\nwindow.addEventListener('scSearched', (e: CustomEvent) => {\n  trackEvent('search', {\n    search_term: e.detail?.searchString,\n  });\n});\n\n/**\n * Handle view item event.\n */\nwindow.addEventListener('scProductViewed', (e: CustomEvent) => {\n  const product = e.detail;\n  trackEvent('view_item', {\n    value: maybeConvertAmount(product.price?.amount || 0, product.price?.currency || 'USD'),\n    currency: product.price?.currency,\n    items: [\n      {\n        item_id: product?.id,\n        item_name: product?.name,\n        currency: product?.price?.currency,\n        discount: product?.discount_amount ? maybeConvertAmount(product?.discount_amount, product?.price?.currency) : 0,\n        price: maybeConvertAmount(product?.price?.amount, product?.price?.currency),\n        quantity: product?.quantity || 1,\n        ...(product?.variant_options?.length\n          ? {\n              item_variant: product?.variant_options.map(option => option.name).join(' / '),\n            }\n          : {}),\n        ...(product?.product_collections?.data?.length\n          ? {\n              item_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n            }\n          : {}),\n      },\n    ],\n  });\n});\n\n/**\n * Handle view items event.\n */\nwindow.addEventListener('scProductsViewed', (e: CustomEvent) => {\n  const eventDetail: ProductsViewedParams = e.detail;\n  trackEvent('view_item_list', {\n    ...(eventDetail?.collectionId ? { item_list_id: eventDetail.collectionId } : {}),\n    item_list_name: eventDetail.pageTitle,\n    items: eventDetail?.products?.map(product => ({\n      item_id: product?.id,\n      item_name: product?.name,\n      ...(product?.product_collections?.data?.length\n        ? {\n            item_category: product?.product_collections?.data?.map(collection => collection.name).join(', '),\n          }\n        : {}),\n      ...(eventDetail?.collectionId ? { item_list_id: eventDetail.collectionId } : {}),\n      item_list_name: eventDetail.pageTitle,\n    })),\n  });\n});\n"],"version":3}