{"file":"sc-upsell-submit-button.entry.js","mappings":";;;;;;;;;;;;;;;;;AAAA,MAAM,uBAAuB,GAAG,qnDAAqnD;;MCkBxoD,oBAAoB;;;;EAG/B,kBAAkB;;IAChB,OAAO,CAAA,MAAAA,KAAW,CAAC,OAAO,0CAAE,EAAE,KAAI,EAAE,CAAC;GACtC;EAED,MAAM,qBAAqB,CAAC,CAAC;IAC3B,CAAC,CAAC,cAAc,EAAE,CAAC;IACnB,MAAM,EAAE,CAAC;GACV;EAED,MAAM;IACJ,QACE,EAAC,IAAI,IACH,KAAK,EAAE;QACL,SAAS,EAAE,MAAM,EAAE;QACnB,aAAa,EAAEA,KAAW,CAAC,QAAQ;;QAEnC,aAAa,EAAE,CAAC,mBAAmB,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,KAAK,CAAAC,OAAY,aAAZA,OAAY,uBAAZA,OAAY,CAAE,IAAI,MAAK,cAAc;QAChK,gBAAgB,EAAE,wBAAwB,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAAA,OAAY,aAAZA,OAAY,uBAAZA,OAAY,CAAE,IAAI,MAAK,SAAS;OAC1G,EACD,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,IAE3C,eAAQ,CACH,EACP;GACH;;;;;;;","names":["upsellState","noticesState"],"sources":["./src/components/controllers/upsell/sc-upsell-submit-button/sc-upsell-submit-button.scss?tag=sc-upsell-submit-button","./src/components/controllers/upsell/sc-upsell-submit-button/sc-upsell-submit-button.tsx"],"sourcesContent":["sc-upsell-submit-button {\n  position: relative;\n  display: block;\n\n  .wp-block-button__link {\n    position: relative;\n    text-decoration: none;\n\n    span {\n      sc-icon {\n        padding-right: var(--sc-spacing-small);\n      }\n    }\n\n    [data-text], sc-spinner {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n  }\n\n  .sc-block-button--sold-out,\n  .sc-block-button--unavailable {\n    display: none !important;\n  }\n\n  &.is-unavailable {\n    .sc-block-button__link {\n      display: none !important;\n    }\n    .sc-block-button--unavailable {\n      display: initial !important;\n    }\n  }\n\n  &.is-sold-out {\n    .sc-block-button__link {\n      display: none !important;\n    }\n    .sc-block-button--sold-out {\n      display: initial !important;\n    }\n  }\n\n  sc-spinner::part(base) {\n    --indicator-color: currentColor;\n    --spinner-size: 12px;\n    position: absolute;\n    top: calc(50% - var(--spinner-size) + (var(--spinner-size) / 4));\n    left: calc(50% - var(--spinner-size) + (var(--spinner-size) / 4));\n  }\n\n  [data-text],\n  [data-loader] {\n    transition: opacity var(--sc-transition-fast) ease-in-out, visibility var(--sc-transition-fast) ease-in-out;\n  }\n\n  [data-loader] {\n    opacity: 0;\n    visibility: hidden;\n  }\n\n  &.is-disabled {\n    pointer-events: none;\n  }\n\n  &.is-busy {\n    [data-text] {\n      opacity: 0;\n      visibility: hidden;\n    }\n    [data-loader] {\n      opacity: 1;\n      visibility: visible;\n    }\n  }\n\n  &.is-out-of-stock {\n    [data-text] {\n      opacity: 0.6;\n    }\n  }\n}\n","/**\n * External dependencies.\n */\nimport { Component, Element, h, Host } from '@stencil/core';\n\n/**\n * Internal dependencies.\n */\nimport { state as upsellState } from '@store/upsell';\nimport { state as noticesState } from '@store/notices';\nimport { isProductOutOfStock, isSelectedVariantMissing } from '@store/product/getters';\nimport { accept } from '@store/upsell/mutations';\nimport { isBusy } from '@store/upsell/getters';\n\n@Component({\n  tag: 'sc-upsell-submit-button',\n  styleUrl: 'sc-upsell-submit-button.scss',\n})\nexport class ScUpsellSubmitButton {\n  @Element() el: HTMLScUpsellSubmitButtonElement;\n\n  getUpsellProductId() {\n    return upsellState.product?.id || '';\n  }\n\n  async handleAddToOrderClick(e) {\n    e.preventDefault();\n    accept();\n  }\n\n  render() {\n    return (\n      <Host\n        class={{\n          'is-busy': isBusy(),\n          'is-disabled': upsellState.disabled,\n          // TODO: change this to out of stock error message.\n          'is-sold-out': (isProductOutOfStock(this.getUpsellProductId()) && !isSelectedVariantMissing(this.getUpsellProductId())) || noticesState?.code === 'out_of_stock',\n          'is-unavailable': isSelectedVariantMissing(this.getUpsellProductId()) || noticesState?.code === 'expired',\n        }}\n        onClick={e => this.handleAddToOrderClick(e)}\n      >\n        <slot />\n      </Host>\n    );\n  }\n}\n"],"version":3}