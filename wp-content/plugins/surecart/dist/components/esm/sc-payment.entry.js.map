{"file":"sc-payment.entry.js","mappings":";;;;;;;;;;;;;;;;AAAA,MAAM,YAAY,GAAG,0kBAA0kB;;;;;;;;;;;;;;;mECmD5hB,UAAE,uCAAuC,UAAE;;;;yWAqB7E,UAAE,+EAIK,UAAE,mJAE3B,UAAE,weAQI,UAAE,oFAImB,UAAE,gKAE3B,UAAE;;;;;;;qEAckD,UAAE,yCAAyC,UAAE;;;;;+XAe5E,UAAE,mIAE3B,UAAE;;;;;;;;;;kXAwBE,UAAE,0rBAaI,UAAE;;;0DAQA,UAAE,4DAKP,UAAE;;;;;;;;;;;;;;;;;;;","names":[],"sources":["./src/components/controllers/checkout-form/payment/sc-payment.scss?tag=sc-payment&encapsulation=shadow","./src/components/controllers/checkout-form/payment/sc-payment.tsx"],"sourcesContent":[":host {\n  display: flex !important;\n  flex-direction: column;\n  gap: var(--sc-input-label-margin);\n  position: relative;\n  font-family: var(--sc-font-sans);\n}\n\n.sc-payment-toggle-summary {\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  gap: 0.5em;\n  font-weight: var(--sc-font-weight-semibold);\n}\n\n.sc-payment-label {\n  display: flex;\n  justify-content: space-between;\n}\n\n.sc-payment-instructions {\n  color: var(--sc-color-gray-600);\n  font-size: var(--sc-font-size-small);\n  line-height: var(--sc-line-height-dense);\n}\n\n.sc-payment {\n  &__stripe-card-element {\n    display: flex !important;\n    flex-direction: column;\n    gap: var(--sc-input-label-margin);\n    position: relative;\n  }\n}\n","import { Component, Element, Fragment, h, Host, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { state as checkoutState } from '@store/checkout';\nimport { state as processorsState } from '@store/processors';\nimport { state as selectedProcessor } from '@store/selected-processor';\nimport { ManualPaymentMethods } from './ManualPaymentMethods';\nimport {\n  getAvailableProcessor,\n  hasMultipleProcessorChoices,\n  availableManualPaymentMethods,\n  availableProcessors,\n  hasOtherAvailableCreditCardProcessor,\n} from '@store/processors/getters';\nimport { addQueryArgs } from '@wordpress/url';\nimport { MockProcessor } from './MockProcessor';\n\n/**\n * @part base - The elements base wrapper.\n * @part form-control - The form control wrapper.\n * @part label - The input label.\n * @part help-text - Help text that describes how to use the input.\n * @part test-badge__base - Test badge base.\n * @part test-badge__content - Test badge content.\n */\n@Component({\n  tag: 'sc-payment',\n  styleUrl: 'sc-payment.scss',\n  shadow: true,\n})\nexport class ScPayment {\n  /** This element. */\n  @Element() el: HTMLScPaymentElement;\n\n  @Prop() stripePaymentElement: boolean;\n\n  /** Disabled processor types */\n  @Prop() disabledProcessorTypes: string[];\n\n  @Prop() secureNotice: string;\n\n  /** The input's label. */\n  @Prop() label: string;\n\n  /** Hide the test mode badge */\n  @Prop() hideTestModeBadge: boolean;\n\n  componentWillLoad() {\n    processorsState.disabled.processors = this.disabledProcessorTypes;\n  }\n\n  renderStripe(processor) {\n    const title = hasOtherAvailableCreditCardProcessor('stripe') ? __('Credit Card (Stripe)', 'surecart') : __('Credit Card', 'surecart');\n    return (\n      <sc-payment-method-choice key={processor?.id} processor-id=\"stripe\" card={this.stripePaymentElement}>\n        <span slot=\"summary\" class=\"sc-payment-toggle-summary\">\n          <sc-icon name=\"credit-card\" style={{ fontSize: '24px' }} aria-hidden=\"true\"></sc-icon>\n          <span>{title}</span>\n        </span>\n\n        <div class=\"sc-payment__stripe-card-element\">\n          <slot name=\"stripe\" />\n        </div>\n      </sc-payment-method-choice>\n    );\n  }\n\n  renderPayPal(processor) {\n    return (\n      <Fragment>\n        <sc-payment-method-choice key={processor?.id} processor-id=\"paypal\">\n          <span slot=\"summary\" class=\"sc-payment-toggle-summary\">\n            <sc-icon name=\"paypal\" style={{ width: '80px', fontSize: '24px' }} aria-hidden=\"true\"></sc-icon>\n            <sc-visually-hidden>{__('PayPal', 'surecart')}</sc-visually-hidden>\n          </span>\n\n          <sc-card>\n            <sc-payment-selected label={__('PayPal selected for check out.', 'surecart')}>\n              <sc-icon slot=\"icon\" name=\"paypal\" style={{ width: '80px' }} aria-hidden=\"true\"></sc-icon>\n              {__('Another step will appear after submitting your order to complete your purchase details.', 'surecart')}\n            </sc-payment-selected>\n          </sc-card>\n        </sc-payment-method-choice>\n        {!hasOtherAvailableCreditCardProcessor('paypal') && (\n          <sc-payment-method-choice key={processor?.id} processor-id=\"paypal\" method-id=\"card\">\n            <span slot=\"summary\" class=\"sc-payment-toggle-summary\">\n              <sc-icon name=\"credit-card\" style={{ fontSize: '24px' }} aria-hidden=\"true\"></sc-icon>\n              <span>{__('Credit Card', 'surecart')}</span>\n            </span>\n\n            <sc-card>\n              <sc-payment-selected label={__('Credit Card selected for check out.', 'surecart')}>\n                <sc-icon name=\"credit-card\" slot=\"icon\" style={{ fontSize: '24px' }} aria-hidden=\"true\"></sc-icon>\n                {__('Another step will appear after submitting your order to complete your purchase details.', 'surecart')}\n              </sc-payment-selected>\n            </sc-card>\n          </sc-payment-method-choice>\n        )}\n      </Fragment>\n    );\n  }\n\n  renderMock(processor) {\n    return <MockProcessor processor={processor} />;\n  }\n\n  renderPaystack(processor) {\n    const title = hasOtherAvailableCreditCardProcessor('paystack') ? __('Credit Card (Paystack)', 'surecart') : __('Credit Card', 'surecart');\n\n    // if system currency is not in the supported currency list, then stop.\n    if (!(processor?.supported_currencies ?? []).includes(window?.scData?.currency)) {\n      return;\n    }\n\n    return (\n      <sc-payment-method-choice key={processor?.id} processor-id=\"paystack\">\n        <span slot=\"summary\" class=\"sc-payment-toggle-summary\">\n          <sc-icon name=\"credit-card\" style={{ fontSize: '24px' }} aria-hidden=\"true\"></sc-icon>\n          <span>{title}</span>\n        </span>\n\n        <sc-card>\n          <sc-payment-selected label={__('Credit Card selected for check out.', 'surecart')}>\n            <sc-icon slot=\"icon\" name=\"credit-card\" aria-hidden=\"true\"></sc-icon>\n            {__('Another step will appear after submitting your order to complete your purchase details.', 'surecart')}\n          </sc-payment-selected>\n        </sc-card>\n        <sc-checkout-paystack-payment-provider />\n      </sc-payment-method-choice>\n    );\n  }\n\n  render() {\n    // payment is not required for this order.\n    if (checkoutState.checkout?.payment_method_required === false) {\n      return null;\n    }\n\n    const Tag = hasMultipleProcessorChoices() || selectedProcessor?.id === 'paypal' ? 'sc-toggles' : 'div';\n    const mollie = getAvailableProcessor('mollie');\n\n    return (\n      <Host>\n        <sc-form-control label={this.label} exportparts=\"label, help-text, form-control\">\n          <div class=\"sc-payment-label\" slot=\"label\">\n            <div>{this.label}</div>\n            {checkoutState.mode === 'test' && !this.hideTestModeBadge && (\n              <sc-tag type=\"warning\" size=\"small\" exportparts=\"base:test-badge__base, content:test-badge__content\">\n                {__('Test Mode', 'surecart')}\n              </sc-tag>\n            )}\n          </div>\n\n          {mollie?.id ? (\n            <sc-checkout-mollie-payment processor-id={mollie?.id}></sc-checkout-mollie-payment>\n          ) : (\n            <Tag collapsible={false} theme=\"container\">\n              {!availableProcessors()?.length && !availableManualPaymentMethods()?.length && (\n                <sc-alert type=\"info\" open>\n                  {window?.scData?.user_permissions?.manage_sc_shop_settings ? (\n                    <Fragment>\n                      {__('You do not have any processors enabled for this mode and cart. ', 'surecart')}\n                      <a\n                        href={addQueryArgs(`${window?.scData?.admin_url}admin.php`, {\n                          page: 'sc-settings',\n                          tab: 'processors',\n                        })}\n                        style={{ color: 'var(--sc-color-gray-700)' }}\n                      >\n                        {__('Please configure your processors', 'surecart')}\n                      </a>\n                      .\n                    </Fragment>\n                  ) : (\n                    __('Please contact us for payment.', 'surecart')\n                  )}\n                </sc-alert>\n              )}\n              {(availableProcessors() || []).map(processor => {\n                switch (processor?.processor_type) {\n                  case 'stripe':\n                    return this.renderStripe(processor);\n                  case 'paypal':\n                    return this.renderPayPal(processor);\n                  case 'paystack':\n                    return this.renderPaystack(processor);\n                  case 'mock':\n                    return this.renderMock(processor);\n                }\n              })}\n              <ManualPaymentMethods methods={availableManualPaymentMethods()} />\n            </Tag>\n          )}\n        </sc-form-control>\n      </Host>\n    );\n  }\n}\n"],"version":3}